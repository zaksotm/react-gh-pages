{"ast":null,"code":"(function () {\n  var $,\n      Analyze,\n      Blender,\n      Calculate,\n      Caman,\n      CamanParser,\n      Canvas,\n      Convert,\n      Event,\n      Fiber,\n      Filter,\n      IO,\n      Image,\n      Layer,\n      Log,\n      Module,\n      Pixel,\n      Plugin,\n      Renderer,\n      Root,\n      Store,\n      Util,\n      fs,\n      moduleKeywords,\n      slice,\n      vignetteFilters,\n      __indexOf = [].indexOf || function (item) {\n    for (var i = 0, l = this.length; i < l; i++) {\n      if (i in this && this[i] === item) return i;\n    }\n\n    return -1;\n  },\n      __slice = [].slice,\n      __hasProp = {}.hasOwnProperty,\n      __bind = function (fn, me) {\n    return function () {\n      return fn.apply(me, arguments);\n    };\n  },\n      __extends = function (child, parent) {\n    for (var key in parent) {\n      if (__hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  };\n\n  moduleKeywords = ['extended', 'included'];\n\n  Module = function () {\n    function Module() {}\n\n    Module[\"extends\"] = function (obj) {\n      var key, value, _ref;\n\n      for (key in obj) {\n        value = obj[key];\n\n        if (__indexOf.call(moduleKeywords, key) < 0) {\n          this[key] = value;\n        }\n      }\n\n      if ((_ref = obj.extended) != null) {\n        _ref.apply(this);\n      }\n\n      return this;\n    };\n\n    Module.includes = function (obj) {\n      var key, value, _ref;\n\n      for (key in obj) {\n        value = obj[key];\n\n        if (__indexOf.call(moduleKeywords, key) < 0) {\n          this.prototype[key] = value;\n        }\n      }\n\n      if ((_ref = obj.included) != null) {\n        _ref.apply(this);\n      }\n\n      return this;\n    };\n\n    Module.delegate = function () {\n      var args, source, target, _i, _len, _results;\n\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      target = args.pop();\n      _results = [];\n\n      for (_i = 0, _len = args.length; _i < _len; _i++) {\n        source = args[_i];\n\n        _results.push(this.prototype[source] = target.prototype[source]);\n      }\n\n      return _results;\n    };\n\n    Module.aliasFunction = function (to, from) {\n      var _this = this;\n\n      return this.prototype[to] = function () {\n        var args;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        return _this.prototype[from].apply(_this, args);\n      };\n    };\n\n    Module.aliasProperty = function (to, from) {\n      return Object.defineProperty(this.prototype, to, {\n        get: function () {\n          return this[from];\n        },\n        set: function (val) {\n          return this[from] = val;\n        }\n      });\n    };\n\n    Module.included = function (func) {\n      return func.call(this, this.prototype);\n    };\n\n    return Module;\n  }();\n\n  slice = Array.prototype.slice;\n\n  $ = function (sel, root) {\n    if (root == null) {\n      root = document;\n    }\n\n    if (typeof sel === \"object\" || typeof exports !== \"undefined\" && exports !== null) {\n      return sel;\n    }\n\n    return root.querySelector(sel);\n  };\n\n  Util = function () {\n    function Util() {}\n\n    Util.uniqid = function () {\n      var id;\n      id = 0;\n      return {\n        get: function () {\n          return id++;\n        }\n      };\n    }();\n\n    Util.extend = function () {\n      var copy, dest, obj, prop, src, _i, _len;\n\n      obj = arguments[0], src = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      dest = obj;\n\n      for (_i = 0, _len = src.length; _i < _len; _i++) {\n        copy = src[_i];\n\n        for (prop in copy) {\n          if (!__hasProp.call(copy, prop)) continue;\n          dest[prop] = copy[prop];\n        }\n      }\n\n      return dest;\n    };\n\n    Util.clampRGB = function (val) {\n      if (val < 0) {\n        return 0;\n      }\n\n      if (val > 255) {\n        return 255;\n      }\n\n      return val;\n    };\n\n    Util.copyAttributes = function (from, to, opts) {\n      var attr, _i, _len, _ref, _ref1, _results;\n\n      if (opts == null) {\n        opts = {};\n      }\n\n      _ref = from.attributes;\n      _results = [];\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        attr = _ref[_i];\n\n        if (opts.except != null && (_ref1 = attr.nodeName, __indexOf.call(opts.except, _ref1) >= 0)) {\n          continue;\n        }\n\n        _results.push(to.setAttribute(attr.nodeName, attr.nodeValue));\n      }\n\n      return _results;\n    };\n\n    Util.dataArray = function (length) {\n      if (length == null) {\n        length = 0;\n      }\n\n      if (Caman.NodeJS || window.Uint8Array != null) {\n        return new Uint8Array(length);\n      }\n\n      return new Array(length);\n    };\n\n    return Util;\n  }();\n\n  if (typeof exports !== \"undefined\" && exports !== null) {\n    Root = exports;\n    Canvas = require('canvas');\n    Image = Canvas.Image;\n    Fiber = require('fibers');\n    fs = require('fs');\n  } else {\n    Root = window;\n  }\n\n  Caman = function (_super) {\n    __extends(Caman, _super);\n\n    Caman.version = {\n      release: \"4.1.2\",\n      date: \"7/27/2013\"\n    };\n    Caman.DEBUG = false;\n    Caman.allowRevert = true;\n    Caman.crossOrigin = \"anonymous\";\n    Caman.remoteProxy = \"\";\n    Caman.proxyParam = \"camanProxyUrl\";\n    Caman.NodeJS = typeof exports !== \"undefined\" && exports !== null;\n    Caman.autoload = !Caman.NodeJS;\n\n    Caman.toString = function () {\n      return \"Version \" + Caman.version.release + \", Released \" + Caman.version.date;\n    };\n\n    Caman.getAttrId = function (canvas) {\n      if (Caman.NodeJS) {\n        return true;\n      }\n\n      if (typeof canvas === \"string\") {\n        canvas = $(canvas);\n      }\n\n      if (!(canvas != null && canvas.getAttribute != null)) {\n        return null;\n      }\n\n      return canvas.getAttribute('data-caman-id');\n    };\n\n    function Caman() {\n      this.nodeFileReady = __bind(this.nodeFileReady, this);\n\n      var args,\n          callback,\n          id,\n          _this = this;\n\n      if (arguments.length === 0) {\n        throw \"Invalid arguments\";\n      }\n\n      if (this instanceof Caman) {\n        this.finishInit = this.finishInit.bind(this);\n        this.imageLoaded = this.imageLoaded.bind(this);\n        args = arguments[0];\n\n        if (!Caman.NodeJS) {\n          id = parseInt(Caman.getAttrId(args[0]), 10);\n          callback = typeof args[1] === \"function\" ? args[1] : typeof args[2] === \"function\" ? args[2] : function () {};\n\n          if (!isNaN(id) && Store.has(id)) {\n            return Store.execute(id, callback);\n          }\n        }\n\n        this.id = Util.uniqid.get();\n        this.initializedPixelData = this.originalPixelData = null;\n        this.cropCoordinates = {\n          x: 0,\n          y: 0\n        };\n        this.cropped = false;\n        this.resized = false;\n        this.pixelStack = [];\n        this.layerStack = [];\n        this.canvasQueue = [];\n        this.currentLayer = null;\n        this.scaled = false;\n        this.analyze = new Analyze(this);\n        this.renderer = new Renderer(this);\n        this.domIsLoaded(function () {\n          _this.parseArguments(args);\n\n          return _this.setup();\n        });\n        return this;\n      } else {\n        return new Caman(arguments);\n      }\n    }\n\n    Caman.prototype.domIsLoaded = function (cb) {\n      var listener,\n          _this = this;\n\n      if (Caman.NodeJS) {\n        return setTimeout(function () {\n          return cb.call(_this);\n        }, 0);\n      } else {\n        if (document.readyState === \"complete\") {\n          Log.debug(\"DOM initialized\");\n          return setTimeout(function () {\n            return cb.call(_this);\n          }, 0);\n        } else {\n          listener = function () {\n            if (document.readyState === \"complete\") {\n              Log.debug(\"DOM initialized\");\n              return cb.call(_this);\n            }\n          };\n\n          return document.addEventListener(\"readystatechange\", listener, false);\n        }\n      }\n    };\n\n    Caman.prototype.parseArguments = function (args) {\n      var key, val, _ref, _results;\n\n      if (args.length === 0) {\n        throw \"Invalid arguments given\";\n      }\n\n      this.initObj = null;\n      this.initType = null;\n      this.imageUrl = null;\n\n      this.callback = function () {};\n\n      this.setInitObject(args[0]);\n\n      if (args.length === 1) {\n        return;\n      }\n\n      switch (typeof args[1]) {\n        case \"string\":\n          this.imageUrl = args[1];\n          break;\n\n        case \"function\":\n          this.callback = args[1];\n      }\n\n      if (args.length === 2) {\n        return;\n      }\n\n      this.callback = args[2];\n\n      if (args.length === 4) {\n        _ref = args[4];\n        _results = [];\n\n        for (key in _ref) {\n          if (!__hasProp.call(_ref, key)) continue;\n          val = _ref[key];\n\n          _results.push(this.options[key] = val);\n        }\n\n        return _results;\n      }\n    };\n\n    Caman.prototype.setInitObject = function (obj) {\n      if (Caman.NodeJS) {\n        this.initObj = obj;\n        this.initType = 'node';\n        return;\n      }\n\n      if (typeof obj === \"object\") {\n        this.initObj = obj;\n      } else {\n        this.initObj = $(obj);\n      }\n\n      if (this.initObj == null) {\n        throw \"Could not find image or canvas for initialization.\";\n      }\n\n      return this.initType = this.initObj.nodeName.toLowerCase();\n    };\n\n    Caman.prototype.setup = function () {\n      switch (this.initType) {\n        case \"node\":\n          return this.initNode();\n\n        case \"img\":\n          return this.initImage();\n\n        case \"canvas\":\n          return this.initCanvas();\n      }\n    };\n\n    Caman.prototype.initNode = function () {\n      Log.debug(\"Initializing for NodeJS\");\n\n      if (typeof this.initObj === \"string\") {\n        return fs.readFile(this.initObj, this.nodeFileReady);\n      } else {\n        return this.nodeFileReady(null, this.initObj);\n      }\n    };\n\n    Caman.prototype.nodeFileReady = function (err, data) {\n      if (err) {\n        throw err;\n      }\n\n      this.image = new Image();\n      this.image.src = data;\n      Log.debug(\"Image loaded. Width = \" + this.imageWidth() + \", Height = \" + this.imageHeight());\n      this.canvas = new Canvas(this.imageWidth(), this.imageHeight());\n      return this.finishInit();\n    };\n\n    Caman.prototype.initImage = function () {\n      this.image = this.initObj;\n      this.canvas = document.createElement('canvas');\n      this.context = this.canvas.getContext('2d');\n      Util.copyAttributes(this.image, this.canvas, {\n        except: ['src']\n      });\n      this.image.parentNode.replaceChild(this.canvas, this.image);\n      this.imageAdjustments();\n      return this.waitForImageLoaded();\n    };\n\n    Caman.prototype.initCanvas = function () {\n      this.canvas = this.initObj;\n      this.context = this.canvas.getContext('2d');\n\n      if (this.imageUrl != null) {\n        this.image = document.createElement('img');\n        this.image.src = this.imageUrl;\n        this.imageAdjustments();\n        return this.waitForImageLoaded();\n      } else {\n        return this.finishInit();\n      }\n    };\n\n    Caman.prototype.imageAdjustments = function () {\n      if (this.needsHiDPISwap()) {\n        Log.debug(this.image.src, \"->\", this.hiDPIReplacement());\n        this.swapped = true;\n        this.image.src = this.hiDPIReplacement();\n      }\n\n      if (IO.isRemote(this.image)) {\n        this.image.src = IO.proxyUrl(this.image.src);\n        return Log.debug(\"Remote image detected, using URL = \" + this.image.src);\n      }\n    };\n\n    Caman.prototype.waitForImageLoaded = function () {\n      if (this.isImageLoaded()) {\n        return this.imageLoaded();\n      } else {\n        return this.image.onload = this.imageLoaded;\n      }\n    };\n\n    Caman.prototype.isImageLoaded = function () {\n      if (!this.image.complete) {\n        return false;\n      }\n\n      if (this.image.naturalWidth != null && this.image.naturalWidth === 0) {\n        return false;\n      }\n\n      return true;\n    };\n\n    Caman.prototype.imageWidth = function () {\n      return this.image.width || this.image.naturalWidth;\n    };\n\n    Caman.prototype.imageHeight = function () {\n      return this.image.height || this.image.naturalHeight;\n    };\n\n    Caman.prototype.imageLoaded = function () {\n      Log.debug(\"Image loaded. Width = \" + this.imageWidth() + \", Height = \" + this.imageHeight());\n\n      if (this.swapped) {\n        this.canvas.width = this.imageWidth() / this.hiDPIRatio();\n        this.canvas.height = this.imageHeight() / this.hiDPIRatio();\n      } else {\n        this.canvas.width = this.imageWidth();\n        this.canvas.height = this.imageHeight();\n      }\n\n      return this.finishInit();\n    };\n\n    Caman.prototype.finishInit = function () {\n      var i, pixel, _i, _len, _ref;\n\n      if (this.context == null) {\n        this.context = this.canvas.getContext('2d');\n      }\n\n      this.originalWidth = this.preScaledWidth = this.width = this.canvas.width;\n      this.originalHeight = this.preScaledHeight = this.height = this.canvas.height;\n      this.hiDPIAdjustments();\n\n      if (!this.hasId()) {\n        this.assignId();\n      }\n\n      if (this.image != null) {\n        this.context.drawImage(this.image, 0, 0, this.imageWidth(), this.imageHeight(), 0, 0, this.preScaledWidth, this.preScaledHeight);\n      }\n\n      this.imageData = this.context.getImageData(0, 0, this.canvas.width, this.canvas.height);\n      this.pixelData = this.imageData.data;\n\n      if (Caman.allowRevert) {\n        this.initializedPixelData = Util.dataArray(this.pixelData.length);\n        this.originalPixelData = Util.dataArray(this.pixelData.length);\n        _ref = this.pixelData;\n\n        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n          pixel = _ref[i];\n          this.initializedPixelData[i] = pixel;\n          this.originalPixelData[i] = pixel;\n        }\n      }\n\n      this.dimensions = {\n        width: this.canvas.width,\n        height: this.canvas.height\n      };\n\n      if (!Caman.NodeJS) {\n        Store.put(this.id, this);\n      }\n\n      this.callback.call(this, this);\n      return this.callback = function () {};\n    };\n\n    Caman.prototype.reloadCanvasData = function () {\n      this.imageData = this.context.getImageData(0, 0, this.canvas.width, this.canvas.height);\n      return this.pixelData = this.imageData.data;\n    };\n\n    Caman.prototype.resetOriginalPixelData = function () {\n      var i, pixel, _i, _len, _ref, _results;\n\n      if (!Caman.allowRevert) {\n        throw \"Revert disabled\";\n      }\n\n      this.originalPixelData = Util.dataArray(this.pixelData.length);\n      _ref = this.pixelData;\n      _results = [];\n\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        pixel = _ref[i];\n\n        _results.push(this.originalPixelData[i] = pixel);\n      }\n\n      return _results;\n    };\n\n    Caman.prototype.hasId = function () {\n      return Caman.getAttrId(this.canvas) != null;\n    };\n\n    Caman.prototype.assignId = function () {\n      if (Caman.NodeJS || this.canvas.getAttribute('data-caman-id')) {\n        return;\n      }\n\n      return this.canvas.setAttribute('data-caman-id', this.id);\n    };\n\n    Caman.prototype.hiDPIDisabled = function () {\n      return this.canvas.getAttribute('data-caman-hidpi-disabled') !== null;\n    };\n\n    Caman.prototype.hiDPIAdjustments = function () {\n      var ratio;\n\n      if (Caman.NodeJS || !this.needsHiDPISwap()) {\n        return;\n      }\n\n      ratio = this.hiDPIRatio();\n\n      if (ratio !== 1) {\n        Log.debug(\"HiDPI ratio = \" + ratio);\n        this.scaled = true;\n        this.preScaledWidth = this.canvas.width;\n        this.preScaledHeight = this.canvas.height;\n        this.canvas.width = this.preScaledWidth * ratio;\n        this.canvas.height = this.preScaledHeight * ratio;\n        this.canvas.style.width = \"\" + this.preScaledWidth + \"px\";\n        this.canvas.style.height = \"\" + this.preScaledHeight + \"px\";\n        this.context.scale(ratio, ratio);\n        this.width = this.originalWidth = this.canvas.width;\n        return this.height = this.originalHeight = this.canvas.height;\n      }\n    };\n\n    Caman.prototype.hiDPIRatio = function () {\n      var backingStoreRatio, devicePixelRatio;\n      devicePixelRatio = window.devicePixelRatio || 1;\n      backingStoreRatio = this.context.webkitBackingStorePixelRatio || this.context.mozBackingStorePixelRatio || this.context.msBackingStorePixelRatio || this.context.oBackingStorePixelRatio || this.context.backingStorePixelRatio || 1;\n      return devicePixelRatio / backingStoreRatio;\n    };\n\n    Caman.prototype.hiDPICapable = function () {\n      return window.devicePixelRatio != null && window.devicePixelRatio !== 1;\n    };\n\n    Caman.prototype.needsHiDPISwap = function () {\n      if (this.hiDPIDisabled() || !this.hiDPICapable()) {\n        return false;\n      }\n\n      return this.hiDPIReplacement() !== null;\n    };\n\n    Caman.prototype.hiDPIReplacement = function () {\n      if (this.image == null) {\n        return null;\n      }\n\n      return this.image.getAttribute('data-caman-hidpi');\n    };\n\n    Caman.prototype.replaceCanvas = function (newCanvas) {\n      var oldCanvas;\n      oldCanvas = this.canvas;\n      this.canvas = newCanvas;\n      this.context = this.canvas.getContext('2d');\n\n      if (!Caman.NodeJS) {\n        oldCanvas.parentNode.replaceChild(this.canvas, oldCanvas);\n      }\n\n      this.width = this.canvas.width;\n      this.height = this.canvas.height;\n      this.reloadCanvasData();\n      return this.dimensions = {\n        width: this.canvas.width,\n        height: this.canvas.height\n      };\n    };\n\n    Caman.prototype.render = function (callback) {\n      var _this = this;\n\n      if (callback == null) {\n        callback = function () {};\n      }\n\n      Event.trigger(this, \"renderStart\");\n      return this.renderer.execute(function () {\n        _this.context.putImageData(_this.imageData, 0, 0);\n\n        return callback.call(_this);\n      });\n    };\n\n    Caman.prototype.revert = function (updateContext) {\n      var i, pixel, _i, _len, _ref;\n\n      if (updateContext == null) {\n        updateContext = true;\n      }\n\n      if (!Caman.allowRevert) {\n        throw \"Revert disabled\";\n      }\n\n      _ref = this.originalVisiblePixels();\n\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        pixel = _ref[i];\n        this.pixelData[i] = pixel;\n      }\n\n      if (updateContext) {\n        return this.context.putImageData(this.imageData, 0, 0);\n      }\n    };\n\n    Caman.prototype.reset = function () {\n      var canvas, ctx, i, imageData, pixel, pixelData, _i, _len, _ref;\n\n      canvas = document.createElement('canvas');\n      Util.copyAttributes(this.canvas, canvas);\n      canvas.width = this.originalWidth;\n      canvas.height = this.originalHeight;\n      ctx = canvas.getContext('2d');\n      imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      pixelData = imageData.data;\n      _ref = this.initializedPixelData;\n\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        pixel = _ref[i];\n        pixelData[i] = pixel;\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n      this.cropCoordinates = {\n        x: 0,\n        y: 0\n      };\n      this.resized = false;\n      return this.replaceCanvas(canvas);\n    };\n\n    Caman.prototype.originalVisiblePixels = function () {\n      var canvas, coord, ctx, endX, endY, i, imageData, pixel, pixelData, pixels, scaledCanvas, startX, startY, width, _i, _j, _len, _ref, _ref1, _ref2, _ref3;\n\n      if (!Caman.allowRevert) {\n        throw \"Revert disabled\";\n      }\n\n      pixels = [];\n      startX = this.cropCoordinates.x;\n      endX = startX + this.width;\n      startY = this.cropCoordinates.y;\n      endY = startY + this.height;\n\n      if (this.resized) {\n        canvas = document.createElement('canvas');\n        canvas.width = this.originalWidth;\n        canvas.height = this.originalHeight;\n        ctx = canvas.getContext('2d');\n        imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        pixelData = imageData.data;\n        _ref = this.originalPixelData;\n\n        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n          pixel = _ref[i];\n          pixelData[i] = pixel;\n        }\n\n        ctx.putImageData(imageData, 0, 0);\n        scaledCanvas = document.createElement('canvas');\n        scaledCanvas.width = this.width;\n        scaledCanvas.height = this.height;\n        ctx = scaledCanvas.getContext('2d');\n        ctx.drawImage(canvas, 0, 0, this.originalWidth, this.originalHeight, 0, 0, this.width, this.height);\n        pixelData = ctx.getImageData(0, 0, this.width, this.height).data;\n        width = this.width;\n      } else {\n        pixelData = this.originalPixelData;\n        width = this.originalWidth;\n      }\n\n      for (i = _j = 0, _ref1 = pixelData.length; _j < _ref1; i = _j += 4) {\n        coord = Pixel.locationToCoordinates(i, width);\n\n        if (startX <= (_ref2 = coord.x) && _ref2 < endX && startY <= (_ref3 = coord.y) && _ref3 < endY) {\n          pixels.push(pixelData[i], pixelData[i + 1], pixelData[i + 2], pixelData[i + 3]);\n        }\n      }\n\n      return pixels;\n    };\n\n    Caman.prototype.process = function (name, processFn) {\n      this.renderer.add({\n        type: Filter.Type.Single,\n        name: name,\n        processFn: processFn\n      });\n      return this;\n    };\n\n    Caman.prototype.processKernel = function (name, adjust, divisor, bias) {\n      var i, _i, _ref;\n\n      if (divisor == null) {\n        divisor = null;\n      }\n\n      if (bias == null) {\n        bias = 0;\n      }\n\n      if (divisor == null) {\n        divisor = 0;\n\n        for (i = _i = 0, _ref = adjust.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          divisor += adjust[i];\n        }\n      }\n\n      this.renderer.add({\n        type: Filter.Type.Kernel,\n        name: name,\n        adjust: adjust,\n        divisor: divisor,\n        bias: bias\n      });\n      return this;\n    };\n\n    Caman.prototype.processPlugin = function (plugin, args) {\n      this.renderer.add({\n        type: Filter.Type.Plugin,\n        plugin: plugin,\n        args: args\n      });\n      return this;\n    };\n\n    Caman.prototype.newLayer = function (callback) {\n      var layer;\n      layer = new Layer(this);\n      this.canvasQueue.push(layer);\n      this.renderer.add({\n        type: Filter.Type.LayerDequeue\n      });\n      callback.call(layer);\n      this.renderer.add({\n        type: Filter.Type.LayerFinished\n      });\n      return this;\n    };\n\n    Caman.prototype.executeLayer = function (layer) {\n      return this.pushContext(layer);\n    };\n\n    Caman.prototype.pushContext = function (layer) {\n      this.layerStack.push(this.currentLayer);\n      this.pixelStack.push(this.pixelData);\n      this.currentLayer = layer;\n      return this.pixelData = layer.pixelData;\n    };\n\n    Caman.prototype.popContext = function () {\n      this.pixelData = this.pixelStack.pop();\n      return this.currentLayer = this.layerStack.pop();\n    };\n\n    Caman.prototype.applyCurrentLayer = function () {\n      return this.currentLayer.applyToParent();\n    };\n\n    return Caman;\n  }(Module);\n\n  Root.Caman = Caman;\n\n  Caman.Analyze = function () {\n    function Analyze(c) {\n      this.c = c;\n    }\n\n    Analyze.prototype.calculateLevels = function () {\n      var i, levels, numPixels, _i, _j, _k, _ref;\n\n      levels = {\n        r: {},\n        g: {},\n        b: {}\n      };\n\n      for (i = _i = 0; _i <= 255; i = ++_i) {\n        levels.r[i] = 0;\n        levels.g[i] = 0;\n        levels.b[i] = 0;\n      }\n\n      for (i = _j = 0, _ref = this.c.pixelData.length; _j < _ref; i = _j += 4) {\n        levels.r[this.c.pixelData[i]]++;\n        levels.g[this.c.pixelData[i + 1]]++;\n        levels.b[this.c.pixelData[i + 2]]++;\n      }\n\n      numPixels = this.c.pixelData.length / 4;\n\n      for (i = _k = 0; _k <= 255; i = ++_k) {\n        levels.r[i] /= numPixels;\n        levels.g[i] /= numPixels;\n        levels.b[i] /= numPixels;\n      }\n\n      return levels;\n    };\n\n    return Analyze;\n  }();\n\n  Analyze = Caman.Analyze;\n\n  Caman.DOMUpdated = function () {\n    var img, imgs, parser, _i, _len, _results;\n\n    imgs = document.querySelectorAll(\"img[data-caman]\");\n\n    if (!(imgs.length > 0)) {\n      return;\n    }\n\n    _results = [];\n\n    for (_i = 0, _len = imgs.length; _i < _len; _i++) {\n      img = imgs[_i];\n\n      _results.push(parser = new CamanParser(img, function () {\n        this.parse();\n        return this.execute();\n      }));\n    }\n\n    return _results;\n  };\n\n  if (Caman.autoload) {\n    (function () {\n      if (document.readyState === \"complete\") {\n        return Caman.DOMUpdated();\n      } else {\n        return document.addEventListener(\"DOMContentLoaded\", Caman.DOMUpdated, false);\n      }\n    })();\n  }\n\n  CamanParser = function () {\n    var INST_REGEX;\n    INST_REGEX = \"(\\\\w+)\\\\((.*?)\\\\)\";\n\n    function CamanParser(ele, ready) {\n      this.dataStr = ele.getAttribute('data-caman');\n      this.caman = Caman(ele, ready.bind(this));\n    }\n\n    CamanParser.prototype.parse = function () {\n      var args, e, filter, func, inst, instFunc, m, r, unparsedInstructions, _i, _len, _ref, _results;\n\n      this.ele = this.caman.canvas;\n      r = new RegExp(INST_REGEX, 'g');\n      unparsedInstructions = this.dataStr.match(r);\n\n      if (!(unparsedInstructions.length > 0)) {\n        return;\n      }\n\n      r = new RegExp(INST_REGEX);\n      _results = [];\n\n      for (_i = 0, _len = unparsedInstructions.length; _i < _len; _i++) {\n        inst = unparsedInstructions[_i];\n        _ref = inst.match(r), m = _ref[0], filter = _ref[1], args = _ref[2];\n        instFunc = new Function(\"return function() {        this.\" + filter + \"(\" + args + \");      };\");\n\n        try {\n          func = instFunc();\n\n          _results.push(func.call(this.caman));\n        } catch (_error) {\n          e = _error;\n\n          _results.push(Log.debug(e));\n        }\n      }\n\n      return _results;\n    };\n\n    CamanParser.prototype.execute = function () {\n      var ele;\n      ele = this.ele;\n      return this.caman.render(function () {\n        return ele.parentNode.replaceChild(this.toImage(), ele);\n      });\n    };\n\n    return CamanParser;\n  }();\n\n  Caman.Blender = function () {\n    function Blender() {}\n\n    Blender.blenders = {};\n\n    Blender.register = function (name, func) {\n      return this.blenders[name] = func;\n    };\n\n    Blender.execute = function (name, rgbaLayer, rgbaParent) {\n      return this.blenders[name](rgbaLayer, rgbaParent);\n    };\n\n    return Blender;\n  }();\n\n  Blender = Caman.Blender;\n\n  Caman.Calculate = function () {\n    function Calculate() {}\n\n    Calculate.distance = function (x1, y1, x2, y2) {\n      return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    };\n\n    Calculate.randomRange = function (min, max, getFloat) {\n      var rand;\n\n      if (getFloat == null) {\n        getFloat = false;\n      }\n\n      rand = min + Math.random() * (max - min);\n\n      if (getFloat) {\n        return rand.toFixed(getFloat);\n      } else {\n        return Math.round(rand);\n      }\n    };\n\n    Calculate.luminance = function (rgba) {\n      return 0.299 * rgba.r + 0.587 * rgba.g + 0.114 * rgba.b;\n    };\n\n    Calculate.bezier = function (start, ctrl1, ctrl2, end, lowBound, highBound) {\n      var Ax, Ay, Bx, By, Cx, Cy, bezier, curveX, curveY, i, j, leftCoord, rightCoord, t, x0, x1, x2, x3, y0, y1, y2, y3, _i, _j, _k, _ref, _ref1;\n\n      x0 = start[0];\n      y0 = start[1];\n      x1 = ctrl1[0];\n      y1 = ctrl1[1];\n      x2 = ctrl2[0];\n      y2 = ctrl2[1];\n      x3 = end[0];\n      y3 = end[1];\n      bezier = {};\n      Cx = parseInt(3 * (x1 - x0), 10);\n      Bx = 3 * (x2 - x1) - Cx;\n      Ax = x3 - x0 - Cx - Bx;\n      Cy = 3 * (y1 - y0);\n      By = 3 * (y2 - y1) - Cy;\n      Ay = y3 - y0 - Cy - By;\n\n      for (i = _i = 0; _i < 1000; i = ++_i) {\n        t = i / 1000;\n        curveX = Math.round(Ax * Math.pow(t, 3) + Bx * Math.pow(t, 2) + Cx * t + x0);\n        curveY = Math.round(Ay * Math.pow(t, 3) + By * Math.pow(t, 2) + Cy * t + y0);\n\n        if (lowBound && curveY < lowBound) {\n          curveY = lowBound;\n        } else if (highBound && curveY > highBound) {\n          curveY = highBound;\n        }\n\n        bezier[curveX] = curveY;\n      }\n\n      if (bezier.length < end[0] + 1) {\n        for (i = _j = 0, _ref = end[0]; 0 <= _ref ? _j <= _ref : _j >= _ref; i = 0 <= _ref ? ++_j : --_j) {\n          if (bezier[i] == null) {\n            leftCoord = [i - 1, bezier[i - 1]];\n\n            for (j = _k = i, _ref1 = end[0]; i <= _ref1 ? _k <= _ref1 : _k >= _ref1; j = i <= _ref1 ? ++_k : --_k) {\n              if (bezier[j] != null) {\n                rightCoord = [j, bezier[j]];\n                break;\n              }\n            }\n\n            bezier[i] = leftCoord[1] + (rightCoord[1] - leftCoord[1]) / (rightCoord[0] - leftCoord[0]) * (i - leftCoord[0]);\n          }\n        }\n      }\n\n      if (bezier[end[0]] == null) {\n        bezier[end[0]] = bezier[end[0] - 1];\n      }\n\n      return bezier;\n    };\n\n    return Calculate;\n  }();\n\n  Calculate = Caman.Calculate;\n\n  Caman.Convert = function () {\n    function Convert() {}\n\n    Convert.hexToRGB = function (hex) {\n      var b, g, r;\n\n      if (hex.charAt(0) === \"#\") {\n        hex = hex.substr(1);\n      }\n\n      r = parseInt(hex.substr(0, 2), 16);\n      g = parseInt(hex.substr(2, 2), 16);\n      b = parseInt(hex.substr(4, 2), 16);\n      return {\n        r: r,\n        g: g,\n        b: b\n      };\n    };\n\n    Convert.rgbToHSL = function (r, g, b) {\n      var d, h, l, max, min, s;\n\n      if (typeof r === \"object\") {\n        g = r.g;\n        b = r.b;\n        r = r.r;\n      }\n\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      max = Math.max(r, g, b);\n      min = Math.min(r, g, b);\n      l = (max + min) / 2;\n\n      if (max === min) {\n        h = s = 0;\n      } else {\n        d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n        h = function () {\n          switch (max) {\n            case r:\n              return (g - b) / d + (g < b ? 6 : 0);\n\n            case g:\n              return (b - r) / d + 2;\n\n            case b:\n              return (r - g) / d + 4;\n          }\n        }();\n\n        h /= 6;\n      }\n\n      return {\n        h: h,\n        s: s,\n        l: l\n      };\n    };\n\n    Convert.hslToRGB = function (h, s, l) {\n      var b, g, p, q, r;\n\n      if (typeof h === \"object\") {\n        s = h.s;\n        l = h.l;\n        h = h.h;\n      }\n\n      if (s === 0) {\n        r = g = b = l;\n      } else {\n        q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        p = 2 * l - q;\n        r = this.hueToRGB(p, q, h + 1 / 3);\n        g = this.hueToRGB(p, q, h);\n        b = this.hueToRGB(p, q, h - 1 / 3);\n      }\n\n      return {\n        r: r * 255,\n        g: g * 255,\n        b: b * 255\n      };\n    };\n\n    Convert.hueToRGB = function (p, q, t) {\n      if (t < 0) {\n        t += 1;\n      }\n\n      if (t > 1) {\n        t -= 1;\n      }\n\n      if (t < 1 / 6) {\n        return p + (q - p) * 6 * t;\n      }\n\n      if (t < 1 / 2) {\n        return q;\n      }\n\n      if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n      }\n\n      return p;\n    };\n\n    Convert.rgbToHSV = function (r, g, b) {\n      var d, h, max, min, s, v;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      max = Math.max(r, g, b);\n      min = Math.min(r, g, b);\n      v = max;\n      d = max - min;\n      s = max === 0 ? 0 : d / max;\n\n      if (max === min) {\n        h = 0;\n      } else {\n        h = function () {\n          switch (max) {\n            case r:\n              return (g - b) / d + (g < b ? 6 : 0);\n\n            case g:\n              return (b - r) / d + 2;\n\n            case b:\n              return (r - g) / d + 4;\n          }\n        }();\n\n        h /= 6;\n      }\n\n      return {\n        h: h,\n        s: s,\n        v: v\n      };\n    };\n\n    Convert.hsvToRGB = function (h, s, v) {\n      var b, f, g, i, p, q, r, t;\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n\n      switch (i % 6) {\n        case 0:\n          r = v;\n          g = t;\n          b = p;\n          break;\n\n        case 1:\n          r = q;\n          g = v;\n          b = p;\n          break;\n\n        case 2:\n          r = p;\n          g = v;\n          b = t;\n          break;\n\n        case 3:\n          r = p;\n          g = q;\n          b = v;\n          break;\n\n        case 4:\n          r = t;\n          g = p;\n          b = v;\n          break;\n\n        case 5:\n          r = v;\n          g = p;\n          b = q;\n      }\n\n      return {\n        r: Math.floor(r * 255),\n        g: Math.floor(g * 255),\n        b: Math.floor(b * 255)\n      };\n    };\n\n    Convert.rgbToXYZ = function (r, g, b) {\n      var x, y, z;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n\n      if (r > 0.04045) {\n        r = Math.pow((r + 0.055) / 1.055, 2.4);\n      } else {\n        r /= 12.92;\n      }\n\n      if (g > 0.04045) {\n        g = Math.pow((g + 0.055) / 1.055, 2.4);\n      } else {\n        g /= 12.92;\n      }\n\n      if (b > 0.04045) {\n        b = Math.pow((b + 0.055) / 1.055, 2.4);\n      } else {\n        b /= 12.92;\n      }\n\n      x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n      y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n      z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n      return {\n        x: x * 100,\n        y: y * 100,\n        z: z * 100\n      };\n    };\n\n    Convert.xyzToRGB = function (x, y, z) {\n      var b, g, r;\n      x /= 100;\n      y /= 100;\n      z /= 100;\n      r = 3.2406 * x + -1.5372 * y + -0.4986 * z;\n      g = -0.9689 * x + 1.8758 * y + 0.0415 * z;\n      b = 0.0557 * x + -0.2040 * y + 1.0570 * z;\n\n      if (r > 0.0031308) {\n        r = 1.055 * Math.pow(r, 0.4166666667) - 0.055;\n      } else {\n        r *= 12.92;\n      }\n\n      if (g > 0.0031308) {\n        g = 1.055 * Math.pow(g, 0.4166666667) - 0.055;\n      } else {\n        g *= 12.92;\n      }\n\n      if (b > 0.0031308) {\n        b = 1.055 * Math.pow(b, 0.4166666667) - 0.055;\n      } else {\n        b *= 12.92;\n      }\n\n      return {\n        r: r * 255,\n        g: g * 255,\n        b: b * 255\n      };\n    };\n\n    Convert.xyzToLab = function (x, y, z) {\n      var a, b, l, whiteX, whiteY, whiteZ;\n\n      if (typeof x === \"object\") {\n        y = x.y;\n        z = x.z;\n        x = x.x;\n      }\n\n      whiteX = 95.047;\n      whiteY = 100.0;\n      whiteZ = 108.883;\n      x /= whiteX;\n      y /= whiteY;\n      z /= whiteZ;\n\n      if (x > 0.008856451679) {\n        x = Math.pow(x, 0.3333333333);\n      } else {\n        x = 7.787037037 * x + 0.1379310345;\n      }\n\n      if (y > 0.008856451679) {\n        y = Math.pow(y, 0.3333333333);\n      } else {\n        y = 7.787037037 * y + 0.1379310345;\n      }\n\n      if (z > 0.008856451679) {\n        z = Math.pow(z, 0.3333333333);\n      } else {\n        z = 7.787037037 * z + 0.1379310345;\n      }\n\n      l = 116 * y - 16;\n      a = 500 * (x - y);\n      b = 200 * (y - z);\n      return {\n        l: l,\n        a: a,\n        b: b\n      };\n    };\n\n    Convert.labToXYZ = function (l, a, b) {\n      var x, y, z;\n\n      if (typeof l === \"object\") {\n        a = l.a;\n        b = l.b;\n        l = l.l;\n      }\n\n      y = (l + 16) / 116;\n      x = y + a / 500;\n      z = y - b / 200;\n\n      if (x > 0.2068965517) {\n        x = x * x * x;\n      } else {\n        x = 0.1284185493 * (x - 0.1379310345);\n      }\n\n      if (y > 0.2068965517) {\n        y = y * y * y;\n      } else {\n        y = 0.1284185493 * (y - 0.1379310345);\n      }\n\n      if (z > 0.2068965517) {\n        z = z * z * z;\n      } else {\n        z = 0.1284185493 * (z - 0.1379310345);\n      }\n\n      return {\n        x: x * 95.047,\n        y: y * 100.0,\n        z: z * 108.883\n      };\n    };\n\n    Convert.rgbToLab = function (r, g, b) {\n      var xyz;\n\n      if (typeof r === \"object\") {\n        g = r.g;\n        b = r.b;\n        r = r.r;\n      }\n\n      xyz = this.rgbToXYZ(r, g, b);\n      return this.xyzToLab(xyz);\n    };\n\n    Convert.labToRGB = function (l, a, b) {};\n\n    return Convert;\n  }();\n\n  Convert = Caman.Convert;\n\n  Caman.Event = function () {\n    function Event() {}\n\n    Event.events = {};\n    Event.types = [\"processStart\", \"processComplete\", \"renderStart\", \"renderFinished\", \"blockStarted\", \"blockFinished\"];\n\n    Event.trigger = function (target, type, data) {\n      var event, _i, _len, _ref, _results;\n\n      if (data == null) {\n        data = null;\n      }\n\n      if (this.events[type] && this.events[type].length) {\n        _ref = this.events[type];\n        _results = [];\n\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          event = _ref[_i];\n\n          if (event.target === null || target.id === event.target.id) {\n            _results.push(event.fn.call(target, data));\n          } else {\n            _results.push(void 0);\n          }\n        }\n\n        return _results;\n      }\n    };\n\n    Event.listen = function (target, type, fn) {\n      var _fn, _type;\n\n      if (typeof target === \"string\") {\n        _type = target;\n        _fn = type;\n        target = null;\n        type = _type;\n        fn = _fn;\n      }\n\n      if (__indexOf.call(this.types, type) < 0) {\n        return false;\n      }\n\n      if (!this.events[type]) {\n        this.events[type] = [];\n      }\n\n      this.events[type].push({\n        target: target,\n        fn: fn\n      });\n      return true;\n    };\n\n    return Event;\n  }();\n\n  Event = Caman.Event;\n\n  Caman.Filter = function () {\n    function Filter() {}\n\n    Filter.Type = {\n      Single: 1,\n      Kernel: 2,\n      LayerDequeue: 3,\n      LayerFinished: 4,\n      LoadOverlay: 5,\n      Plugin: 6\n    };\n\n    Filter.register = function (name, filterFunc) {\n      return Caman.prototype[name] = filterFunc;\n    };\n\n    return Filter;\n  }();\n\n  Filter = Caman.Filter;\n\n  Caman.IO = function () {\n    function IO() {}\n\n    IO.domainRegex = /(?:(?:http|https):\\/\\/)((?:\\w+)\\.(?:(?:\\w|\\.)+))/;\n\n    IO.isRemote = function (img) {\n      if (img == null) {\n        return false;\n      }\n\n      if (this.corsEnabled(img)) {\n        return false;\n      }\n\n      return this.isURLRemote(img.src);\n    };\n\n    IO.corsEnabled = function (img) {\n      var _ref;\n\n      return img.crossOrigin != null && ((_ref = img.crossOrigin.toLowerCase()) === 'anonymous' || _ref === 'use-credentials');\n    };\n\n    IO.isURLRemote = function (url) {\n      var matches;\n      matches = url.match(this.domainRegex);\n\n      if (matches) {\n        return matches[1] !== document.domain;\n      } else {\n        return false;\n      }\n    };\n\n    IO.remoteCheck = function (src) {\n      if (this.isURLRemote(src)) {\n        if (!Caman.remoteProxy.length) {\n          Log.info(\"Attempting to load a remote image without a configured proxy. URL: \" + src);\n        } else {\n          if (Caman.isURLRemote(Caman.remoteProxy)) {\n            Log.info(\"Cannot use a remote proxy for loading images.\");\n            return;\n          }\n\n          return this.proxyUrl(src);\n        }\n      }\n    };\n\n    IO.proxyUrl = function (src) {\n      return \"\" + Caman.remoteProxy + \"?\" + Caman.proxyParam + \"=\" + encodeURIComponent(src);\n    };\n\n    IO.useProxy = function (lang) {\n      var langToExt;\n      langToExt = {\n        ruby: 'rb',\n        python: 'py',\n        perl: 'pl',\n        javascript: 'js'\n      };\n      lang = lang.toLowerCase();\n\n      if (langToExt[lang] != null) {\n        lang = langToExt[lang];\n      }\n\n      return \"proxies/caman_proxy.\" + lang;\n    };\n\n    return IO;\n  }();\n\n  Caman.prototype.save = function () {\n    if (typeof exports !== \"undefined\" && exports !== null) {\n      return this.nodeSave.apply(this, arguments);\n    } else {\n      return this.browserSave.apply(this, arguments);\n    }\n  };\n\n  Caman.prototype.browserSave = function (type) {\n    var image;\n\n    if (type == null) {\n      type = \"png\";\n    }\n\n    type = type.toLowerCase();\n    image = this.toBase64(type).replace(\"image/\" + type, \"image/octet-stream\");\n    return document.location.href = image;\n  };\n\n  Caman.prototype.nodeSave = function (file, overwrite) {\n    var e, stats;\n\n    if (overwrite == null) {\n      overwrite = true;\n    }\n\n    try {\n      stats = fs.statSync(file);\n\n      if (stats.isFile() && !overwrite) {\n        return false;\n      }\n    } catch (_error) {\n      e = _error;\n      Log.debug(\"Creating output file \" + file);\n    }\n\n    return fs.writeFile(file, this.canvas.toBuffer(), function () {\n      return Log.debug(\"Finished writing to \" + file);\n    });\n  };\n\n  Caman.prototype.toImage = function (type) {\n    var img;\n    img = document.createElement('img');\n    img.src = this.toBase64(type);\n    img.width = this.dimensions.width;\n    img.height = this.dimensions.height;\n\n    if (window.devicePixelRatio) {\n      img.width /= window.devicePixelRatio;\n      img.height /= window.devicePixelRatio;\n    }\n\n    return img;\n  };\n\n  Caman.prototype.toBase64 = function (type) {\n    if (type == null) {\n      type = \"png\";\n    }\n\n    type = type.toLowerCase();\n    return this.canvas.toDataURL(\"image/\" + type);\n  };\n\n  IO = Caman.IO;\n\n  Caman.Layer = function () {\n    function Layer(c) {\n      this.c = c;\n      this.filter = this.c;\n      this.options = {\n        blendingMode: 'normal',\n        opacity: 1.0\n      };\n      this.layerID = Util.uniqid.get();\n      this.canvas = typeof exports !== \"undefined\" && exports !== null ? new Canvas() : document.createElement('canvas');\n      this.canvas.width = this.c.dimensions.width;\n      this.canvas.height = this.c.dimensions.height;\n      this.context = this.canvas.getContext('2d');\n      this.context.createImageData(this.canvas.width, this.canvas.height);\n      this.imageData = this.context.getImageData(0, 0, this.canvas.width, this.canvas.height);\n      this.pixelData = this.imageData.data;\n    }\n\n    Layer.prototype.newLayer = function (cb) {\n      return this.c.newLayer.call(this.c, cb);\n    };\n\n    Layer.prototype.setBlendingMode = function (mode) {\n      this.options.blendingMode = mode;\n      return this;\n    };\n\n    Layer.prototype.opacity = function (opacity) {\n      this.options.opacity = opacity / 100;\n      return this;\n    };\n\n    Layer.prototype.copyParent = function () {\n      var i, parentData, _i, _ref;\n\n      parentData = this.c.pixelData;\n\n      for (i = _i = 0, _ref = this.c.pixelData.length; _i < _ref; i = _i += 4) {\n        this.pixelData[i] = parentData[i];\n        this.pixelData[i + 1] = parentData[i + 1];\n        this.pixelData[i + 2] = parentData[i + 2];\n        this.pixelData[i + 3] = parentData[i + 3];\n      }\n\n      return this;\n    };\n\n    Layer.prototype.fillColor = function () {\n      return this.c.fillColor.apply(this.c, arguments);\n    };\n\n    Layer.prototype.overlayImage = function (image) {\n      if (typeof image === \"object\") {\n        image = image.src;\n      } else if (typeof image === \"string\" && image[0] === \"#\") {\n        image = $(image).src;\n      }\n\n      if (!image) {\n        return this;\n      }\n\n      this.c.renderer.renderQueue.push({\n        type: Filter.Type.LoadOverlay,\n        src: image,\n        layer: this\n      });\n      return this;\n    };\n\n    Layer.prototype.applyToParent = function () {\n      var i, layerData, parentData, result, rgbaLayer, rgbaParent, _i, _ref, _results;\n\n      parentData = this.c.pixelStack[this.c.pixelStack.length - 1];\n      layerData = this.c.pixelData;\n      _results = [];\n\n      for (i = _i = 0, _ref = layerData.length; _i < _ref; i = _i += 4) {\n        rgbaParent = {\n          r: parentData[i],\n          g: parentData[i + 1],\n          b: parentData[i + 2],\n          a: parentData[i + 3]\n        };\n        rgbaLayer = {\n          r: layerData[i],\n          g: layerData[i + 1],\n          b: layerData[i + 2],\n          a: layerData[i + 3]\n        };\n        result = Blender.execute(this.options.blendingMode, rgbaLayer, rgbaParent);\n        result.r = Util.clampRGB(result.r);\n        result.g = Util.clampRGB(result.g);\n        result.b = Util.clampRGB(result.b);\n\n        if (result.a == null) {\n          result.a = rgbaLayer.a;\n        }\n\n        parentData[i] = rgbaParent.r - (rgbaParent.r - result.r) * (this.options.opacity * (result.a / 255));\n        parentData[i + 1] = rgbaParent.g - (rgbaParent.g - result.g) * (this.options.opacity * (result.a / 255));\n\n        _results.push(parentData[i + 2] = rgbaParent.b - (rgbaParent.b - result.b) * (this.options.opacity * (result.a / 255)));\n      }\n\n      return _results;\n    };\n\n    return Layer;\n  }();\n\n  Layer = Caman.Layer;\n\n  Caman.Logger = function () {\n    function Logger() {\n      var name, _i, _len, _ref;\n\n      _ref = ['log', 'info', 'warn', 'error'];\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        name = _ref[_i];\n\n        this[name] = function (name) {\n          return function () {\n            var args, e;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n\n            if (!Caman.DEBUG) {\n              return;\n            }\n\n            try {\n              return console[name].apply(console, args);\n            } catch (_error) {\n              e = _error;\n              return console[name](args);\n            }\n          };\n        }(name);\n      }\n\n      this.debug = this.log;\n    }\n\n    return Logger;\n  }();\n\n  Log = new Caman.Logger();\n\n  Caman.Pixel = function () {\n    Pixel.coordinatesToLocation = function (x, y, width) {\n      return (y * width + x) * 4;\n    };\n\n    Pixel.locationToCoordinates = function (loc, width) {\n      var x, y;\n      y = Math.floor(loc / (width * 4));\n      x = loc % (width * 4) / 4;\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    function Pixel(r, g, b, a, c) {\n      this.r = r != null ? r : 0;\n      this.g = g != null ? g : 0;\n      this.b = b != null ? b : 0;\n      this.a = a != null ? a : 255;\n      this.c = c != null ? c : null;\n      this.loc = 0;\n    }\n\n    Pixel.prototype.setContext = function (c) {\n      return this.c = c;\n    };\n\n    Pixel.prototype.locationXY = function () {\n      var x, y;\n\n      if (this.c == null) {\n        throw \"Requires a CamanJS context\";\n      }\n\n      y = this.c.dimensions.height - Math.floor(this.loc / (this.c.dimensions.width * 4));\n      x = this.loc % (this.c.dimensions.width * 4) / 4;\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    Pixel.prototype.pixelAtLocation = function (loc) {\n      if (this.c == null) {\n        throw \"Requires a CamanJS context\";\n      }\n\n      return new Pixel(this.c.pixelData[loc], this.c.pixelData[loc + 1], this.c.pixelData[loc + 2], this.c.pixelData[loc + 3], this.c);\n    };\n\n    Pixel.prototype.getPixelRelative = function (horiz, vert) {\n      var newLoc;\n\n      if (this.c == null) {\n        throw \"Requires a CamanJS context\";\n      }\n\n      newLoc = this.loc + this.c.dimensions.width * 4 * (vert * -1) + 4 * horiz;\n\n      if (newLoc > this.c.pixelData.length || newLoc < 0) {\n        return new Pixel(0, 0, 0, 255, this.c);\n      }\n\n      return this.pixelAtLocation(newLoc);\n    };\n\n    Pixel.prototype.putPixelRelative = function (horiz, vert, rgba) {\n      var nowLoc;\n\n      if (this.c == null) {\n        throw \"Requires a CamanJS context\";\n      }\n\n      nowLoc = this.loc + this.c.dimensions.width * 4 * (vert * -1) + 4 * horiz;\n\n      if (newLoc > this.c.pixelData.length || newLoc < 0) {\n        return;\n      }\n\n      this.c.pixelData[newLoc] = rgba.r;\n      this.c.pixelData[newLoc + 1] = rgba.g;\n      this.c.pixelData[newLoc + 2] = rgba.b;\n      this.c.pixelData[newLoc + 3] = rgba.a;\n      return true;\n    };\n\n    Pixel.prototype.getPixel = function (x, y) {\n      var loc;\n\n      if (this.c == null) {\n        throw \"Requires a CamanJS context\";\n      }\n\n      loc = this.coordinatesToLocation(x, y, this.width);\n      return this.pixelAtLocation(loc);\n    };\n\n    Pixel.prototype.putPixel = function (x, y, rgba) {\n      var loc;\n\n      if (this.c == null) {\n        throw \"Requires a CamanJS context\";\n      }\n\n      loc = this.coordinatesToLocation(x, y, this.width);\n      this.c.pixelData[loc] = rgba.r;\n      this.c.pixelData[loc + 1] = rgba.g;\n      this.c.pixelData[loc + 2] = rgba.b;\n      return this.c.pixelData[loc + 3] = rgba.a;\n    };\n\n    Pixel.prototype.toString = function () {\n      return this.toKey();\n    };\n\n    Pixel.prototype.toHex = function (includeAlpha) {\n      var hex;\n\n      if (includeAlpha == null) {\n        includeAlpha = false;\n      }\n\n      hex = '#' + this.r.toString(16) + this.g.toString(16) + this.b.toString(16);\n\n      if (includeAlpha) {\n        return hex + this.a.toString(16);\n      } else {\n        return hex;\n      }\n    };\n\n    return Pixel;\n  }();\n\n  Pixel = Caman.Pixel;\n\n  Caman.Plugin = function () {\n    function Plugin() {}\n\n    Plugin.plugins = {};\n\n    Plugin.register = function (name, plugin) {\n      return this.plugins[name] = plugin;\n    };\n\n    Plugin.execute = function (context, name, args) {\n      return this.plugins[name].apply(context, args);\n    };\n\n    return Plugin;\n  }();\n\n  Plugin = Caman.Plugin;\n\n  Caman.Renderer = function () {\n    Renderer.Blocks = Caman.NodeJS ? require('os').cpus().length : 4;\n\n    function Renderer(c) {\n      this.c = c;\n      this.processNext = __bind(this.processNext, this);\n      this.renderQueue = [];\n      this.modPixelData = null;\n    }\n\n    Renderer.prototype.add = function (job) {\n      if (job == null) {\n        return;\n      }\n\n      return this.renderQueue.push(job);\n    };\n\n    Renderer.prototype.processNext = function () {\n      var layer;\n\n      if (this.renderQueue.length === 0) {\n        Event.trigger(this, \"renderFinished\");\n\n        if (this.finishedFn != null) {\n          this.finishedFn.call(this.c);\n        }\n\n        return this;\n      }\n\n      this.currentJob = this.renderQueue.shift();\n\n      switch (this.currentJob.type) {\n        case Filter.Type.LayerDequeue:\n          layer = this.c.canvasQueue.shift();\n          this.c.executeLayer(layer);\n          return this.processNext();\n\n        case Filter.Type.LayerFinished:\n          this.c.applyCurrentLayer();\n          this.c.popContext();\n          return this.processNext();\n\n        case Filter.Type.LoadOverlay:\n          return this.loadOverlay(this.currentJob.layer, this.currentJob.src);\n\n        case Filter.Type.Plugin:\n          return this.executePlugin();\n\n        default:\n          return this.executeFilter();\n      }\n    };\n\n    Renderer.prototype.execute = function (callback) {\n      this.finishedFn = callback;\n      this.modPixelData = Util.dataArray(this.c.pixelData.length);\n      return this.processNext();\n    };\n\n    Renderer.prototype.eachBlock = function (fn) {\n      var blockN,\n          blockPixelLength,\n          bnum,\n          end,\n          f,\n          i,\n          lastBlockN,\n          n,\n          start,\n          _i,\n          _ref,\n          _results,\n          _this = this;\n\n      this.blocksDone = 0;\n      n = this.c.pixelData.length;\n      blockPixelLength = Math.floor(n / 4 / Renderer.Blocks);\n      blockN = blockPixelLength * 4;\n      lastBlockN = blockN + n / 4 % Renderer.Blocks * 4;\n      _results = [];\n\n      for (i = _i = 0, _ref = Renderer.Blocks; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        start = i * blockN;\n        end = start + (i === Renderer.Blocks - 1 ? lastBlockN : blockN);\n\n        if (Caman.NodeJS) {\n          f = Fiber(function () {\n            return fn.call(_this, i, start, end);\n          });\n          bnum = f.run();\n\n          _results.push(this.blockFinished(bnum));\n        } else {\n          _results.push(setTimeout(function (i, start, end) {\n            return function () {\n              return fn.call(_this, i, start, end);\n            };\n          }(i, start, end), 0));\n        }\n      }\n\n      return _results;\n    };\n\n    Renderer.prototype.executeFilter = function () {\n      Event.trigger(this.c, \"processStart\", this.currentJob);\n\n      if (this.currentJob.type === Filter.Type.Single) {\n        return this.eachBlock(this.renderBlock);\n      } else {\n        return this.eachBlock(this.renderKernel);\n      }\n    };\n\n    Renderer.prototype.executePlugin = function () {\n      Log.debug(\"Executing plugin \" + this.currentJob.plugin);\n      Plugin.execute(this.c, this.currentJob.plugin, this.currentJob.args);\n      Log.debug(\"Plugin \" + this.currentJob.plugin + \" finished!\");\n      return this.processNext();\n    };\n\n    Renderer.prototype.renderBlock = function (bnum, start, end) {\n      var i, pixel, _i;\n\n      Log.debug(\"Block #\" + bnum + \" - Filter: \" + this.currentJob.name + \", Start: \" + start + \", End: \" + end);\n      Event.trigger(this.c, \"blockStarted\", {\n        blockNum: bnum,\n        totalBlocks: Renderer.Blocks,\n        startPixel: start,\n        endPixel: end\n      });\n      pixel = new Pixel();\n      pixel.setContext(this.c);\n\n      for (i = _i = start; _i < end; i = _i += 4) {\n        pixel.loc = i;\n        pixel.r = this.c.pixelData[i];\n        pixel.g = this.c.pixelData[i + 1];\n        pixel.b = this.c.pixelData[i + 2];\n        pixel.a = this.c.pixelData[i + 3];\n        this.currentJob.processFn(pixel);\n        this.c.pixelData[i] = Util.clampRGB(pixel.r);\n        this.c.pixelData[i + 1] = Util.clampRGB(pixel.g);\n        this.c.pixelData[i + 2] = Util.clampRGB(pixel.b);\n        this.c.pixelData[i + 3] = Util.clampRGB(pixel.a);\n      }\n\n      if (Caman.NodeJS) {\n        return Fiber[\"yield\"](bnum);\n      } else {\n        return this.blockFinished(bnum);\n      }\n    };\n\n    Renderer.prototype.renderKernel = function (bnum, start, end) {\n      var adjust, adjustSize, bias, builder, builderIndex, divisor, i, j, k, kernel, n, name, p, pixel, res, _i, _j, _k;\n\n      name = this.currentJob.name;\n      bias = this.currentJob.bias;\n      divisor = this.currentJob.divisor;\n      n = this.c.pixelData.length;\n      adjust = this.currentJob.adjust;\n      adjustSize = Math.sqrt(adjust.length);\n      kernel = [];\n      Log.debug(\"Rendering kernel - Filter: \" + this.currentJob.name);\n      start = Math.max(start, this.c.dimensions.width * 4 * ((adjustSize - 1) / 2));\n      end = Math.min(end, n - this.c.dimensions.width * 4 * ((adjustSize - 1) / 2));\n      builder = (adjustSize - 1) / 2;\n      pixel = new Pixel();\n      pixel.setContext(this.c);\n\n      for (i = _i = start; _i < end; i = _i += 4) {\n        pixel.loc = i;\n        builderIndex = 0;\n\n        for (j = _j = -builder; -builder <= builder ? _j <= builder : _j >= builder; j = -builder <= builder ? ++_j : --_j) {\n          for (k = _k = builder; builder <= -builder ? _k <= -builder : _k >= -builder; k = builder <= -builder ? ++_k : --_k) {\n            p = pixel.getPixelRelative(j, k);\n            kernel[builderIndex * 3] = p.r;\n            kernel[builderIndex * 3 + 1] = p.g;\n            kernel[builderIndex * 3 + 2] = p.b;\n            builderIndex++;\n          }\n        }\n\n        res = this.processKernel(adjust, kernel, divisor, bias);\n        this.modPixelData[i] = Util.clampRGB(res.r);\n        this.modPixelData[i + 1] = Util.clampRGB(res.g);\n        this.modPixelData[i + 2] = Util.clampRGB(res.b);\n        this.modPixelData[i + 3] = this.c.pixelData[i + 3];\n      }\n\n      if (Caman.NodeJS) {\n        return Fiber[\"yield\"](bnum);\n      } else {\n        return this.blockFinished(bnum);\n      }\n    };\n\n    Renderer.prototype.blockFinished = function (bnum) {\n      var i, _i, _ref;\n\n      if (bnum >= 0) {\n        Log.debug(\"Block #\" + bnum + \" finished! Filter: \" + this.currentJob.name);\n      }\n\n      this.blocksDone++;\n      Event.trigger(this.c, \"blockFinished\", {\n        blockNum: bnum,\n        blocksFinished: this.blocksDone,\n        totalBlocks: Renderer.Blocks\n      });\n\n      if (this.blocksDone === Renderer.Blocks) {\n        if (this.currentJob.type === Filter.Type.Kernel) {\n          for (i = _i = 0, _ref = this.c.pixelData.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            this.c.pixelData[i] = this.modPixelData[i];\n          }\n        }\n\n        if (bnum >= 0) {\n          Log.debug(\"Filter \" + this.currentJob.name + \" finished!\");\n        }\n\n        Event.trigger(this.c, \"processComplete\", this.currentJob);\n        return this.processNext();\n      }\n    };\n\n    Renderer.prototype.processKernel = function (adjust, kernel, divisor, bias) {\n      var i, val, _i, _ref;\n\n      val = {\n        r: 0,\n        g: 0,\n        b: 0\n      };\n\n      for (i = _i = 0, _ref = adjust.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        val.r += adjust[i] * kernel[i * 3];\n        val.g += adjust[i] * kernel[i * 3 + 1];\n        val.b += adjust[i] * kernel[i * 3 + 2];\n      }\n\n      val.r = val.r / divisor + bias;\n      val.g = val.g / divisor + bias;\n      val.b = val.b / divisor + bias;\n      return val;\n    };\n\n    Renderer.prototype.loadOverlay = function (layer, src) {\n      var img,\n          proxyUrl,\n          _this = this;\n\n      img = document.createElement('img');\n\n      img.onload = function () {\n        layer.context.drawImage(img, 0, 0, _this.c.dimensions.width, _this.c.dimensions.height);\n        layer.imageData = layer.context.getImageData(0, 0, _this.c.dimensions.width, _this.c.dimensions.height);\n        layer.pixelData = layer.imageData.data;\n        _this.c.pixelData = layer.pixelData;\n        return _this.processNext();\n      };\n\n      proxyUrl = IO.remoteCheck(src);\n      return img.src = proxyUrl != null ? proxyUrl : src;\n    };\n\n    return Renderer;\n  }();\n\n  Renderer = Caman.Renderer;\n\n  Caman.Store = function () {\n    function Store() {}\n\n    Store.items = {};\n\n    Store.has = function (search) {\n      return this.items[search] != null;\n    };\n\n    Store.get = function (search) {\n      return this.items[search];\n    };\n\n    Store.put = function (name, obj) {\n      return this.items[name] = obj;\n    };\n\n    Store.execute = function (search, callback) {\n      var _this = this;\n\n      setTimeout(function () {\n        return callback.call(_this.get(search), _this.get(search));\n      }, 0);\n      return this.get(search);\n    };\n\n    Store.flush = function (name) {\n      if (name == null) {\n        name = false;\n      }\n\n      if (name) {\n        return delete this.items[name];\n      } else {\n        return this.items = {};\n      }\n    };\n\n    return Store;\n  }();\n\n  Store = Caman.Store;\n  Blender.register(\"normal\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: rgbaLayer.r,\n      g: rgbaLayer.g,\n      b: rgbaLayer.b\n    };\n  });\n  Blender.register(\"multiply\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: rgbaLayer.r * rgbaParent.r / 255,\n      g: rgbaLayer.g * rgbaParent.g / 255,\n      b: rgbaLayer.b * rgbaParent.b / 255\n    };\n  });\n  Blender.register(\"screen\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: 255 - (255 - rgbaLayer.r) * (255 - rgbaParent.r) / 255,\n      g: 255 - (255 - rgbaLayer.g) * (255 - rgbaParent.g) / 255,\n      b: 255 - (255 - rgbaLayer.b) * (255 - rgbaParent.b) / 255\n    };\n  });\n  Blender.register(\"overlay\", function (rgbaLayer, rgbaParent) {\n    var result;\n    result = {};\n    result.r = rgbaParent.r > 128 ? 255 - 2 * (255 - rgbaLayer.r) * (255 - rgbaParent.r) / 255 : rgbaParent.r * rgbaLayer.r * 2 / 255;\n    result.g = rgbaParent.g > 128 ? 255 - 2 * (255 - rgbaLayer.g) * (255 - rgbaParent.g) / 255 : rgbaParent.g * rgbaLayer.g * 2 / 255;\n    result.b = rgbaParent.b > 128 ? 255 - 2 * (255 - rgbaLayer.b) * (255 - rgbaParent.b) / 255 : rgbaParent.b * rgbaLayer.b * 2 / 255;\n    return result;\n  });\n  Blender.register(\"difference\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: rgbaLayer.r - rgbaParent.r,\n      g: rgbaLayer.g - rgbaParent.g,\n      b: rgbaLayer.b - rgbaParent.b\n    };\n  });\n  Blender.register(\"addition\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: rgbaParent.r + rgbaLayer.r,\n      g: rgbaParent.g + rgbaLayer.g,\n      b: rgbaParent.b + rgbaLayer.b\n    };\n  });\n  Blender.register(\"exclusion\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: 128 - 2 * (rgbaParent.r - 128) * (rgbaLayer.r - 128) / 255,\n      g: 128 - 2 * (rgbaParent.g - 128) * (rgbaLayer.g - 128) / 255,\n      b: 128 - 2 * (rgbaParent.b - 128) * (rgbaLayer.b - 128) / 255\n    };\n  });\n  Blender.register(\"softLight\", function (rgbaLayer, rgbaParent) {\n    var result;\n    result = {};\n    result.r = rgbaParent.r > 128 ? 255 - (255 - rgbaParent.r) * (255 - (rgbaLayer.r - 128)) / 255 : rgbaParent.r * (rgbaLayer.r + 128) / 255;\n    result.g = rgbaParent.g > 128 ? 255 - (255 - rgbaParent.g) * (255 - (rgbaLayer.g - 128)) / 255 : rgbaParent.g * (rgbaLayer.g + 128) / 255;\n    result.b = rgbaParent.b > 128 ? 255 - (255 - rgbaParent.b) * (255 - (rgbaLayer.b - 128)) / 255 : rgbaParent.b * (rgbaLayer.b + 128) / 255;\n    return result;\n  });\n  Blender.register(\"lighten\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: rgbaParent.r > rgbaLayer.r ? rgbaParent.r : rgbaLayer.r,\n      g: rgbaParent.g > rgbaLayer.g ? rgbaParent.g : rgbaLayer.g,\n      b: rgbaParent.b > rgbaLayer.b ? rgbaParent.b : rgbaLayer.b\n    };\n  });\n  Blender.register(\"darken\", function (rgbaLayer, rgbaParent) {\n    return {\n      r: rgbaParent.r > rgbaLayer.r ? rgbaLayer.r : rgbaParent.r,\n      g: rgbaParent.g > rgbaLayer.g ? rgbaLayer.g : rgbaParent.g,\n      b: rgbaParent.b > rgbaLayer.b ? rgbaLayer.b : rgbaParent.b\n    };\n  });\n  Filter.register(\"fillColor\", function () {\n    var color;\n\n    if (arguments.length === 1) {\n      color = Convert.hexToRGB(arguments[0]);\n    } else {\n      color = {\n        r: arguments[0],\n        g: arguments[1],\n        b: arguments[2]\n      };\n    }\n\n    return this.process(\"fillColor\", function (rgba) {\n      rgba.r = color.r;\n      rgba.g = color.g;\n      rgba.b = color.b;\n      rgba.a = 255;\n      return rgba;\n    });\n  });\n  Filter.register(\"brightness\", function (adjust) {\n    adjust = Math.floor(255 * (adjust / 100));\n    return this.process(\"brightness\", function (rgba) {\n      rgba.r += adjust;\n      rgba.g += adjust;\n      rgba.b += adjust;\n      return rgba;\n    });\n  });\n  Filter.register(\"saturation\", function (adjust) {\n    adjust *= -0.01;\n    return this.process(\"saturation\", function (rgba) {\n      var max;\n      max = Math.max(rgba.r, rgba.g, rgba.b);\n\n      if (rgba.r !== max) {\n        rgba.r += (max - rgba.r) * adjust;\n      }\n\n      if (rgba.g !== max) {\n        rgba.g += (max - rgba.g) * adjust;\n      }\n\n      if (rgba.b !== max) {\n        rgba.b += (max - rgba.b) * adjust;\n      }\n\n      return rgba;\n    });\n  });\n  Filter.register(\"vibrance\", function (adjust) {\n    adjust *= -1;\n    return this.process(\"vibrance\", function (rgba) {\n      var amt, avg, max;\n      max = Math.max(rgba.r, rgba.g, rgba.b);\n      avg = (rgba.r + rgba.g + rgba.b) / 3;\n      amt = Math.abs(max - avg) * 2 / 255 * adjust / 100;\n\n      if (rgba.r !== max) {\n        rgba.r += (max - rgba.r) * amt;\n      }\n\n      if (rgba.g !== max) {\n        rgba.g += (max - rgba.g) * amt;\n      }\n\n      if (rgba.b !== max) {\n        rgba.b += (max - rgba.b) * amt;\n      }\n\n      return rgba;\n    });\n  });\n  Filter.register(\"greyscale\", function (adjust) {\n    return this.process(\"greyscale\", function (rgba) {\n      var avg;\n      avg = Calculate.luminance(rgba);\n      rgba.r = avg;\n      rgba.g = avg;\n      rgba.b = avg;\n      return rgba;\n    });\n  });\n  Filter.register(\"contrast\", function (adjust) {\n    adjust = Math.pow((adjust + 100) / 100, 2);\n    return this.process(\"contrast\", function (rgba) {\n      rgba.r /= 255;\n      rgba.r -= 0.5;\n      rgba.r *= adjust;\n      rgba.r += 0.5;\n      rgba.r *= 255;\n      rgba.g /= 255;\n      rgba.g -= 0.5;\n      rgba.g *= adjust;\n      rgba.g += 0.5;\n      rgba.g *= 255;\n      rgba.b /= 255;\n      rgba.b -= 0.5;\n      rgba.b *= adjust;\n      rgba.b += 0.5;\n      rgba.b *= 255;\n      return rgba;\n    });\n  });\n  Filter.register(\"hue\", function (adjust) {\n    return this.process(\"hue\", function (rgba) {\n      var b, g, h, hsv, r, _ref;\n\n      hsv = Convert.rgbToHSV(rgba.r, rgba.g, rgba.b);\n      h = hsv.h * 100;\n      h += Math.abs(adjust);\n      h = h % 100;\n      h /= 100;\n      hsv.h = h;\n      _ref = Convert.hsvToRGB(hsv.h, hsv.s, hsv.v), r = _ref.r, g = _ref.g, b = _ref.b;\n      rgba.r = r;\n      rgba.g = g;\n      rgba.b = b;\n      return rgba;\n    });\n  });\n  Filter.register(\"colorize\", function () {\n    var level, rgb;\n\n    if (arguments.length === 2) {\n      rgb = Convert.hexToRGB(arguments[0]);\n      level = arguments[1];\n    } else if (arguments.length === 4) {\n      rgb = {\n        r: arguments[0],\n        g: arguments[1],\n        b: arguments[2]\n      };\n      level = arguments[3];\n    }\n\n    return this.process(\"colorize\", function (rgba) {\n      rgba.r -= (rgba.r - rgb.r) * (level / 100);\n      rgba.g -= (rgba.g - rgb.g) * (level / 100);\n      rgba.b -= (rgba.b - rgb.b) * (level / 100);\n      return rgba;\n    });\n  });\n  Filter.register(\"invert\", function () {\n    return this.process(\"invert\", function (rgba) {\n      rgba.r = 255 - rgba.r;\n      rgba.g = 255 - rgba.g;\n      rgba.b = 255 - rgba.b;\n      return rgba;\n    });\n  });\n  Filter.register(\"sepia\", function (adjust) {\n    if (adjust == null) {\n      adjust = 100;\n    }\n\n    adjust /= 100;\n    return this.process(\"sepia\", function (rgba) {\n      rgba.r = Math.min(255, rgba.r * (1 - 0.607 * adjust) + rgba.g * (0.769 * adjust) + rgba.b * (0.189 * adjust));\n      rgba.g = Math.min(255, rgba.r * (0.349 * adjust) + rgba.g * (1 - 0.314 * adjust) + rgba.b * (0.168 * adjust));\n      rgba.b = Math.min(255, rgba.r * (0.272 * adjust) + rgba.g * (0.534 * adjust) + rgba.b * (1 - 0.869 * adjust));\n      return rgba;\n    });\n  });\n  Filter.register(\"gamma\", function (adjust) {\n    return this.process(\"gamma\", function (rgba) {\n      rgba.r = Math.pow(rgba.r / 255, adjust) * 255;\n      rgba.g = Math.pow(rgba.g / 255, adjust) * 255;\n      rgba.b = Math.pow(rgba.b / 255, adjust) * 255;\n      return rgba;\n    });\n  });\n  Filter.register(\"noise\", function (adjust) {\n    adjust = Math.abs(adjust) * 2.55;\n    return this.process(\"noise\", function (rgba) {\n      var rand;\n      rand = Calculate.randomRange(adjust * -1, adjust);\n      rgba.r += rand;\n      rgba.g += rand;\n      rgba.b += rand;\n      return rgba;\n    });\n  });\n  Filter.register(\"clip\", function (adjust) {\n    adjust = Math.abs(adjust) * 2.55;\n    return this.process(\"clip\", function (rgba) {\n      if (rgba.r > 255 - adjust) {\n        rgba.r = 255;\n      } else if (rgba.r < adjust) {\n        rgba.r = 0;\n      }\n\n      if (rgba.g > 255 - adjust) {\n        rgba.g = 255;\n      } else if (rgba.g < adjust) {\n        rgba.g = 0;\n      }\n\n      if (rgba.b > 255 - adjust) {\n        rgba.b = 255;\n      } else if (rgba.b < adjust) {\n        rgba.b = 0;\n      }\n\n      return rgba;\n    });\n  });\n  Filter.register(\"channels\", function (options) {\n    var chan, value;\n\n    if (typeof options !== \"object\") {\n      return this;\n    }\n\n    for (chan in options) {\n      if (!__hasProp.call(options, chan)) continue;\n      value = options[chan];\n\n      if (value === 0) {\n        delete options[chan];\n        continue;\n      }\n\n      options[chan] /= 100;\n    }\n\n    if (options.length === 0) {\n      return this;\n    }\n\n    return this.process(\"channels\", function (rgba) {\n      if (options.red != null) {\n        if (options.red > 0) {\n          rgba.r += (255 - rgba.r) * options.red;\n        } else {\n          rgba.r -= rgba.r * Math.abs(options.red);\n        }\n      }\n\n      if (options.green != null) {\n        if (options.green > 0) {\n          rgba.g += (255 - rgba.g) * options.green;\n        } else {\n          rgba.g -= rgba.g * Math.abs(options.green);\n        }\n      }\n\n      if (options.blue != null) {\n        if (options.blue > 0) {\n          rgba.b += (255 - rgba.b) * options.blue;\n        } else {\n          rgba.b -= rgba.b * Math.abs(options.blue);\n        }\n      }\n\n      return rgba;\n    });\n  });\n  Filter.register(\"curves\", function () {\n    var bezier, chans, cps, ctrl1, ctrl2, end, i, start, _i, _j, _ref, _ref1;\n\n    chans = arguments[0], cps = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\n    if (typeof chans === \"string\") {\n      chans = chans.split(\"\");\n    }\n\n    if (chans[0] === \"v\") {\n      chans = ['r', 'g', 'b'];\n    }\n\n    if (cps.length < 3 || cps.length > 4) {\n      throw \"Invalid number of arguments to curves filter\";\n    }\n\n    start = cps[0];\n    ctrl1 = cps[1];\n    ctrl2 = cps.length === 4 ? cps[2] : cps[1];\n    end = cps[cps.length - 1];\n    bezier = Calculate.bezier(start, ctrl1, ctrl2, end, 0, 255);\n\n    if (start[0] > 0) {\n      for (i = _i = 0, _ref = start[0]; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        bezier[i] = start[1];\n      }\n    }\n\n    if (end[0] < 255) {\n      for (i = _j = _ref1 = end[0]; _ref1 <= 255 ? _j <= 255 : _j >= 255; i = _ref1 <= 255 ? ++_j : --_j) {\n        bezier[i] = end[1];\n      }\n    }\n\n    return this.process(\"curves\", function (rgba) {\n      var _k, _ref2;\n\n      for (i = _k = 0, _ref2 = chans.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {\n        rgba[chans[i]] = bezier[rgba[chans[i]]];\n      }\n\n      return rgba;\n    });\n  });\n  Filter.register(\"exposure\", function (adjust) {\n    var ctrl1, ctrl2, p;\n    p = Math.abs(adjust) / 100;\n    ctrl1 = [0, 255 * p];\n    ctrl2 = [255 - 255 * p, 255];\n\n    if (adjust < 0) {\n      ctrl1 = ctrl1.reverse();\n      ctrl2 = ctrl2.reverse();\n    }\n\n    return this.curves('rgb', [0, 0], ctrl1, ctrl2, [255, 255]);\n  });\n  Caman.Plugin.register(\"crop\", function (width, height, x, y) {\n    var canvas, ctx;\n\n    if (x == null) {\n      x = 0;\n    }\n\n    if (y == null) {\n      y = 0;\n    }\n\n    if (typeof exports !== \"undefined\" && exports !== null) {\n      canvas = new Canvas(width, height);\n    } else {\n      canvas = document.createElement('canvas');\n      Util.copyAttributes(this.canvas, canvas);\n      canvas.width = width;\n      canvas.height = height;\n    }\n\n    ctx = canvas.getContext('2d');\n    ctx.drawImage(this.canvas, x, y, width, height, 0, 0, width, height);\n    this.cropCoordinates = {\n      x: x,\n      y: y\n    };\n    this.cropped = true;\n    return this.replaceCanvas(canvas);\n  });\n  Caman.Plugin.register(\"resize\", function (newDims) {\n    var canvas, ctx;\n\n    if (newDims == null) {\n      newDims = null;\n    }\n\n    if (newDims === null || newDims.width == null && newDims.height == null) {\n      Log.error(\"Invalid or missing dimensions given for resize\");\n      return;\n    }\n\n    if (newDims.width == null) {\n      newDims.width = this.canvas.width * newDims.height / this.canvas.height;\n    } else if (newDims.height == null) {\n      newDims.height = this.canvas.height * newDims.width / this.canvas.width;\n    }\n\n    if (typeof exports !== \"undefined\" && exports !== null) {\n      canvas = new Canvas(newDims.width, newDims.height);\n    } else {\n      canvas = document.createElement('canvas');\n      Util.copyAttributes(this.canvas, canvas);\n      canvas.width = newDims.width;\n      canvas.height = newDims.height;\n    }\n\n    ctx = canvas.getContext('2d');\n    ctx.drawImage(this.canvas, 0, 0, this.canvas.width, this.canvas.height, 0, 0, newDims.width, newDims.height);\n    this.resized = true;\n    return this.replaceCanvas(canvas);\n  });\n  Caman.Filter.register(\"crop\", function () {\n    return this.processPlugin(\"crop\", Array.prototype.slice.call(arguments, 0));\n  });\n  Caman.Filter.register(\"resize\", function () {\n    return this.processPlugin(\"resize\", Array.prototype.slice.call(arguments, 0));\n  });\n  Caman.Filter.register(\"boxBlur\", function () {\n    return this.processKernel(\"Box Blur\", [1, 1, 1, 1, 1, 1, 1, 1, 1]);\n  });\n  Caman.Filter.register(\"heavyRadialBlur\", function () {\n    return this.processKernel(\"Heavy Radial Blur\", [0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0]);\n  });\n  Caman.Filter.register(\"gaussianBlur\", function () {\n    return this.processKernel(\"Gaussian Blur\", [1, 4, 6, 4, 1, 4, 16, 24, 16, 4, 6, 24, 36, 24, 6, 4, 16, 24, 16, 4, 1, 4, 6, 4, 1]);\n  });\n  Caman.Filter.register(\"motionBlur\", function (degrees) {\n    var kernel;\n\n    if (degrees === 0 || degrees === 180) {\n      kernel = [0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0];\n    } else if (degrees > 0 && degrees < 90 || degrees > 180 && degrees < 270) {\n      kernel = [0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0];\n    } else if (degrees === 90 || degrees === 270) {\n      kernel = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    } else {\n      kernel = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n    }\n\n    return this.processKernel(\"Motion Blur\", kernel);\n  });\n  Caman.Filter.register(\"sharpen\", function (amt) {\n    if (amt == null) {\n      amt = 100;\n    }\n\n    amt /= 100;\n    return this.processKernel(\"Sharpen\", [0, -amt, 0, -amt, 4 * amt + 1, -amt, 0, -amt, 0]);\n  });\n  vignetteFilters = {\n    brightness: function (rgba, amt, opts) {\n      rgba.r = rgba.r - rgba.r * amt * opts.strength;\n      rgba.g = rgba.g - rgba.g * amt * opts.strength;\n      rgba.b = rgba.b - rgba.b * amt * opts.strength;\n      return rgba;\n    },\n    gamma: function (rgba, amt, opts) {\n      rgba.r = Math.pow(rgba.r / 255, Math.max(10 * amt * opts.strength, 1)) * 255;\n      rgba.g = Math.pow(rgba.g / 255, Math.max(10 * amt * opts.strength, 1)) * 255;\n      rgba.b = Math.pow(rgba.b / 255, Math.max(10 * amt * opts.strength, 1)) * 255;\n      return rgba;\n    },\n    colorize: function (rgba, amt, opts) {\n      rgba.r -= (rgba.r - opts.color.r) * amt;\n      rgba.g -= (rgba.g - opts.color.g) * amt;\n      rgba.b -= (rgba.b - opts.color.b) * amt;\n      return rgba;\n    }\n  };\n  Filter.register(\"vignette\", function (size, strength) {\n    var bezier, center, end, start;\n\n    if (strength == null) {\n      strength = 60;\n    }\n\n    if (typeof size === \"string\" && size.substr(-1) === \"%\") {\n      if (this.dimensions.height > this.dimensions.width) {\n        size = this.dimensions.width * (parseInt(size.substr(0, size.length - 1), 10) / 100);\n      } else {\n        size = this.dimensions.height * (parseInt(size.substr(0, size.length - 1), 10) / 100);\n      }\n    }\n\n    strength /= 100;\n    center = [this.dimensions.width / 2, this.dimensions.height / 2];\n    start = Math.sqrt(Math.pow(center[0], 2) + Math.pow(center[1], 2));\n    end = start - size;\n    bezier = Calculate.bezier([0, 1], [30, 30], [70, 60], [100, 80]);\n    return this.process(\"vignette\", function (rgba) {\n      var dist, div, loc;\n      loc = rgba.locationXY();\n      dist = Calculate.distance(loc.x, loc.y, center[0], center[1]);\n\n      if (dist > end) {\n        div = Math.max(1, bezier[Math.round((dist - end) / size * 100)] / 10 * strength);\n        rgba.r = Math.pow(rgba.r / 255, div) * 255;\n        rgba.g = Math.pow(rgba.g / 255, div) * 255;\n        rgba.b = Math.pow(rgba.b / 255, div) * 255;\n      }\n\n      return rgba;\n    });\n  });\n  Filter.register(\"rectangularVignette\", function (opts) {\n    var defaults, dim, percent, size, _i, _len, _ref;\n\n    defaults = {\n      strength: 50,\n      cornerRadius: 0,\n      method: 'brightness',\n      color: {\n        r: 0,\n        g: 0,\n        b: 0\n      }\n    };\n    opts = Util.extend(defaults, opts);\n\n    if (!opts.size) {\n      return this;\n    } else if (typeof opts.size === \"string\") {\n      percent = parseInt(opts.size, 10) / 100;\n      opts.size = {\n        width: this.dimensions.width * percent,\n        height: this.dimensions.height * percent\n      };\n    } else if (typeof opts.size === \"object\") {\n      _ref = [\"width\", \"height\"];\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        dim = _ref[_i];\n\n        if (typeof opts.size[dim] === \"string\") {\n          opts.size[dim] = this.dimensions[dim] * (parseInt(opts.size[dim], 10) / 100);\n        }\n      }\n    } else if (opts.size === \"number\") {\n      size = opts.size;\n      opts.size = {\n        width: size,\n        height: size\n      };\n    }\n\n    if (typeof opts.cornerRadius === \"string\") {\n      opts.cornerRadius = opts.size.width / 2 * (parseInt(opts.cornerRadius, 10) / 100);\n    }\n\n    opts.strength /= 100;\n    opts.size.width = Math.floor(opts.size.width);\n    opts.size.height = Math.floor(opts.size.height);\n    opts.image = {\n      width: this.dimensions.width,\n      height: this.dimensions.height\n    };\n\n    if (opts.method === \"colorize\" && typeof opts.color === \"string\") {\n      opts.color = Convert.hexToRGB(opts.color);\n    }\n\n    opts.coords = {\n      left: (this.dimensions.width - opts.size.width) / 2,\n      right: this.dimensions.width - opts.coords.left,\n      bottom: (this.dimensions.height - opts.size.height) / 2,\n      top: this.dimensions.height - opts.coords.bottom\n    };\n    opts.corners = [{\n      x: opts.coords.left + opts.cornerRadius,\n      y: opts.coords.top - opts.cornerRadius\n    }, {\n      x: opts.coords.right - opts.cornerRadius,\n      y: opts.coords.top - opts.cornerRadius\n    }, {\n      x: opts.coords.right - opts.cornerRadius,\n      y: opts.coords.bottom + opts.cornerRadius\n    }, {\n      x: opts.coords.left + opts.cornerRadius,\n      y: opts.coords.bottom + opts.cornerRadius\n    }];\n    opts.maxDist = Calculate.distance(0, 0, opts.corners[3].x, opts.corners[3].y) - opts.cornerRadius;\n    return this.process(\"rectangularVignette\", function (rgba) {\n      var amt, loc, radialDist;\n      loc = rgba.locationXY();\n\n      if (loc.x > opts.corners[0].x && loc.x < opts.corners[1].x && loc.y > opts.coords.bottom && loc.y < opts.coords.top) {\n        return rgba;\n      }\n\n      if (loc.x > opts.coords.left && loc.x < opts.coords.right && loc.y > opts.corners[3].y && loc.y < opts.corners[2].y) {\n        return rgba;\n      }\n\n      if (loc.x > opts.corners[0].x && loc.x < opts.corners[1].x && loc.y > opts.coords.top) {\n        amt = (loc.y - opts.coords.top) / opts.maxDist;\n      } else if (loc.y > opts.corners[2].y && loc.y < opts.corners[1].y && loc.x > opts.coords.right) {\n        amt = (loc.x - opts.coords.right) / opts.maxDist;\n      } else if (loc.x > opts.corners[0].x && loc.x < opts.corners[1].x && loc.y < opts.coords.bottom) {\n        amt = (opts.coords.bottom - loc.y) / opts.maxDist;\n      } else if (loc.y > opts.corners[2].y && loc.y < opts.corners[1].y && loc.x < opts.coords.left) {\n        amt = (opts.coords.left - loc.x) / opts.maxDist;\n      } else if (loc.x <= opts.corners[0].x && loc.y >= opts.corners[0].y) {\n        radialDist = Caman.distance(loc.x, loc.y, opts.corners[0].x, opts.corners[0].y);\n        amt = (radialDist - opts.cornerRadius) / opts.maxDist;\n      } else if (loc.x >= opts.corners[1].x && loc.y >= opts.corners[1].y) {\n        radialDist = Caman.distance(loc.x, loc.y, opts.corners[1].x, opts.corners[1].y);\n        amt = (radialDist - opts.cornerRadius) / opts.maxDist;\n      } else if (loc.x >= opts.corners[2].x && loc.y <= opts.corners[2].y) {\n        radialDist = Caman.distance(loc.x, loc.y, opts.corners[2].x, opts.corners[2].y);\n        amt = (radialDist - opts.cornerRadius) / opts.maxDist;\n      } else if (loc.x <= opts.corners[3].x && loc.y <= opts.corners[3].y) {\n        radialDist = Caman.distance(loc.x, loc.y, opts.corners[3].x, opts.corners[3].y);\n        amt = (radialDist - opts.cornerRadius) / opts.maxDist;\n      }\n\n      if (amt < 0) {\n        return rgba;\n      }\n\n      return vignetteFilters[opts.method](rgba, amt, opts);\n    });\n  });\n\n  (function () {\n    var BlurStack, getLinearGradientMap, getRadialGradientMap, mul_table, shg_table;\n    mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\n    shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n\n    getLinearGradientMap = function (width, height, centerX, centerY, angle, length, mirrored) {\n      var cnv, context, gradient, x1, x2, y1, y2;\n      cnv = typeof exports !== \"undefined\" && exports !== null ? new Canvas() : document.createElement('canvas');\n      cnv.width = width;\n      cnv.height = height;\n      x1 = centerX + Math.cos(angle) * length * 0.5;\n      y1 = centerY + Math.sin(angle) * length * 0.5;\n      x2 = centerX - Math.cos(angle) * length * 0.5;\n      y2 = centerY - Math.sin(angle) * length * 0.5;\n      context = cnv.getContext(\"2d\");\n      gradient = context.createLinearGradient(x1, y1, x2, y2);\n\n      if (!mirrored) {\n        gradient.addColorStop(0, \"white\");\n        gradient.addColorStop(1, \"black\");\n      } else {\n        gradient.addColorStop(0, \"white\");\n        gradient.addColorStop(0.5, \"black\");\n        gradient.addColorStop(1, \"white\");\n      }\n\n      context.fillStyle = gradient;\n      context.fillRect(0, 0, width, height);\n      return context.getImageData(0, 0, width, height);\n    };\n\n    getRadialGradientMap = function (width, height, centerX, centerY, radius1, radius2) {\n      var cnv, context, gradient;\n      cnv = typeof exports !== \"undefined\" && exports !== null ? new Canvas() : document.createElement('canvas');\n      cnv.width = width;\n      cnv.height = height;\n      context = cnv.getContext(\"2d\");\n      gradient = context.createRadialGradient(centerX, centerY, radius1, centerX, centerY, radius2);\n      gradient.addColorStop(1, \"white\");\n      gradient.addColorStop(0, \"black\");\n      context.fillStyle = gradient;\n      context.fillRect(0, 0, width, height);\n      return context.getImageData(0, 0, width, height);\n    };\n\n    BlurStack = function () {\n      this.r = 0;\n      this.g = 0;\n      this.b = 0;\n      this.a = 0;\n      return this.next = null;\n    };\n\n    Caman.Plugin.register(\"compoundBlur\", function (radiusData, radius, increaseFactor, blurLevels) {\n      var b_in_sum, b_out_sum, b_sum, blend, currentIndex, div, g_in_sum, g_out_sum, g_sum, height, heightMinus1, i, iblend, idx, imagePixels, index, iradius, lookupValue, mul_sum, p, pb, pg, pixels, pr, r_in_sum, r_out_sum, r_sum, radiusPixels, radiusPlus1, rbs, shg_sum, stack, stackEnd, stackIn, stackOut, stackStart, steps, sumFactor, w4, wh, wh4, width, widthMinus1, x, y, yi, yp, yw, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r;\n\n      width = this.dimensions.width;\n      height = this.dimensions.height;\n      imagePixels = this.pixelData;\n      radiusPixels = radiusData.data;\n      wh = width * height;\n      wh4 = wh << 2;\n      pixels = [];\n\n      for (i = _i = 0; 0 <= wh4 ? _i < wh4 : _i > wh4; i = 0 <= wh4 ? ++_i : --_i) {\n        pixels[i] = imagePixels[i];\n      }\n\n      currentIndex = 0;\n      steps = blurLevels;\n      blurLevels -= 1;\n\n      while (steps-- >= 0) {\n        iradius = radius + 0.5 | 0;\n\n        if (iradius === 0) {\n          continue;\n        }\n\n        if (iradius > 256) {\n          iradius = 256;\n        }\n\n        div = iradius + iradius + 1;\n        w4 = width << 2;\n        widthMinus1 = width - 1;\n        heightMinus1 = height - 1;\n        radiusPlus1 = iradius + 1;\n        sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n        stackStart = new BlurStack();\n        stackEnd = void 0;\n        stack = stackStart;\n\n        for (i = _j = 1; 1 <= div ? _j < div : _j > div; i = 1 <= div ? ++_j : --_j) {\n          stack = stack.next = new BlurStack();\n\n          if (i === radiusPlus1) {\n            stackEnd = stack;\n          }\n        }\n\n        stack.next = stackStart;\n        stackIn = null;\n        stackOut = null;\n        yw = yi = 0;\n        mul_sum = mul_table[iradius];\n        shg_sum = shg_table[iradius];\n\n        for (y = _k = 0; 0 <= height ? _k < height : _k > height; y = 0 <= height ? ++_k : --_k) {\n          r_in_sum = g_in_sum = b_in_sum = r_sum = g_sum = b_sum = 0;\n          r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n          g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n          b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n          r_sum += sumFactor * pr;\n          g_sum += sumFactor * pg;\n          b_sum += sumFactor * pb;\n          stack = stackStart;\n\n          for (i = _l = 0; 0 <= radiusPlus1 ? _l < radiusPlus1 : _l > radiusPlus1; i = 0 <= radiusPlus1 ? ++_l : --_l) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack = stack.next;\n          }\n\n          for (i = _m = 1; 1 <= radiusPlus1 ? _m < radiusPlus1 : _m > radiusPlus1; i = 1 <= radiusPlus1 ? ++_m : --_m) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            stack = stack.next;\n          }\n\n          stackIn = stackStart;\n          stackOut = stackEnd;\n\n          for (x = _n = 0; 0 <= width ? _n < width : _n > width; x = 0 <= width ? ++_n : --_n) {\n            pixels[yi] = r_sum * mul_sum >> shg_sum;\n            pixels[yi + 1] = g_sum * mul_sum >> shg_sum;\n            pixels[yi + 2] = b_sum * mul_sum >> shg_sum;\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            p = yw + ((p = x + radiusPlus1) < widthMinus1 ? p : widthMinus1) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            stackOut = stackOut.next;\n            yi += 4;\n          }\n\n          yw += width;\n        }\n\n        for (x = _o = 0; 0 <= width ? _o < width : _o > width; x = 0 <= width ? ++_o : --_o) {\n          g_in_sum = b_in_sum = r_in_sum = g_sum = b_sum = r_sum = 0;\n          yi = x << 2;\n          r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n          g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n          b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n          r_sum += sumFactor * pr;\n          g_sum += sumFactor * pg;\n          b_sum += sumFactor * pb;\n          stack = stackStart;\n\n          for (i = _p = 0; 0 <= radiusPlus1 ? _p < radiusPlus1 : _p > radiusPlus1; i = 0 <= radiusPlus1 ? ++_p : --_p) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack = stack.next;\n          }\n\n          yp = width;\n\n          for (i = _q = 1; 1 <= radiusPlus1 ? _q < radiusPlus1 : _q > radiusPlus1; i = 1 <= radiusPlus1 ? ++_q : --_q) {\n            yi = yp + x << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            stack = stack.next;\n\n            if (i < heightMinus1) {\n              yp += width;\n            }\n          }\n\n          yi = x;\n          stackIn = stackStart;\n          stackOut = stackEnd;\n\n          for (y = _r = 0; 0 <= height ? _r < height : _r > height; y = 0 <= height ? ++_r : --_r) {\n            p = yi << 2;\n            pixels[p] = r_sum * mul_sum >> shg_sum;\n            pixels[p + 1] = g_sum * mul_sum >> shg_sum;\n            pixels[p + 2] = b_sum * mul_sum >> shg_sum;\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            stackOut = stackOut.next;\n            yi += width;\n          }\n        }\n\n        radius *= increaseFactor;\n        i = wh;\n\n        while (--i > -1) {\n          idx = i << 2;\n          lookupValue = (radiusPixels[idx + 2] & 0xff) / 255.0 * blurLevels;\n          index = lookupValue | 0;\n\n          if (index === currentIndex) {\n            blend = 256.0 * (lookupValue - (lookupValue | 0));\n            iblend = 256 - blend;\n            imagePixels[idx] = imagePixels[idx] * iblend + pixels[idx] * blend >> 8;\n            imagePixels[idx + 1] = imagePixels[idx + 1] * iblend + pixels[idx + 1] * blend >> 8;\n            imagePixels[idx + 2] = imagePixels[idx + 2] * iblend + pixels[idx + 2] * blend >> 8;\n          } else if (index === currentIndex + 1) {\n            imagePixels[idx] = pixels[idx];\n            imagePixels[idx + 1] = pixels[idx + 1];\n            imagePixels[idx + 2] = pixels[idx + 2];\n          }\n        }\n\n        currentIndex++;\n      }\n\n      return this;\n    });\n    Caman.Filter.register(\"tiltShift\", function (opts) {\n      var defaults, gradient;\n      defaults = {\n        center: {\n          x: this.dimensions.width / 2,\n          y: this.dimensions.height / 2\n        },\n        angle: 45,\n        focusWidth: 200,\n        startRadius: 3,\n        radiusFactor: 1.5,\n        steps: 3\n      };\n      opts = Util.extend(defaults, opts);\n      opts.angle *= Math.PI / 180;\n      gradient = getLinearGradientMap(this.dimensions.width, this.dimensions.height, opts.center.x, opts.center.y, opts.angle, opts.focusWidth, true);\n      return this.processPlugin(\"compoundBlur\", [gradient, opts.startRadius, opts.radiusFactor, opts.steps]);\n    });\n    return Caman.Filter.register(\"radialBlur\", function (opts) {\n      var defaults, gradient, radius1, radius2;\n      defaults = {\n        size: 50,\n        center: {\n          x: this.dimensions.width / 2,\n          y: this.dimensions.height / 2\n        },\n        startRadius: 3,\n        radiusFactor: 1.5,\n        steps: 3,\n        radius: null\n      };\n      opts = Util.extend(defaults, opts);\n\n      if (!opts.radius) {\n        opts.radius = this.dimensions.width < this.dimensions.height ? this.dimensions.height : this.dimensions.width;\n      }\n\n      radius1 = opts.radius / 2 - opts.size;\n      radius2 = opts.radius / 2;\n      gradient = getRadialGradientMap(this.dimensions.width, this.dimensions.height, opts.center.x, opts.center.y, radius1, radius2);\n      return this.processPlugin(\"compoundBlur\", [gradient, opts.startRadius, opts.radiusFactor, opts.steps]);\n    });\n  })();\n\n  Caman.Filter.register(\"edgeEnhance\", function () {\n    return this.processKernel(\"Edge Enhance\", [0, 0, 0, -1, 1, 0, 0, 0, 0]);\n  });\n  Caman.Filter.register(\"edgeDetect\", function () {\n    return this.processKernel(\"Edge Detect\", [-1, -1, -1, -1, 8, -1, -1, -1, -1]);\n  });\n  Caman.Filter.register(\"emboss\", function () {\n    return this.processKernel(\"Emboss\", [-2, -1, 0, -1, 1, 1, 0, 1, 2]);\n  });\n  Caman.Filter.register(\"posterize\", function (adjust) {\n    var numOfAreas, numOfValues;\n    numOfAreas = 256 / adjust;\n    numOfValues = 255 / (adjust - 1);\n    return this.process(\"posterize\", function (rgba) {\n      rgba.r = Math.floor(Math.floor(rgba.r / numOfAreas) * numOfValues);\n      rgba.g = Math.floor(Math.floor(rgba.g / numOfAreas) * numOfValues);\n      rgba.b = Math.floor(Math.floor(rgba.b / numOfAreas) * numOfValues);\n      return rgba;\n    });\n  });\n  Caman.Filter.register(\"vintage\", function (vignette) {\n    if (vignette == null) {\n      vignette = true;\n    }\n\n    this.greyscale();\n    this.contrast(5);\n    this.noise(3);\n    this.sepia(100);\n    this.channels({\n      red: 8,\n      blue: 2,\n      green: 4\n    });\n    this.gamma(0.87);\n\n    if (vignette) {\n      return this.vignette(\"40%\", 30);\n    }\n  });\n  Caman.Filter.register(\"lomo\", function (vignette) {\n    if (vignette == null) {\n      vignette = true;\n    }\n\n    this.brightness(15);\n    this.exposure(15);\n    this.curves('rgb', [0, 0], [200, 0], [155, 255], [255, 255]);\n    this.saturation(-20);\n    this.gamma(1.8);\n\n    if (vignette) {\n      this.vignette(\"50%\", 60);\n    }\n\n    return this.brightness(5);\n  });\n  Caman.Filter.register(\"clarity\", function (grey) {\n    if (grey == null) {\n      grey = false;\n    }\n\n    this.vibrance(20);\n    this.curves('rgb', [5, 0], [130, 150], [190, 220], [250, 255]);\n    this.sharpen(15);\n    this.vignette(\"45%\", 20);\n\n    if (grey) {\n      this.greyscale();\n      this.contrast(4);\n    }\n\n    return this;\n  });\n  Caman.Filter.register(\"sinCity\", function () {\n    this.contrast(100);\n    this.brightness(15);\n    this.exposure(10);\n    this.posterize(80);\n    this.clip(30);\n    return this.greyscale();\n  });\n  Caman.Filter.register(\"sunrise\", function () {\n    this.exposure(3.5);\n    this.saturation(-5);\n    this.vibrance(50);\n    this.sepia(60);\n    this.colorize(\"#e87b22\", 10);\n    this.channels({\n      red: 8,\n      blue: 8\n    });\n    this.contrast(5);\n    this.gamma(1.2);\n    return this.vignette(\"55%\", 25);\n  });\n  Caman.Filter.register(\"crossProcess\", function () {\n    this.exposure(5);\n    this.colorize(\"#e87b22\", 4);\n    this.sepia(20);\n    this.channels({\n      blue: 8,\n      red: 3\n    });\n    this.curves('b', [0, 0], [100, 150], [180, 180], [255, 255]);\n    this.contrast(15);\n    this.vibrance(75);\n    return this.gamma(1.6);\n  });\n  Caman.Filter.register(\"orangePeel\", function () {\n    this.curves('rgb', [0, 0], [100, 50], [140, 200], [255, 255]);\n    this.vibrance(-30);\n    this.saturation(-30);\n    this.colorize('#ff9000', 30);\n    this.contrast(-5);\n    return this.gamma(1.4);\n  });\n  Caman.Filter.register(\"love\", function () {\n    this.brightness(5);\n    this.exposure(8);\n    this.contrast(4);\n    this.colorize('#c42007', 30);\n    this.vibrance(50);\n    return this.gamma(1.3);\n  });\n  Caman.Filter.register(\"grungy\", function () {\n    this.gamma(1.5);\n    this.clip(25);\n    this.saturation(-60);\n    this.contrast(5);\n    this.noise(5);\n    return this.vignette(\"50%\", 30);\n  });\n  Caman.Filter.register(\"jarques\", function () {\n    this.saturation(-35);\n    this.curves('b', [20, 0], [90, 120], [186, 144], [255, 230]);\n    this.curves('r', [0, 0], [144, 90], [138, 120], [255, 255]);\n    this.curves('g', [10, 0], [115, 105], [148, 100], [255, 248]);\n    this.curves('rgb', [0, 0], [120, 100], [128, 140], [255, 255]);\n    return this.sharpen(20);\n  });\n  Caman.Filter.register(\"pinhole\", function () {\n    this.greyscale();\n    this.sepia(10);\n    this.exposure(10);\n    this.contrast(15);\n    return this.vignette(\"60%\", 35);\n  });\n  Caman.Filter.register(\"oldBoot\", function () {\n    this.saturation(-20);\n    this.vibrance(-50);\n    this.gamma(1.1);\n    this.sepia(30);\n    this.channels({\n      red: -10,\n      blue: 5\n    });\n    this.curves('rgb', [0, 0], [80, 50], [128, 230], [255, 255]);\n    return this.vignette(\"60%\", 30);\n  });\n  Caman.Filter.register(\"glowingSun\", function (vignette) {\n    if (vignette == null) {\n      vignette = true;\n    }\n\n    this.brightness(10);\n    this.newLayer(function () {\n      this.setBlendingMode(\"multiply\");\n      this.opacity(80);\n      this.copyParent();\n      this.filter.gamma(0.8);\n      this.filter.contrast(50);\n      return this.filter.exposure(10);\n    });\n    this.newLayer(function () {\n      this.setBlendingMode(\"softLight\");\n      this.opacity(80);\n      return this.fillColor(\"#f49600\");\n    });\n    this.exposure(20);\n    this.gamma(0.8);\n\n    if (vignette) {\n      return this.vignette(\"45%\", 20);\n    }\n  });\n  Caman.Filter.register(\"hazyDays\", function () {\n    this.gamma(1.2);\n    this.newLayer(function () {\n      this.setBlendingMode(\"overlay\");\n      this.opacity(60);\n      this.copyParent();\n      this.filter.channels({\n        red: 5\n      });\n      return this.filter.stackBlur(15);\n    });\n    this.newLayer(function () {\n      this.setBlendingMode(\"addition\");\n      this.opacity(40);\n      return this.fillColor(\"#6899ba\");\n    });\n    this.newLayer(function () {\n      this.setBlendingMode(\"multiply\");\n      this.opacity(35);\n      this.copyParent();\n      this.filter.brightness(40);\n      this.filter.vibrance(40);\n      this.filter.exposure(30);\n      this.filter.contrast(15);\n      this.filter.curves('r', [0, 40], [128, 128], [128, 128], [255, 215]);\n      this.filter.curves('g', [0, 40], [128, 128], [128, 128], [255, 215]);\n      this.filter.curves('b', [0, 40], [128, 128], [128, 128], [255, 215]);\n      return this.filter.stackBlur(5);\n    });\n    this.curves('r', [20, 0], [128, 158], [128, 128], [235, 255]);\n    this.curves('g', [20, 0], [128, 128], [128, 128], [235, 255]);\n    this.curves('b', [20, 0], [128, 108], [128, 128], [235, 255]);\n    return this.vignette(\"45%\", 20);\n  });\n  Caman.Filter.register(\"herMajesty\", function () {\n    this.brightness(40);\n    this.colorize(\"#ea1c5d\", 10);\n    this.curves('b', [0, 10], [128, 180], [190, 190], [255, 255]);\n    this.newLayer(function () {\n      this.setBlendingMode('overlay');\n      this.opacity(50);\n      this.copyParent();\n      this.filter.gamma(0.7);\n      return this.newLayer(function () {\n        this.setBlendingMode('normal');\n        this.opacity(60);\n        return this.fillColor('#ea1c5d');\n      });\n    });\n    this.newLayer(function () {\n      this.setBlendingMode('multiply');\n      this.opacity(60);\n      this.copyParent();\n      this.filter.saturation(50);\n      this.filter.hue(90);\n      return this.filter.contrast(10);\n    });\n    this.gamma(1.4);\n    this.vibrance(-30);\n    this.newLayer(function () {\n      this.opacity(10);\n      return this.fillColor('#e5f0ff');\n    });\n    return this;\n  });\n  Caman.Filter.register(\"nostalgia\", function () {\n    this.saturation(20);\n    this.gamma(1.4);\n    this.greyscale();\n    this.contrast(5);\n    this.sepia(100);\n    this.channels({\n      red: 8,\n      blue: 2,\n      green: 4\n    });\n    this.gamma(0.8);\n    this.contrast(5);\n    this.exposure(10);\n    this.newLayer(function () {\n      this.setBlendingMode('overlay');\n      this.copyParent();\n      this.opacity(55);\n      return this.filter.stackBlur(10);\n    });\n    return this.vignette(\"50%\", 30);\n  });\n  Caman.Filter.register(\"hemingway\", function () {\n    this.greyscale();\n    this.contrast(10);\n    this.gamma(0.9);\n    this.newLayer(function () {\n      this.setBlendingMode(\"multiply\");\n      this.opacity(40);\n      this.copyParent();\n      this.filter.exposure(15);\n      this.filter.contrast(15);\n      return this.filter.channels({\n        green: 10,\n        red: 5\n      });\n    });\n    this.sepia(30);\n    this.curves('rgb', [0, 10], [120, 90], [180, 200], [235, 255]);\n    this.channels({\n      red: 5,\n      green: -2\n    });\n    return this.exposure(15);\n  });\n  Caman.Filter.register(\"concentrate\", function () {\n    this.sharpen(40);\n    this.saturation(-50);\n    this.channels({\n      red: 3\n    });\n    this.newLayer(function () {\n      this.setBlendingMode(\"multiply\");\n      this.opacity(80);\n      this.copyParent();\n      this.filter.sharpen(5);\n      this.filter.contrast(50);\n      this.filter.exposure(10);\n      return this.filter.channels({\n        blue: 5\n      });\n    });\n    return this.brightness(10);\n  });\n  Caman.Plugin.register(\"rotate\", function (degrees) {\n    var angle, canvas, ctx, height, to_radians, width, x, y;\n    angle = degrees % 360;\n\n    if (angle === 0) {\n      return this.dimensions = {\n        width: this.canvas.width,\n        height: this.canvas.height\n      };\n    }\n\n    to_radians = Math.PI / 180;\n\n    if (typeof exports !== \"undefined\" && exports !== null) {\n      canvas = new Canvas();\n    } else {\n      canvas = document.createElement('canvas');\n      Util.copyAttributes(this.canvas, canvas);\n    }\n\n    if (angle === 90 || angle === -270 || angle === 270 || angle === -90) {\n      width = this.canvas.height;\n      height = this.canvas.width;\n      x = width / 2;\n      y = height / 2;\n    } else if (angle === 180) {\n      width = this.canvas.width;\n      height = this.canvas.height;\n      x = width / 2;\n      y = height / 2;\n    } else {\n      width = Math.sqrt(Math.pow(this.originalWidth, 2) + Math.pow(this.originalHeight, 2));\n      height = width;\n      x = this.canvas.height / 2;\n      y = this.canvas.width / 2;\n    }\n\n    canvas.width = width;\n    canvas.height = height;\n    ctx = canvas.getContext('2d');\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.rotate(angle * to_radians);\n    ctx.drawImage(this.canvas, -this.canvas.width / 2, -this.canvas.height / 2, this.canvas.width, this.canvas.height);\n    ctx.restore();\n    return this.replaceCanvas(canvas);\n  });\n  Caman.Filter.register(\"rotate\", function () {\n    return this.processPlugin(\"rotate\", Array.prototype.slice.call(arguments, 0));\n  });\n\n  (function () {\n    var BlurStack, mul_table, shg_table;\n    mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\n    shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n\n    BlurStack = function () {\n      this.r = 0;\n      this.g = 0;\n      this.b = 0;\n      this.a = 0;\n      return this.next = null;\n    };\n\n    Caman.Plugin.register(\"stackBlur\", function (radius) {\n      var b_in_sum, b_out_sum, b_sum, div, g_in_sum, g_out_sum, g_sum, height, heightMinus1, i, mul_sum, p, pb, pg, pixels, pr, r_in_sum, r_out_sum, r_sum, radiusPlus1, rbs, shg_sum, stack, stackEnd, stackIn, stackOut, stackStart, sumFactor, w4, width, widthMinus1, x, y, yi, yp, yw, _i, _j, _k, _l, _m, _n, _o, _p, _q;\n\n      if (isNaN(radius) || radius < 1) {\n        return;\n      }\n\n      radius |= 0;\n      pixels = this.pixelData;\n      width = this.dimensions.width;\n      height = this.dimensions.height;\n      div = radius + radius + 1;\n      w4 = width << 2;\n      widthMinus1 = width - 1;\n      heightMinus1 = height - 1;\n      radiusPlus1 = radius + 1;\n      sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n      stackStart = new BlurStack();\n      stack = stackStart;\n\n      for (i = _i = 1; 1 <= div ? _i < div : _i > div; i = 1 <= div ? ++_i : --_i) {\n        stack = stack.next = new BlurStack();\n\n        if (i === radiusPlus1) {\n          stackEnd = stack;\n        }\n      }\n\n      stack.next = stackStart;\n      stackIn = null;\n      stackOut = null;\n      yw = yi = 0;\n      mul_sum = mul_table[radius];\n      shg_sum = shg_table[radius];\n\n      for (y = _j = 0; 0 <= height ? _j < height : _j > height; y = 0 <= height ? ++_j : --_j) {\n        r_in_sum = g_in_sum = b_in_sum = r_sum = g_sum = b_sum = 0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        stack = stackStart;\n\n        for (i = _k = 0; 0 <= radiusPlus1 ? _k < radiusPlus1 : _k > radiusPlus1; i = 0 <= radiusPlus1 ? ++_k : --_k) {\n          stack.r = pr;\n          stack.g = pg;\n          stack.b = pb;\n          stack = stack.next;\n        }\n\n        for (i = _l = 1; 1 <= radiusPlus1 ? _l < radiusPlus1 : _l > radiusPlus1; i = 1 <= radiusPlus1 ? ++_l : --_l) {\n          p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n          r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n          g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n          b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n          r_in_sum += pr;\n          g_in_sum += pg;\n          b_in_sum += pb;\n          stack = stack.next;\n        }\n\n        stackIn = stackStart;\n        stackOut = stackEnd;\n\n        for (x = _m = 0; 0 <= width ? _m < width : _m > width; x = 0 <= width ? ++_m : --_m) {\n          pixels[yi] = r_sum * mul_sum >> shg_sum;\n          pixels[yi + 1] = g_sum * mul_sum >> shg_sum;\n          pixels[yi + 2] = b_sum * mul_sum >> shg_sum;\n          r_sum -= r_out_sum;\n          g_sum -= g_out_sum;\n          b_sum -= b_out_sum;\n          r_out_sum -= stackIn.r;\n          g_out_sum -= stackIn.g;\n          b_out_sum -= stackIn.b;\n          p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n          r_in_sum += stackIn.r = pixels[p];\n          g_in_sum += stackIn.g = pixels[p + 1];\n          b_in_sum += stackIn.b = pixels[p + 2];\n          r_sum += r_in_sum;\n          g_sum += g_in_sum;\n          b_sum += b_in_sum;\n          stackIn = stackIn.next;\n          r_out_sum += pr = stackOut.r;\n          g_out_sum += pg = stackOut.g;\n          b_out_sum += pb = stackOut.b;\n          r_in_sum -= pr;\n          g_in_sum -= pg;\n          b_in_sum -= pb;\n          stackOut = stackOut.next;\n          yi += 4;\n        }\n\n        yw += width;\n      }\n\n      for (x = _n = 0; 0 <= width ? _n < width : _n > width; x = 0 <= width ? ++_n : --_n) {\n        g_in_sum = b_in_sum = r_in_sum = g_sum = b_sum = r_sum = 0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        stack = stackStart;\n\n        for (i = _o = 0; 0 <= radiusPlus1 ? _o < radiusPlus1 : _o > radiusPlus1; i = 0 <= radiusPlus1 ? ++_o : --_o) {\n          stack.r = pr;\n          stack.g = pg;\n          stack.b = pb;\n          stack = stack.next;\n        }\n\n        yp = width;\n\n        for (i = _p = 1; 1 <= radius ? _p <= radius : _p >= radius; i = 1 <= radius ? ++_p : --_p) {\n          yi = yp + x << 2;\n          r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n          g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n          b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n          r_in_sum += pr;\n          g_in_sum += pg;\n          b_in_sum += pb;\n          stack = stack.next;\n\n          if (i < heightMinus1) {\n            yp += width;\n          }\n        }\n\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n\n        for (y = _q = 0; 0 <= height ? _q < height : _q > height; y = 0 <= height ? ++_q : --_q) {\n          p = yi << 2;\n          pixels[p] = r_sum * mul_sum >> shg_sum;\n          pixels[p + 1] = g_sum * mul_sum >> shg_sum;\n          pixels[p + 2] = b_sum * mul_sum >> shg_sum;\n          r_sum -= r_out_sum;\n          g_sum -= g_out_sum;\n          b_sum -= b_out_sum;\n          r_out_sum -= stackIn.r;\n          g_out_sum -= stackIn.g;\n          b_out_sum -= stackIn.b;\n          p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n          r_sum += r_in_sum += stackIn.r = pixels[p];\n          g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n          b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n          stackIn = stackIn.next;\n          r_out_sum += pr = stackOut.r;\n          g_out_sum += pg = stackOut.g;\n          b_out_sum += pb = stackOut.b;\n          r_in_sum -= pr;\n          g_in_sum -= pg;\n          b_in_sum -= pb;\n          stackOut = stackOut.next;\n          yi += width;\n        }\n      }\n\n      return this;\n    });\n    return Caman.Filter.register(\"stackBlur\", function (radius) {\n      return this.processPlugin(\"stackBlur\", [radius]);\n    });\n  })();\n\n  Caman.Filter.register(\"threshold\", function (adjust) {\n    return this.process(\"threshold\", function (rgba) {\n      var luminance;\n      luminance = 0.2126 * rgba.r + 0.7152 * rgba.g + 0.0722 * rgba.b;\n\n      if (luminance < adjust) {\n        rgba.r = 0;\n        rgba.g = 0;\n        rgba.b = 0;\n      } else {\n        rgba.r = 255;\n        rgba.g = 255;\n        rgba.b = 255;\n      }\n\n      return rgba;\n    });\n  });\n}).call(this);","map":{"version":3,"sources":["/Users/zakstratton/Documents/design-tool/node_modules/caman/dist/caman.full.min.js"],"names":["$","Analyze","Blender","Calculate","Caman","CamanParser","Canvas","Convert","Event","Fiber","Filter","IO","Image","Layer","Log","Module","Pixel","Plugin","Renderer","Root","Store","Util","fs","moduleKeywords","slice","vignetteFilters","__indexOf","indexOf","item","i","l","length","__slice","__hasProp","hasOwnProperty","__bind","fn","me","apply","arguments","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","obj","value","_ref","extended","includes","included","delegate","args","source","target","_i","_len","_results","pop","push","aliasFunction","to","from","_this","aliasProperty","Object","defineProperty","get","set","val","func","Array","sel","root","document","exports","querySelector","uniqid","id","extend","copy","dest","prop","src","clampRGB","copyAttributes","opts","attr","_ref1","attributes","except","nodeName","setAttribute","nodeValue","dataArray","NodeJS","window","Uint8Array","require","_super","version","release","date","DEBUG","allowRevert","crossOrigin","remoteProxy","proxyParam","autoload","toString","getAttrId","canvas","getAttribute","nodeFileReady","callback","finishInit","bind","imageLoaded","parseInt","isNaN","has","execute","initializedPixelData","originalPixelData","cropCoordinates","x","y","cropped","resized","pixelStack","layerStack","canvasQueue","currentLayer","scaled","analyze","renderer","domIsLoaded","parseArguments","setup","cb","listener","setTimeout","readyState","debug","addEventListener","initObj","initType","imageUrl","setInitObject","options","toLowerCase","initNode","initImage","initCanvas","readFile","err","data","image","imageWidth","imageHeight","createElement","context","getContext","parentNode","replaceChild","imageAdjustments","waitForImageLoaded","needsHiDPISwap","hiDPIReplacement","swapped","isRemote","proxyUrl","isImageLoaded","onload","complete","naturalWidth","width","height","naturalHeight","hiDPIRatio","pixel","originalWidth","preScaledWidth","originalHeight","preScaledHeight","hiDPIAdjustments","hasId","assignId","drawImage","imageData","getImageData","pixelData","dimensions","put","reloadCanvasData","resetOriginalPixelData","hiDPIDisabled","ratio","style","scale","backingStoreRatio","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","hiDPICapable","replaceCanvas","newCanvas","oldCanvas","render","trigger","putImageData","revert","updateContext","originalVisiblePixels","reset","ctx","coord","endX","endY","pixels","scaledCanvas","startX","startY","_j","_ref2","_ref3","locationToCoordinates","process","name","processFn","add","type","Type","Single","processKernel","adjust","divisor","bias","Kernel","processPlugin","plugin","newLayer","layer","LayerDequeue","LayerFinished","executeLayer","pushContext","popContext","applyCurrentLayer","applyToParent","c","calculateLevels","levels","numPixels","_k","r","g","b","DOMUpdated","img","imgs","parser","querySelectorAll","parse","INST_REGEX","ele","ready","dataStr","caman","e","filter","inst","instFunc","m","unparsedInstructions","RegExp","match","Function","_error","toImage","blenders","register","rgbaLayer","rgbaParent","distance","x1","y1","x2","y2","Math","sqrt","pow","randomRange","min","max","getFloat","rand","random","toFixed","round","luminance","rgba","bezier","start","ctrl1","ctrl2","end","lowBound","highBound","Ax","Ay","Bx","By","Cx","Cy","curveX","curveY","j","leftCoord","rightCoord","t","x0","x3","y0","y3","hexToRGB","hex","charAt","substr","rgbToHSL","d","h","s","hslToRGB","p","q","hueToRGB","rgbToHSV","v","hsvToRGB","f","floor","rgbToXYZ","z","xyzToRGB","xyzToLab","a","whiteX","whiteY","whiteZ","labToXYZ","rgbToLab","xyz","labToRGB","events","types","event","listen","_fn","_type","LoadOverlay","filterFunc","domainRegex","corsEnabled","isURLRemote","url","matches","domain","remoteCheck","info","encodeURIComponent","useProxy","lang","langToExt","ruby","python","perl","javascript","save","nodeSave","browserSave","toBase64","replace","location","href","file","overwrite","stats","statSync","isFile","writeFile","toBuffer","toDataURL","blendingMode","opacity","layerID","createImageData","setBlendingMode","mode","copyParent","parentData","fillColor","overlayImage","renderQueue","layerData","result","Logger","console","log","coordinatesToLocation","loc","setContext","locationXY","pixelAtLocation","getPixelRelative","horiz","vert","newLoc","putPixelRelative","nowLoc","getPixel","putPixel","toKey","toHex","includeAlpha","plugins","Blocks","cpus","processNext","modPixelData","job","finishedFn","currentJob","shift","loadOverlay","executePlugin","executeFilter","eachBlock","blockN","blockPixelLength","bnum","lastBlockN","n","blocksDone","run","blockFinished","renderBlock","renderKernel","blockNum","totalBlocks","startPixel","endPixel","adjustSize","builder","builderIndex","k","kernel","res","blocksFinished","items","search","flush","color","amt","avg","abs","hsv","level","rgb","chan","red","green","blue","chans","cps","split","reverse","curves","newDims","error","degrees","brightness","strength","gamma","colorize","size","center","dist","div","defaults","dim","percent","cornerRadius","method","coords","left","right","bottom","top","corners","maxDist","radialDist","BlurStack","getLinearGradientMap","getRadialGradientMap","mul_table","shg_table","centerX","centerY","angle","mirrored","cnv","gradient","cos","sin","createLinearGradient","addColorStop","fillStyle","fillRect","radius1","radius2","createRadialGradient","next","radiusData","radius","increaseFactor","blurLevels","b_in_sum","b_out_sum","b_sum","blend","currentIndex","g_in_sum","g_out_sum","g_sum","heightMinus1","iblend","idx","imagePixels","index","iradius","lookupValue","mul_sum","pb","pg","pr","r_in_sum","r_out_sum","r_sum","radiusPixels","radiusPlus1","rbs","shg_sum","stack","stackEnd","stackIn","stackOut","stackStart","steps","sumFactor","w4","wh","wh4","widthMinus1","yi","yp","yw","_l","_m","_n","_o","_p","_q","_r","focusWidth","startRadius","radiusFactor","PI","numOfAreas","numOfValues","vignette","greyscale","contrast","noise","sepia","channels","exposure","saturation","grey","vibrance","sharpen","posterize","clip","stackBlur","hue","to_radians","translate","rotate","restore"],"mappings":"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","sourcesContent":["\n(function(){var $,Analyze,Blender,Calculate,Caman,CamanParser,Canvas,Convert,Event,Fiber,Filter,IO,Image,Layer,Log,Module,Pixel,Plugin,Renderer,Root,Store,Util,fs,moduleKeywords,slice,vignetteFilters,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;},__slice=[].slice,__hasProp={}.hasOwnProperty,__bind=function(fn,me){return function(){return fn.apply(me,arguments);};},__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};moduleKeywords=['extended','included'];Module=(function(){function Module(){}\nModule[\"extends\"]=function(obj){var key,value,_ref;for(key in obj){value=obj[key];if(__indexOf.call(moduleKeywords,key)<0){this[key]=value;}}\nif((_ref=obj.extended)!=null){_ref.apply(this);}\nreturn this;};Module.includes=function(obj){var key,value,_ref;for(key in obj){value=obj[key];if(__indexOf.call(moduleKeywords,key)<0){this.prototype[key]=value;}}\nif((_ref=obj.included)!=null){_ref.apply(this);}\nreturn this;};Module.delegate=function(){var args,source,target,_i,_len,_results;args=1<=arguments.length?__slice.call(arguments,0):[];target=args.pop();_results=[];for(_i=0,_len=args.length;_i<_len;_i++){source=args[_i];_results.push(this.prototype[source]=target.prototype[source]);}\nreturn _results;};Module.aliasFunction=function(to,from){var _this=this;return this.prototype[to]=function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return _this.prototype[from].apply(_this,args);};};Module.aliasProperty=function(to,from){return Object.defineProperty(this.prototype,to,{get:function(){return this[from];},set:function(val){return this[from]=val;}});};Module.included=function(func){return func.call(this,this.prototype);};return Module;})();slice=Array.prototype.slice;$=function(sel,root){if(root==null){root=document;}\nif(typeof sel===\"object\"||(typeof exports!==\"undefined\"&&exports!==null)){return sel;}\nreturn root.querySelector(sel);};Util=(function(){function Util(){}\nUtil.uniqid=(function(){var id;id=0;return{get:function(){return id++;}};})();Util.extend=function(){var copy,dest,obj,prop,src,_i,_len;obj=arguments[0],src=2<=arguments.length?__slice.call(arguments,1):[];dest=obj;for(_i=0,_len=src.length;_i<_len;_i++){copy=src[_i];for(prop in copy){if(!__hasProp.call(copy,prop))continue;dest[prop]=copy[prop];}}\nreturn dest;};Util.clampRGB=function(val){if(val<0){return 0;}\nif(val>255){return 255;}\nreturn val;};Util.copyAttributes=function(from,to,opts){var attr,_i,_len,_ref,_ref1,_results;if(opts==null){opts={};}\n_ref=from.attributes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){attr=_ref[_i];if((opts.except!=null)&&(_ref1=attr.nodeName,__indexOf.call(opts.except,_ref1)>=0)){continue;}\n_results.push(to.setAttribute(attr.nodeName,attr.nodeValue));}\nreturn _results;};Util.dataArray=function(length){if(length==null){length=0;}\nif(Caman.NodeJS||(window.Uint8Array!=null)){return new Uint8Array(length);}\nreturn new Array(length);};return Util;})();if(typeof exports!==\"undefined\"&&exports!==null){Root=exports;Canvas=require('canvas');Image=Canvas.Image;Fiber=require('fibers');fs=require('fs');}else{Root=window;}\nCaman=(function(_super){__extends(Caman,_super);Caman.version={release:\"4.1.2\",date:\"7/27/2013\"};Caman.DEBUG=false;Caman.allowRevert=true;Caman.crossOrigin=\"anonymous\";Caman.remoteProxy=\"\";Caman.proxyParam=\"camanProxyUrl\";Caman.NodeJS=typeof exports!==\"undefined\"&&exports!==null;Caman.autoload=!Caman.NodeJS;Caman.toString=function(){return\"Version \"+Caman.version.release+\", Released \"+Caman.version.date;};Caman.getAttrId=function(canvas){if(Caman.NodeJS){return true;}\nif(typeof canvas===\"string\"){canvas=$(canvas);}\nif(!((canvas!=null)&&(canvas.getAttribute!=null))){return null;}\nreturn canvas.getAttribute('data-caman-id');};function Caman(){this.nodeFileReady=__bind(this.nodeFileReady,this);var args,callback,id,_this=this;if(arguments.length===0){throw\"Invalid arguments\";}\nif(this instanceof Caman){this.finishInit=this.finishInit.bind(this);this.imageLoaded=this.imageLoaded.bind(this);args=arguments[0];if(!Caman.NodeJS){id=parseInt(Caman.getAttrId(args[0]),10);callback=typeof args[1]===\"function\"?args[1]:typeof args[2]===\"function\"?args[2]:function(){};if(!isNaN(id)&&Store.has(id)){return Store.execute(id,callback);}}\nthis.id=Util.uniqid.get();this.initializedPixelData=this.originalPixelData=null;this.cropCoordinates={x:0,y:0};this.cropped=false;this.resized=false;this.pixelStack=[];this.layerStack=[];this.canvasQueue=[];this.currentLayer=null;this.scaled=false;this.analyze=new Analyze(this);this.renderer=new Renderer(this);this.domIsLoaded(function(){_this.parseArguments(args);return _this.setup();});return this;}else{return new Caman(arguments);}}\nCaman.prototype.domIsLoaded=function(cb){var listener,_this=this;if(Caman.NodeJS){return setTimeout(function(){return cb.call(_this);},0);}else{if(document.readyState===\"complete\"){Log.debug(\"DOM initialized\");return setTimeout(function(){return cb.call(_this);},0);}else{listener=function(){if(document.readyState===\"complete\"){Log.debug(\"DOM initialized\");return cb.call(_this);}};return document.addEventListener(\"readystatechange\",listener,false);}}};Caman.prototype.parseArguments=function(args){var key,val,_ref,_results;if(args.length===0){throw\"Invalid arguments given\";}\nthis.initObj=null;this.initType=null;this.imageUrl=null;this.callback=function(){};this.setInitObject(args[0]);if(args.length===1){return;}\nswitch(typeof args[1]){case\"string\":this.imageUrl=args[1];break;case\"function\":this.callback=args[1];}\nif(args.length===2){return;}\nthis.callback=args[2];if(args.length===4){_ref=args[4];_results=[];for(key in _ref){if(!__hasProp.call(_ref,key))continue;val=_ref[key];_results.push(this.options[key]=val);}\nreturn _results;}};Caman.prototype.setInitObject=function(obj){if(Caman.NodeJS){this.initObj=obj;this.initType='node';return;}\nif(typeof obj===\"object\"){this.initObj=obj;}else{this.initObj=$(obj);}\nif(this.initObj==null){throw\"Could not find image or canvas for initialization.\";}\nreturn this.initType=this.initObj.nodeName.toLowerCase();};Caman.prototype.setup=function(){switch(this.initType){case\"node\":return this.initNode();case\"img\":return this.initImage();case\"canvas\":return this.initCanvas();}};Caman.prototype.initNode=function(){Log.debug(\"Initializing for NodeJS\");if(typeof this.initObj===\"string\"){return fs.readFile(this.initObj,this.nodeFileReady);}else{return this.nodeFileReady(null,this.initObj);}};Caman.prototype.nodeFileReady=function(err,data){if(err){throw err;}\nthis.image=new Image();this.image.src=data;Log.debug(\"Image loaded. Width = \"+(this.imageWidth())+\", Height = \"+(this.imageHeight()));this.canvas=new Canvas(this.imageWidth(),this.imageHeight());return this.finishInit();};Caman.prototype.initImage=function(){this.image=this.initObj;this.canvas=document.createElement('canvas');this.context=this.canvas.getContext('2d');Util.copyAttributes(this.image,this.canvas,{except:['src']});this.image.parentNode.replaceChild(this.canvas,this.image);this.imageAdjustments();return this.waitForImageLoaded();};Caman.prototype.initCanvas=function(){this.canvas=this.initObj;this.context=this.canvas.getContext('2d');if(this.imageUrl!=null){this.image=document.createElement('img');this.image.src=this.imageUrl;this.imageAdjustments();return this.waitForImageLoaded();}else{return this.finishInit();}};Caman.prototype.imageAdjustments=function(){if(this.needsHiDPISwap()){Log.debug(this.image.src,\"->\",this.hiDPIReplacement());this.swapped=true;this.image.src=this.hiDPIReplacement();}\nif(IO.isRemote(this.image)){this.image.src=IO.proxyUrl(this.image.src);return Log.debug(\"Remote image detected, using URL = \"+this.image.src);}};Caman.prototype.waitForImageLoaded=function(){if(this.isImageLoaded()){return this.imageLoaded();}else{return this.image.onload=this.imageLoaded;}};Caman.prototype.isImageLoaded=function(){if(!this.image.complete){return false;}\nif((this.image.naturalWidth!=null)&&this.image.naturalWidth===0){return false;}\nreturn true;};Caman.prototype.imageWidth=function(){return this.image.width||this.image.naturalWidth;};Caman.prototype.imageHeight=function(){return this.image.height||this.image.naturalHeight;};Caman.prototype.imageLoaded=function(){Log.debug(\"Image loaded. Width = \"+(this.imageWidth())+\", Height = \"+(this.imageHeight()));if(this.swapped){this.canvas.width=this.imageWidth()/this.hiDPIRatio();this.canvas.height=this.imageHeight()/this.hiDPIRatio();}else{this.canvas.width=this.imageWidth();this.canvas.height=this.imageHeight();}\nreturn this.finishInit();};Caman.prototype.finishInit=function(){var i,pixel,_i,_len,_ref;if(this.context==null){this.context=this.canvas.getContext('2d');}\nthis.originalWidth=this.preScaledWidth=this.width=this.canvas.width;this.originalHeight=this.preScaledHeight=this.height=this.canvas.height;this.hiDPIAdjustments();if(!this.hasId()){this.assignId();}\nif(this.image!=null){this.context.drawImage(this.image,0,0,this.imageWidth(),this.imageHeight(),0,0,this.preScaledWidth,this.preScaledHeight);}\nthis.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.pixelData=this.imageData.data;if(Caman.allowRevert){this.initializedPixelData=Util.dataArray(this.pixelData.length);this.originalPixelData=Util.dataArray(this.pixelData.length);_ref=this.pixelData;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){pixel=_ref[i];this.initializedPixelData[i]=pixel;this.originalPixelData[i]=pixel;}}\nthis.dimensions={width:this.canvas.width,height:this.canvas.height};if(!Caman.NodeJS){Store.put(this.id,this);}\nthis.callback.call(this,this);return this.callback=function(){};};Caman.prototype.reloadCanvasData=function(){this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);return this.pixelData=this.imageData.data;};Caman.prototype.resetOriginalPixelData=function(){var i,pixel,_i,_len,_ref,_results;if(!Caman.allowRevert){throw\"Revert disabled\";}\nthis.originalPixelData=Util.dataArray(this.pixelData.length);_ref=this.pixelData;_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){pixel=_ref[i];_results.push(this.originalPixelData[i]=pixel);}\nreturn _results;};Caman.prototype.hasId=function(){return Caman.getAttrId(this.canvas)!=null;};Caman.prototype.assignId=function(){if(Caman.NodeJS||this.canvas.getAttribute('data-caman-id')){return;}\nreturn this.canvas.setAttribute('data-caman-id',this.id);};Caman.prototype.hiDPIDisabled=function(){return this.canvas.getAttribute('data-caman-hidpi-disabled')!==null;};Caman.prototype.hiDPIAdjustments=function(){var ratio;if(Caman.NodeJS||!this.needsHiDPISwap()){return;}\nratio=this.hiDPIRatio();if(ratio!==1){Log.debug(\"HiDPI ratio = \"+ratio);this.scaled=true;this.preScaledWidth=this.canvas.width;this.preScaledHeight=this.canvas.height;this.canvas.width=this.preScaledWidth*ratio;this.canvas.height=this.preScaledHeight*ratio;this.canvas.style.width=\"\"+this.preScaledWidth+\"px\";this.canvas.style.height=\"\"+this.preScaledHeight+\"px\";this.context.scale(ratio,ratio);this.width=this.originalWidth=this.canvas.width;return this.height=this.originalHeight=this.canvas.height;}};Caman.prototype.hiDPIRatio=function(){var backingStoreRatio,devicePixelRatio;devicePixelRatio=window.devicePixelRatio||1;backingStoreRatio=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;return devicePixelRatio/backingStoreRatio;};Caman.prototype.hiDPICapable=function(){return(window.devicePixelRatio!=null)&&window.devicePixelRatio!==1;};Caman.prototype.needsHiDPISwap=function(){if(this.hiDPIDisabled()||!this.hiDPICapable()){return false;}\nreturn this.hiDPIReplacement()!==null;};Caman.prototype.hiDPIReplacement=function(){if(this.image==null){return null;}\nreturn this.image.getAttribute('data-caman-hidpi');};Caman.prototype.replaceCanvas=function(newCanvas){var oldCanvas;oldCanvas=this.canvas;this.canvas=newCanvas;this.context=this.canvas.getContext('2d');if(!Caman.NodeJS){oldCanvas.parentNode.replaceChild(this.canvas,oldCanvas);}\nthis.width=this.canvas.width;this.height=this.canvas.height;this.reloadCanvasData();return this.dimensions={width:this.canvas.width,height:this.canvas.height};};Caman.prototype.render=function(callback){var _this=this;if(callback==null){callback=function(){};}\nEvent.trigger(this,\"renderStart\");return this.renderer.execute(function(){_this.context.putImageData(_this.imageData,0,0);return callback.call(_this);});};Caman.prototype.revert=function(updateContext){var i,pixel,_i,_len,_ref;if(updateContext==null){updateContext=true;}\nif(!Caman.allowRevert){throw\"Revert disabled\";}\n_ref=this.originalVisiblePixels();for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){pixel=_ref[i];this.pixelData[i]=pixel;}\nif(updateContext){return this.context.putImageData(this.imageData,0,0);}};Caman.prototype.reset=function(){var canvas,ctx,i,imageData,pixel,pixelData,_i,_len,_ref;canvas=document.createElement('canvas');Util.copyAttributes(this.canvas,canvas);canvas.width=this.originalWidth;canvas.height=this.originalHeight;ctx=canvas.getContext('2d');imageData=ctx.getImageData(0,0,canvas.width,canvas.height);pixelData=imageData.data;_ref=this.initializedPixelData;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){pixel=_ref[i];pixelData[i]=pixel;}\nctx.putImageData(imageData,0,0);this.cropCoordinates={x:0,y:0};this.resized=false;return this.replaceCanvas(canvas);};Caman.prototype.originalVisiblePixels=function(){var canvas,coord,ctx,endX,endY,i,imageData,pixel,pixelData,pixels,scaledCanvas,startX,startY,width,_i,_j,_len,_ref,_ref1,_ref2,_ref3;if(!Caman.allowRevert){throw\"Revert disabled\";}\npixels=[];startX=this.cropCoordinates.x;endX=startX+this.width;startY=this.cropCoordinates.y;endY=startY+this.height;if(this.resized){canvas=document.createElement('canvas');canvas.width=this.originalWidth;canvas.height=this.originalHeight;ctx=canvas.getContext('2d');imageData=ctx.getImageData(0,0,canvas.width,canvas.height);pixelData=imageData.data;_ref=this.originalPixelData;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){pixel=_ref[i];pixelData[i]=pixel;}\nctx.putImageData(imageData,0,0);scaledCanvas=document.createElement('canvas');scaledCanvas.width=this.width;scaledCanvas.height=this.height;ctx=scaledCanvas.getContext('2d');ctx.drawImage(canvas,0,0,this.originalWidth,this.originalHeight,0,0,this.width,this.height);pixelData=ctx.getImageData(0,0,this.width,this.height).data;width=this.width;}else{pixelData=this.originalPixelData;width=this.originalWidth;}\nfor(i=_j=0,_ref1=pixelData.length;_j<_ref1;i=_j+=4){coord=Pixel.locationToCoordinates(i,width);if(((startX<=(_ref2=coord.x)&&_ref2<endX))&&((startY<=(_ref3=coord.y)&&_ref3<endY))){pixels.push(pixelData[i],pixelData[i+1],pixelData[i+2],pixelData[i+3]);}}\nreturn pixels;};Caman.prototype.process=function(name,processFn){this.renderer.add({type:Filter.Type.Single,name:name,processFn:processFn});return this;};Caman.prototype.processKernel=function(name,adjust,divisor,bias){var i,_i,_ref;if(divisor==null){divisor=null;}\nif(bias==null){bias=0;}\nif(divisor==null){divisor=0;for(i=_i=0,_ref=adjust.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){divisor+=adjust[i];}}\nthis.renderer.add({type:Filter.Type.Kernel,name:name,adjust:adjust,divisor:divisor,bias:bias});return this;};Caman.prototype.processPlugin=function(plugin,args){this.renderer.add({type:Filter.Type.Plugin,plugin:plugin,args:args});return this;};Caman.prototype.newLayer=function(callback){var layer;layer=new Layer(this);this.canvasQueue.push(layer);this.renderer.add({type:Filter.Type.LayerDequeue});callback.call(layer);this.renderer.add({type:Filter.Type.LayerFinished});return this;};Caman.prototype.executeLayer=function(layer){return this.pushContext(layer);};Caman.prototype.pushContext=function(layer){this.layerStack.push(this.currentLayer);this.pixelStack.push(this.pixelData);this.currentLayer=layer;return this.pixelData=layer.pixelData;};Caman.prototype.popContext=function(){this.pixelData=this.pixelStack.pop();return this.currentLayer=this.layerStack.pop();};Caman.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent();};return Caman;})(Module);Root.Caman=Caman;Caman.Analyze=(function(){function Analyze(c){this.c=c;}\nAnalyze.prototype.calculateLevels=function(){var i,levels,numPixels,_i,_j,_k,_ref;levels={r:{},g:{},b:{}};for(i=_i=0;_i<=255;i=++_i){levels.r[i]=0;levels.g[i]=0;levels.b[i]=0;}\nfor(i=_j=0,_ref=this.c.pixelData.length;_j<_ref;i=_j+=4){levels.r[this.c.pixelData[i]]++;levels.g[this.c.pixelData[i+1]]++;levels.b[this.c.pixelData[i+2]]++;}\nnumPixels=this.c.pixelData.length/4;for(i=_k=0;_k<=255;i=++_k){levels.r[i]/=numPixels;levels.g[i]/=numPixels;levels.b[i]/=numPixels;}\nreturn levels;};return Analyze;})();Analyze=Caman.Analyze;Caman.DOMUpdated=function(){var img,imgs,parser,_i,_len,_results;imgs=document.querySelectorAll(\"img[data-caman]\");if(!(imgs.length>0)){return;}\n_results=[];for(_i=0,_len=imgs.length;_i<_len;_i++){img=imgs[_i];_results.push(parser=new CamanParser(img,function(){this.parse();return this.execute();}));}\nreturn _results;};if(Caman.autoload){(function(){if(document.readyState===\"complete\"){return Caman.DOMUpdated();}else{return document.addEventListener(\"DOMContentLoaded\",Caman.DOMUpdated,false);}})();}\nCamanParser=(function(){var INST_REGEX;INST_REGEX=\"(\\\\w+)\\\\((.*?)\\\\)\";function CamanParser(ele,ready){this.dataStr=ele.getAttribute('data-caman');this.caman=Caman(ele,ready.bind(this));}\nCamanParser.prototype.parse=function(){var args,e,filter,func,inst,instFunc,m,r,unparsedInstructions,_i,_len,_ref,_results;this.ele=this.caman.canvas;r=new RegExp(INST_REGEX,'g');unparsedInstructions=this.dataStr.match(r);if(!(unparsedInstructions.length>0)){return;}\nr=new RegExp(INST_REGEX);_results=[];for(_i=0,_len=unparsedInstructions.length;_i<_len;_i++){inst=unparsedInstructions[_i];_ref=inst.match(r),m=_ref[0],filter=_ref[1],args=_ref[2];instFunc=new Function(\"return function() {        this.\"+filter+\"(\"+args+\");      };\");try{func=instFunc();_results.push(func.call(this.caman));}catch(_error){e=_error;_results.push(Log.debug(e));}}\nreturn _results;};CamanParser.prototype.execute=function(){var ele;ele=this.ele;return this.caman.render(function(){return ele.parentNode.replaceChild(this.toImage(),ele);});};return CamanParser;})();Caman.Blender=(function(){function Blender(){}\nBlender.blenders={};Blender.register=function(name,func){return this.blenders[name]=func;};Blender.execute=function(name,rgbaLayer,rgbaParent){return this.blenders[name](rgbaLayer,rgbaParent);};return Blender;})();Blender=Caman.Blender;Caman.Calculate=(function(){function Calculate(){}\nCalculate.distance=function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));};Calculate.randomRange=function(min,max,getFloat){var rand;if(getFloat==null){getFloat=false;}\nrand=min+(Math.random()*(max-min));if(getFloat){return rand.toFixed(getFloat);}else{return Math.round(rand);}};Calculate.luminance=function(rgba){return(0.299*rgba.r)+(0.587*rgba.g)+(0.114*rgba.b);};Calculate.bezier=function(start,ctrl1,ctrl2,end,lowBound,highBound){var Ax,Ay,Bx,By,Cx,Cy,bezier,curveX,curveY,i,j,leftCoord,rightCoord,t,x0,x1,x2,x3,y0,y1,y2,y3,_i,_j,_k,_ref,_ref1;x0=start[0];y0=start[1];x1=ctrl1[0];y1=ctrl1[1];x2=ctrl2[0];y2=ctrl2[1];x3=end[0];y3=end[1];bezier={};Cx=parseInt(3*(x1-x0),10);Bx=3*(x2-x1)-Cx;Ax=x3-x0-Cx-Bx;Cy=3*(y1-y0);By=3*(y2-y1)-Cy;Ay=y3-y0-Cy-By;for(i=_i=0;_i<1000;i=++_i){t=i/1000;curveX=Math.round((Ax*Math.pow(t,3))+(Bx*Math.pow(t,2))+(Cx*t)+x0);curveY=Math.round((Ay*Math.pow(t,3))+(By*Math.pow(t,2))+(Cy*t)+y0);if(lowBound&&curveY<lowBound){curveY=lowBound;}else if(highBound&&curveY>highBound){curveY=highBound;}\nbezier[curveX]=curveY;}\nif(bezier.length<end[0]+1){for(i=_j=0,_ref=end[0];0<=_ref?_j<=_ref:_j>=_ref;i=0<=_ref?++_j:--_j){if(bezier[i]==null){leftCoord=[i-1,bezier[i-1]];for(j=_k=i,_ref1=end[0];i<=_ref1?_k<=_ref1:_k>=_ref1;j=i<=_ref1?++_k:--_k){if(bezier[j]!=null){rightCoord=[j,bezier[j]];break;}}\nbezier[i]=leftCoord[1]+((rightCoord[1]-leftCoord[1])/(rightCoord[0]-leftCoord[0]))*(i-leftCoord[0]);}}}\nif(bezier[end[0]]==null){bezier[end[0]]=bezier[end[0]-1];}\nreturn bezier;};return Calculate;})();Calculate=Caman.Calculate;Caman.Convert=(function(){function Convert(){}\nConvert.hexToRGB=function(hex){var b,g,r;if(hex.charAt(0)===\"#\"){hex=hex.substr(1);}\nr=parseInt(hex.substr(0,2),16);g=parseInt(hex.substr(2,2),16);b=parseInt(hex.substr(4,2),16);return{r:r,g:g,b:b};};Convert.rgbToHSL=function(r,g,b){var d,h,l,max,min,s;if(typeof r===\"object\"){g=r.g;b=r.b;r=r.r;}\nr/=255;g/=255;b/=255;max=Math.max(r,g,b);min=Math.min(r,g,b);l=(max+min)/2;if(max===min){h=s=0;}else{d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);h=(function(){switch(max){case r:return(g-b)/d+(g<b?6:0);case g:return(b-r)/d+2;case b:return(r-g)/d+4;}})();h/=6;}\nreturn{h:h,s:s,l:l};};Convert.hslToRGB=function(h,s,l){var b,g,p,q,r;if(typeof h===\"object\"){s=h.s;l=h.l;h=h.h;}\nif(s===0){r=g=b=l;}else{q=l<0.5?l*(1+s):l+s-l*s;p=2*l-q;r=this.hueToRGB(p,q,h+1/3);g=this.hueToRGB(p,q,h);b=this.hueToRGB(p,q,h-1/3);}\nreturn{r:r*255,g:g*255,b:b*255};};Convert.hueToRGB=function(p,q,t){if(t<0){t+=1;}\nif(t>1){t-=1;}\nif(t<1/6){return p+(q-p)*6*t;}\nif(t<1/2){return q;}\nif(t<2/3){return p+(q-p)*(2/3-t)*6;}\nreturn p;};Convert.rgbToHSV=function(r,g,b){var d,h,max,min,s,v;r/=255;g/=255;b/=255;max=Math.max(r,g,b);min=Math.min(r,g,b);v=max;d=max-min;s=max===0?0:d/max;if(max===min){h=0;}else{h=(function(){switch(max){case r:return(g-b)/d+(g<b?6:0);case g:return(b-r)/d+2;case b:return(r-g)/d+4;}})();h/=6;}\nreturn{h:h,s:s,v:v};};Convert.hsvToRGB=function(h,s,v){var b,f,g,i,p,q,r,t;i=Math.floor(h*6);f=h*6-i;p=v*(1-s);q=v*(1-f*s);t=v*(1-(1-f)*s);switch(i%6){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;}\nreturn{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255)};};Convert.rgbToXYZ=function(r,g,b){var x,y,z;r/=255;g/=255;b/=255;if(r>0.04045){r=Math.pow((r+0.055)/1.055,2.4);}else{r/=12.92;}\nif(g>0.04045){g=Math.pow((g+0.055)/1.055,2.4);}else{g/=12.92;}\nif(b>0.04045){b=Math.pow((b+0.055)/1.055,2.4);}else{b/=12.92;}\nx=r*0.4124+g*0.3576+b*0.1805;y=r*0.2126+g*0.7152+b*0.0722;z=r*0.0193+g*0.1192+b*0.9505;return{x:x*100,y:y*100,z:z*100};};Convert.xyzToRGB=function(x,y,z){var b,g,r;x/=100;y/=100;z/=100;r=(3.2406*x)+(-1.5372*y)+(-0.4986*z);g=(-0.9689*x)+(1.8758*y)+(0.0415*z);b=(0.0557*x)+(-0.2040*y)+(1.0570*z);if(r>0.0031308){r=(1.055*Math.pow(r,0.4166666667))-0.055;}else{r*=12.92;}\nif(g>0.0031308){g=(1.055*Math.pow(g,0.4166666667))-0.055;}else{g*=12.92;}\nif(b>0.0031308){b=(1.055*Math.pow(b,0.4166666667))-0.055;}else{b*=12.92;}\nreturn{r:r*255,g:g*255,b:b*255};};Convert.xyzToLab=function(x,y,z){var a,b,l,whiteX,whiteY,whiteZ;if(typeof x===\"object\"){y=x.y;z=x.z;x=x.x;}\nwhiteX=95.047;whiteY=100.0;whiteZ=108.883;x/=whiteX;y/=whiteY;z/=whiteZ;if(x>0.008856451679){x=Math.pow(x,0.3333333333);}else{x=(7.787037037*x)+0.1379310345;}\nif(y>0.008856451679){y=Math.pow(y,0.3333333333);}else{y=(7.787037037*y)+0.1379310345;}\nif(z>0.008856451679){z=Math.pow(z,0.3333333333);}else{z=(7.787037037*z)+0.1379310345;}\nl=116*y-16;a=500*(x-y);b=200*(y-z);return{l:l,a:a,b:b};};Convert.labToXYZ=function(l,a,b){var x,y,z;if(typeof l===\"object\"){a=l.a;b=l.b;l=l.l;}\ny=(l+16)/116;x=y+(a/500);z=y-(b/200);if(x>0.2068965517){x=x*x*x;}else{x=0.1284185493*(x-0.1379310345);}\nif(y>0.2068965517){y=y*y*y;}else{y=0.1284185493*(y-0.1379310345);}\nif(z>0.2068965517){z=z*z*z;}else{z=0.1284185493*(z-0.1379310345);}\nreturn{x:x*95.047,y:y*100.0,z:z*108.883};};Convert.rgbToLab=function(r,g,b){var xyz;if(typeof r===\"object\"){g=r.g;b=r.b;r=r.r;}\nxyz=this.rgbToXYZ(r,g,b);return this.xyzToLab(xyz);};Convert.labToRGB=function(l,a,b){};return Convert;})();Convert=Caman.Convert;Caman.Event=(function(){function Event(){}\nEvent.events={};Event.types=[\"processStart\",\"processComplete\",\"renderStart\",\"renderFinished\",\"blockStarted\",\"blockFinished\"];Event.trigger=function(target,type,data){var event,_i,_len,_ref,_results;if(data==null){data=null;}\nif(this.events[type]&&this.events[type].length){_ref=this.events[type];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){event=_ref[_i];if(event.target===null||target.id===event.target.id){_results.push(event.fn.call(target,data));}else{_results.push(void 0);}}\nreturn _results;}};Event.listen=function(target,type,fn){var _fn,_type;if(typeof target===\"string\"){_type=target;_fn=type;target=null;type=_type;fn=_fn;}\nif(__indexOf.call(this.types,type)<0){return false;}\nif(!this.events[type]){this.events[type]=[];}\nthis.events[type].push({target:target,fn:fn});return true;};return Event;})();Event=Caman.Event;Caman.Filter=(function(){function Filter(){}\nFilter.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6};Filter.register=function(name,filterFunc){return Caman.prototype[name]=filterFunc;};return Filter;})();Filter=Caman.Filter;Caman.IO=(function(){function IO(){}\nIO.domainRegex=/(?:(?:http|https):\\/\\/)((?:\\w+)\\.(?:(?:\\w|\\.)+))/;IO.isRemote=function(img){if(img==null){return false;}\nif(this.corsEnabled(img)){return false;}\nreturn this.isURLRemote(img.src);};IO.corsEnabled=function(img){var _ref;return(img.crossOrigin!=null)&&((_ref=img.crossOrigin.toLowerCase())==='anonymous'||_ref==='use-credentials');};IO.isURLRemote=function(url){var matches;matches=url.match(this.domainRegex);if(matches){return matches[1]!==document.domain;}else{return false;}};IO.remoteCheck=function(src){if(this.isURLRemote(src)){if(!Caman.remoteProxy.length){Log.info(\"Attempting to load a remote image without a configured proxy. URL: \"+src);}else{if(Caman.isURLRemote(Caman.remoteProxy)){Log.info(\"Cannot use a remote proxy for loading images.\");return;}\nreturn this.proxyUrl(src);}}};IO.proxyUrl=function(src){return\"\"+Caman.remoteProxy+\"?\"+Caman.proxyParam+\"=\"+(encodeURIComponent(src));};IO.useProxy=function(lang){var langToExt;langToExt={ruby:'rb',python:'py',perl:'pl',javascript:'js'};lang=lang.toLowerCase();if(langToExt[lang]!=null){lang=langToExt[lang];}\nreturn\"proxies/caman_proxy.\"+lang;};return IO;})();Caman.prototype.save=function(){if(typeof exports!==\"undefined\"&&exports!==null){return this.nodeSave.apply(this,arguments);}else{return this.browserSave.apply(this,arguments);}};Caman.prototype.browserSave=function(type){var image;if(type==null){type=\"png\";}\ntype=type.toLowerCase();image=this.toBase64(type).replace(\"image/\"+type,\"image/octet-stream\");return document.location.href=image;};Caman.prototype.nodeSave=function(file,overwrite){var e,stats;if(overwrite==null){overwrite=true;}\ntry{stats=fs.statSync(file);if(stats.isFile()&&!overwrite){return false;}}catch(_error){e=_error;Log.debug(\"Creating output file \"+file);}\nreturn fs.writeFile(file,this.canvas.toBuffer(),function(){return Log.debug(\"Finished writing to \"+file);});};Caman.prototype.toImage=function(type){var img;img=document.createElement('img');img.src=this.toBase64(type);img.width=this.dimensions.width;img.height=this.dimensions.height;if(window.devicePixelRatio){img.width/=window.devicePixelRatio;img.height/=window.devicePixelRatio;}\nreturn img;};Caman.prototype.toBase64=function(type){if(type==null){type=\"png\";}\ntype=type.toLowerCase();return this.canvas.toDataURL(\"image/\"+type);};IO=Caman.IO;Caman.Layer=(function(){function Layer(c){this.c=c;this.filter=this.c;this.options={blendingMode:'normal',opacity:1.0};this.layerID=Util.uniqid.get();this.canvas=typeof exports!==\"undefined\"&&exports!==null?new Canvas():document.createElement('canvas');this.canvas.width=this.c.dimensions.width;this.canvas.height=this.c.dimensions.height;this.context=this.canvas.getContext('2d');this.context.createImageData(this.canvas.width,this.canvas.height);this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.pixelData=this.imageData.data;}\nLayer.prototype.newLayer=function(cb){return this.c.newLayer.call(this.c,cb);};Layer.prototype.setBlendingMode=function(mode){this.options.blendingMode=mode;return this;};Layer.prototype.opacity=function(opacity){this.options.opacity=opacity/100;return this;};Layer.prototype.copyParent=function(){var i,parentData,_i,_ref;parentData=this.c.pixelData;for(i=_i=0,_ref=this.c.pixelData.length;_i<_ref;i=_i+=4){this.pixelData[i]=parentData[i];this.pixelData[i+1]=parentData[i+1];this.pixelData[i+2]=parentData[i+2];this.pixelData[i+3]=parentData[i+3];}\nreturn this;};Layer.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments);};Layer.prototype.overlayImage=function(image){if(typeof image===\"object\"){image=image.src;}else if(typeof image===\"string\"&&image[0]===\"#\"){image=$(image).src;}\nif(!image){return this;}\nthis.c.renderer.renderQueue.push({type:Filter.Type.LoadOverlay,src:image,layer:this});return this;};Layer.prototype.applyToParent=function(){var i,layerData,parentData,result,rgbaLayer,rgbaParent,_i,_ref,_results;parentData=this.c.pixelStack[this.c.pixelStack.length-1];layerData=this.c.pixelData;_results=[];for(i=_i=0,_ref=layerData.length;_i<_ref;i=_i+=4){rgbaParent={r:parentData[i],g:parentData[i+1],b:parentData[i+2],a:parentData[i+3]};rgbaLayer={r:layerData[i],g:layerData[i+1],b:layerData[i+2],a:layerData[i+3]};result=Blender.execute(this.options.blendingMode,rgbaLayer,rgbaParent);result.r=Util.clampRGB(result.r);result.g=Util.clampRGB(result.g);result.b=Util.clampRGB(result.b);if(result.a==null){result.a=rgbaLayer.a;}\nparentData[i]=rgbaParent.r-((rgbaParent.r-result.r)*(this.options.opacity*(result.a/255)));parentData[i+1]=rgbaParent.g-((rgbaParent.g-result.g)*(this.options.opacity*(result.a/255)));_results.push(parentData[i+2]=rgbaParent.b-((rgbaParent.b-result.b)*(this.options.opacity*(result.a/255))));}\nreturn _results;};return Layer;})();Layer=Caman.Layer;Caman.Logger=(function(){function Logger(){var name,_i,_len,_ref;_ref=['log','info','warn','error'];for(_i=0,_len=_ref.length;_i<_len;_i++){name=_ref[_i];this[name]=(function(name){return function(){var args,e;args=1<=arguments.length?__slice.call(arguments,0):[];if(!Caman.DEBUG){return;}\ntry{return console[name].apply(console,args);}catch(_error){e=_error;return console[name](args);}};})(name);}\nthis.debug=this.log;}\nreturn Logger;})();Log=new Caman.Logger();Caman.Pixel=(function(){Pixel.coordinatesToLocation=function(x,y,width){return(y*width+x)*4;};Pixel.locationToCoordinates=function(loc,width){var x,y;y=Math.floor(loc/(width*4));x=(loc%(width*4))/4;return{x:x,y:y};};function Pixel(r,g,b,a,c){this.r=r!=null?r:0;this.g=g!=null?g:0;this.b=b!=null?b:0;this.a=a!=null?a:255;this.c=c!=null?c:null;this.loc=0;}\nPixel.prototype.setContext=function(c){return this.c=c;};Pixel.prototype.locationXY=function(){var x,y;if(this.c==null){throw\"Requires a CamanJS context\";}\ny=this.c.dimensions.height-Math.floor(this.loc/(this.c.dimensions.width*4));x=(this.loc%(this.c.dimensions.width*4))/4;return{x:x,y:y};};Pixel.prototype.pixelAtLocation=function(loc){if(this.c==null){throw\"Requires a CamanJS context\";}\nreturn new Pixel(this.c.pixelData[loc],this.c.pixelData[loc+1],this.c.pixelData[loc+2],this.c.pixelData[loc+3],this.c);};Pixel.prototype.getPixelRelative=function(horiz,vert){var newLoc;if(this.c==null){throw\"Requires a CamanJS context\";}\nnewLoc=this.loc+(this.c.dimensions.width*4*(vert*-1))+(4*horiz);if(newLoc>this.c.pixelData.length||newLoc<0){return new Pixel(0,0,0,255,this.c);}\nreturn this.pixelAtLocation(newLoc);};Pixel.prototype.putPixelRelative=function(horiz,vert,rgba){var nowLoc;if(this.c==null){throw\"Requires a CamanJS context\";}\nnowLoc=this.loc+(this.c.dimensions.width*4*(vert*-1))+(4*horiz);if(newLoc>this.c.pixelData.length||newLoc<0){return;}\nthis.c.pixelData[newLoc]=rgba.r;this.c.pixelData[newLoc+1]=rgba.g;this.c.pixelData[newLoc+2]=rgba.b;this.c.pixelData[newLoc+3]=rgba.a;return true;};Pixel.prototype.getPixel=function(x,y){var loc;if(this.c==null){throw\"Requires a CamanJS context\";}\nloc=this.coordinatesToLocation(x,y,this.width);return this.pixelAtLocation(loc);};Pixel.prototype.putPixel=function(x,y,rgba){var loc;if(this.c==null){throw\"Requires a CamanJS context\";}\nloc=this.coordinatesToLocation(x,y,this.width);this.c.pixelData[loc]=rgba.r;this.c.pixelData[loc+1]=rgba.g;this.c.pixelData[loc+2]=rgba.b;return this.c.pixelData[loc+3]=rgba.a;};Pixel.prototype.toString=function(){return this.toKey();};Pixel.prototype.toHex=function(includeAlpha){var hex;if(includeAlpha==null){includeAlpha=false;}\nhex='#'+this.r.toString(16)+this.g.toString(16)+this.b.toString(16);if(includeAlpha){return hex+this.a.toString(16);}else{return hex;}};return Pixel;})();Pixel=Caman.Pixel;Caman.Plugin=(function(){function Plugin(){}\nPlugin.plugins={};Plugin.register=function(name,plugin){return this.plugins[name]=plugin;};Plugin.execute=function(context,name,args){return this.plugins[name].apply(context,args);};return Plugin;})();Plugin=Caman.Plugin;Caman.Renderer=(function(){Renderer.Blocks=Caman.NodeJS?require('os').cpus().length:4;function Renderer(c){this.c=c;this.processNext=__bind(this.processNext,this);this.renderQueue=[];this.modPixelData=null;}\nRenderer.prototype.add=function(job){if(job==null){return;}\nreturn this.renderQueue.push(job);};Renderer.prototype.processNext=function(){var layer;if(this.renderQueue.length===0){Event.trigger(this,\"renderFinished\");if(this.finishedFn!=null){this.finishedFn.call(this.c);}\nreturn this;}\nthis.currentJob=this.renderQueue.shift();switch(this.currentJob.type){case Filter.Type.LayerDequeue:layer=this.c.canvasQueue.shift();this.c.executeLayer(layer);return this.processNext();case Filter.Type.LayerFinished:this.c.applyCurrentLayer();this.c.popContext();return this.processNext();case Filter.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case Filter.Type.Plugin:return this.executePlugin();default:return this.executeFilter();}};Renderer.prototype.execute=function(callback){this.finishedFn=callback;this.modPixelData=Util.dataArray(this.c.pixelData.length);return this.processNext();};Renderer.prototype.eachBlock=function(fn){var blockN,blockPixelLength,bnum,end,f,i,lastBlockN,n,start,_i,_ref,_results,_this=this;this.blocksDone=0;n=this.c.pixelData.length;blockPixelLength=Math.floor((n/4)/Renderer.Blocks);blockN=blockPixelLength*4;lastBlockN=blockN+((n/4)%Renderer.Blocks)*4;_results=[];for(i=_i=0,_ref=Renderer.Blocks;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){start=i*blockN;end=start+(i===Renderer.Blocks-1?lastBlockN:blockN);if(Caman.NodeJS){f=Fiber(function(){return fn.call(_this,i,start,end);});bnum=f.run();_results.push(this.blockFinished(bnum));}else{_results.push(setTimeout((function(i,start,end){return function(){return fn.call(_this,i,start,end);};})(i,start,end),0));}}\nreturn _results;};Renderer.prototype.executeFilter=function(){Event.trigger(this.c,\"processStart\",this.currentJob);if(this.currentJob.type===Filter.Type.Single){return this.eachBlock(this.renderBlock);}else{return this.eachBlock(this.renderKernel);}};Renderer.prototype.executePlugin=function(){Log.debug(\"Executing plugin \"+this.currentJob.plugin);Plugin.execute(this.c,this.currentJob.plugin,this.currentJob.args);Log.debug(\"Plugin \"+this.currentJob.plugin+\" finished!\");return this.processNext();};Renderer.prototype.renderBlock=function(bnum,start,end){var i,pixel,_i;Log.debug(\"Block #\"+bnum+\" - Filter: \"+this.currentJob.name+\", Start: \"+start+\", End: \"+end);Event.trigger(this.c,\"blockStarted\",{blockNum:bnum,totalBlocks:Renderer.Blocks,startPixel:start,endPixel:end});pixel=new Pixel();pixel.setContext(this.c);for(i=_i=start;_i<end;i=_i+=4){pixel.loc=i;pixel.r=this.c.pixelData[i];pixel.g=this.c.pixelData[i+1];pixel.b=this.c.pixelData[i+2];pixel.a=this.c.pixelData[i+3];this.currentJob.processFn(pixel);this.c.pixelData[i]=Util.clampRGB(pixel.r);this.c.pixelData[i+1]=Util.clampRGB(pixel.g);this.c.pixelData[i+2]=Util.clampRGB(pixel.b);this.c.pixelData[i+3]=Util.clampRGB(pixel.a);}\nif(Caman.NodeJS){return Fiber[\"yield\"](bnum);}else{return this.blockFinished(bnum);}};Renderer.prototype.renderKernel=function(bnum,start,end){var adjust,adjustSize,bias,builder,builderIndex,divisor,i,j,k,kernel,n,name,p,pixel,res,_i,_j,_k;name=this.currentJob.name;bias=this.currentJob.bias;divisor=this.currentJob.divisor;n=this.c.pixelData.length;adjust=this.currentJob.adjust;adjustSize=Math.sqrt(adjust.length);kernel=[];Log.debug(\"Rendering kernel - Filter: \"+this.currentJob.name);start=Math.max(start,this.c.dimensions.width*4*((adjustSize-1)/2));end=Math.min(end,n-(this.c.dimensions.width*4*((adjustSize-1)/2)));builder=(adjustSize-1)/2;pixel=new Pixel();pixel.setContext(this.c);for(i=_i=start;_i<end;i=_i+=4){pixel.loc=i;builderIndex=0;for(j=_j=-builder;-builder<=builder?_j<=builder:_j>=builder;j=-builder<=builder?++_j:--_j){for(k=_k=builder;builder<=-builder?_k<=-builder:_k>=-builder;k=builder<=-builder?++_k:--_k){p=pixel.getPixelRelative(j,k);kernel[builderIndex*3]=p.r;kernel[builderIndex*3+1]=p.g;kernel[builderIndex*3+2]=p.b;builderIndex++;}}\nres=this.processKernel(adjust,kernel,divisor,bias);this.modPixelData[i]=Util.clampRGB(res.r);this.modPixelData[i+1]=Util.clampRGB(res.g);this.modPixelData[i+2]=Util.clampRGB(res.b);this.modPixelData[i+3]=this.c.pixelData[i+3];}\nif(Caman.NodeJS){return Fiber[\"yield\"](bnum);}else{return this.blockFinished(bnum);}};Renderer.prototype.blockFinished=function(bnum){var i,_i,_ref;if(bnum>=0){Log.debug(\"Block #\"+bnum+\" finished! Filter: \"+this.currentJob.name);}\nthis.blocksDone++;Event.trigger(this.c,\"blockFinished\",{blockNum:bnum,blocksFinished:this.blocksDone,totalBlocks:Renderer.Blocks});if(this.blocksDone===Renderer.Blocks){if(this.currentJob.type===Filter.Type.Kernel){for(i=_i=0,_ref=this.c.pixelData.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){this.c.pixelData[i]=this.modPixelData[i];}}\nif(bnum>=0){Log.debug(\"Filter \"+this.currentJob.name+\" finished!\");}\nEvent.trigger(this.c,\"processComplete\",this.currentJob);return this.processNext();}};Renderer.prototype.processKernel=function(adjust,kernel,divisor,bias){var i,val,_i,_ref;val={r:0,g:0,b:0};for(i=_i=0,_ref=adjust.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){val.r+=adjust[i]*kernel[i*3];val.g+=adjust[i]*kernel[i*3+1];val.b+=adjust[i]*kernel[i*3+2];}\nval.r=(val.r/divisor)+bias;val.g=(val.g/divisor)+bias;val.b=(val.b/divisor)+bias;return val;};Renderer.prototype.loadOverlay=function(layer,src){var img,proxyUrl,_this=this;img=document.createElement('img');img.onload=function(){layer.context.drawImage(img,0,0,_this.c.dimensions.width,_this.c.dimensions.height);layer.imageData=layer.context.getImageData(0,0,_this.c.dimensions.width,_this.c.dimensions.height);layer.pixelData=layer.imageData.data;_this.c.pixelData=layer.pixelData;return _this.processNext();};proxyUrl=IO.remoteCheck(src);return img.src=proxyUrl!=null?proxyUrl:src;};return Renderer;})();Renderer=Caman.Renderer;Caman.Store=(function(){function Store(){}\nStore.items={};Store.has=function(search){return this.items[search]!=null;};Store.get=function(search){return this.items[search];};Store.put=function(name,obj){return this.items[name]=obj;};Store.execute=function(search,callback){var _this=this;setTimeout(function(){return callback.call(_this.get(search),_this.get(search));},0);return this.get(search);};Store.flush=function(name){if(name==null){name=false;}\nif(name){return delete this.items[name];}else{return this.items={};}};return Store;})();Store=Caman.Store;Blender.register(\"normal\",function(rgbaLayer,rgbaParent){return{r:rgbaLayer.r,g:rgbaLayer.g,b:rgbaLayer.b};});Blender.register(\"multiply\",function(rgbaLayer,rgbaParent){return{r:(rgbaLayer.r*rgbaParent.r)/255,g:(rgbaLayer.g*rgbaParent.g)/255,b:(rgbaLayer.b*rgbaParent.b)/255};});Blender.register(\"screen\",function(rgbaLayer,rgbaParent){return{r:255-(((255-rgbaLayer.r)*(255-rgbaParent.r))/255),g:255-(((255-rgbaLayer.g)*(255-rgbaParent.g))/255),b:255-(((255-rgbaLayer.b)*(255-rgbaParent.b))/255)};});Blender.register(\"overlay\",function(rgbaLayer,rgbaParent){var result;result={};result.r=rgbaParent.r>128?255-2*(255-rgbaLayer.r)*(255-rgbaParent.r)/255:(rgbaParent.r*rgbaLayer.r*2)/255;result.g=rgbaParent.g>128?255-2*(255-rgbaLayer.g)*(255-rgbaParent.g)/255:(rgbaParent.g*rgbaLayer.g*2)/255;result.b=rgbaParent.b>128?255-2*(255-rgbaLayer.b)*(255-rgbaParent.b)/255:(rgbaParent.b*rgbaLayer.b*2)/255;return result;});Blender.register(\"difference\",function(rgbaLayer,rgbaParent){return{r:rgbaLayer.r-rgbaParent.r,g:rgbaLayer.g-rgbaParent.g,b:rgbaLayer.b-rgbaParent.b};});Blender.register(\"addition\",function(rgbaLayer,rgbaParent){return{r:rgbaParent.r+rgbaLayer.r,g:rgbaParent.g+rgbaLayer.g,b:rgbaParent.b+rgbaLayer.b};});Blender.register(\"exclusion\",function(rgbaLayer,rgbaParent){return{r:128-2*(rgbaParent.r-128)*(rgbaLayer.r-128)/255,g:128-2*(rgbaParent.g-128)*(rgbaLayer.g-128)/255,b:128-2*(rgbaParent.b-128)*(rgbaLayer.b-128)/255};});Blender.register(\"softLight\",function(rgbaLayer,rgbaParent){var result;result={};result.r=rgbaParent.r>128?255-((255-rgbaParent.r)*(255-(rgbaLayer.r-128)))/255:(rgbaParent.r*(rgbaLayer.r+128))/255;result.g=rgbaParent.g>128?255-((255-rgbaParent.g)*(255-(rgbaLayer.g-128)))/255:(rgbaParent.g*(rgbaLayer.g+128))/255;result.b=rgbaParent.b>128?255-((255-rgbaParent.b)*(255-(rgbaLayer.b-128)))/255:(rgbaParent.b*(rgbaLayer.b+128))/255;return result;});Blender.register(\"lighten\",function(rgbaLayer,rgbaParent){return{r:rgbaParent.r>rgbaLayer.r?rgbaParent.r:rgbaLayer.r,g:rgbaParent.g>rgbaLayer.g?rgbaParent.g:rgbaLayer.g,b:rgbaParent.b>rgbaLayer.b?rgbaParent.b:rgbaLayer.b};});Blender.register(\"darken\",function(rgbaLayer,rgbaParent){return{r:rgbaParent.r>rgbaLayer.r?rgbaLayer.r:rgbaParent.r,g:rgbaParent.g>rgbaLayer.g?rgbaLayer.g:rgbaParent.g,b:rgbaParent.b>rgbaLayer.b?rgbaLayer.b:rgbaParent.b};});Filter.register(\"fillColor\",function(){var color;if(arguments.length===1){color=Convert.hexToRGB(arguments[0]);}else{color={r:arguments[0],g:arguments[1],b:arguments[2]};}\nreturn this.process(\"fillColor\",function(rgba){rgba.r=color.r;rgba.g=color.g;rgba.b=color.b;rgba.a=255;return rgba;});});Filter.register(\"brightness\",function(adjust){adjust=Math.floor(255*(adjust/100));return this.process(\"brightness\",function(rgba){rgba.r+=adjust;rgba.g+=adjust;rgba.b+=adjust;return rgba;});});Filter.register(\"saturation\",function(adjust){adjust*=-0.01;return this.process(\"saturation\",function(rgba){var max;max=Math.max(rgba.r,rgba.g,rgba.b);if(rgba.r!==max){rgba.r+=(max-rgba.r)*adjust;}\nif(rgba.g!==max){rgba.g+=(max-rgba.g)*adjust;}\nif(rgba.b!==max){rgba.b+=(max-rgba.b)*adjust;}\nreturn rgba;});});Filter.register(\"vibrance\",function(adjust){adjust*=-1;return this.process(\"vibrance\",function(rgba){var amt,avg,max;max=Math.max(rgba.r,rgba.g,rgba.b);avg=(rgba.r+rgba.g+rgba.b)/3;amt=((Math.abs(max-avg)*2/255)*adjust)/100;if(rgba.r!==max){rgba.r+=(max-rgba.r)*amt;}\nif(rgba.g!==max){rgba.g+=(max-rgba.g)*amt;}\nif(rgba.b!==max){rgba.b+=(max-rgba.b)*amt;}\nreturn rgba;});});Filter.register(\"greyscale\",function(adjust){return this.process(\"greyscale\",function(rgba){var avg;avg=Calculate.luminance(rgba);rgba.r=avg;rgba.g=avg;rgba.b=avg;return rgba;});});Filter.register(\"contrast\",function(adjust){adjust=Math.pow((adjust+100)/100,2);return this.process(\"contrast\",function(rgba){rgba.r/=255;rgba.r-=0.5;rgba.r*=adjust;rgba.r+=0.5;rgba.r*=255;rgba.g/=255;rgba.g-=0.5;rgba.g*=adjust;rgba.g+=0.5;rgba.g*=255;rgba.b/=255;rgba.b-=0.5;rgba.b*=adjust;rgba.b+=0.5;rgba.b*=255;return rgba;});});Filter.register(\"hue\",function(adjust){return this.process(\"hue\",function(rgba){var b,g,h,hsv,r,_ref;hsv=Convert.rgbToHSV(rgba.r,rgba.g,rgba.b);h=hsv.h*100;h+=Math.abs(adjust);h=h%100;h/=100;hsv.h=h;_ref=Convert.hsvToRGB(hsv.h,hsv.s,hsv.v),r=_ref.r,g=_ref.g,b=_ref.b;rgba.r=r;rgba.g=g;rgba.b=b;return rgba;});});Filter.register(\"colorize\",function(){var level,rgb;if(arguments.length===2){rgb=Convert.hexToRGB(arguments[0]);level=arguments[1];}else if(arguments.length===4){rgb={r:arguments[0],g:arguments[1],b:arguments[2]};level=arguments[3];}\nreturn this.process(\"colorize\",function(rgba){rgba.r-=(rgba.r-rgb.r)*(level/100);rgba.g-=(rgba.g-rgb.g)*(level/100);rgba.b-=(rgba.b-rgb.b)*(level/100);return rgba;});});Filter.register(\"invert\",function(){return this.process(\"invert\",function(rgba){rgba.r=255-rgba.r;rgba.g=255-rgba.g;rgba.b=255-rgba.b;return rgba;});});Filter.register(\"sepia\",function(adjust){if(adjust==null){adjust=100;}\nadjust/=100;return this.process(\"sepia\",function(rgba){rgba.r=Math.min(255,(rgba.r*(1-(0.607*adjust)))+(rgba.g*(0.769*adjust))+(rgba.b*(0.189*adjust)));rgba.g=Math.min(255,(rgba.r*(0.349*adjust))+(rgba.g*(1-(0.314*adjust)))+(rgba.b*(0.168*adjust)));rgba.b=Math.min(255,(rgba.r*(0.272*adjust))+(rgba.g*(0.534*adjust))+(rgba.b*(1-(0.869*adjust))));return rgba;});});Filter.register(\"gamma\",function(adjust){return this.process(\"gamma\",function(rgba){rgba.r=Math.pow(rgba.r/255,adjust)*255;rgba.g=Math.pow(rgba.g/255,adjust)*255;rgba.b=Math.pow(rgba.b/255,adjust)*255;return rgba;});});Filter.register(\"noise\",function(adjust){adjust=Math.abs(adjust)*2.55;return this.process(\"noise\",function(rgba){var rand;rand=Calculate.randomRange(adjust*-1,adjust);rgba.r+=rand;rgba.g+=rand;rgba.b+=rand;return rgba;});});Filter.register(\"clip\",function(adjust){adjust=Math.abs(adjust)*2.55;return this.process(\"clip\",function(rgba){if(rgba.r>255-adjust){rgba.r=255;}else if(rgba.r<adjust){rgba.r=0;}\nif(rgba.g>255-adjust){rgba.g=255;}else if(rgba.g<adjust){rgba.g=0;}\nif(rgba.b>255-adjust){rgba.b=255;}else if(rgba.b<adjust){rgba.b=0;}\nreturn rgba;});});Filter.register(\"channels\",function(options){var chan,value;if(typeof options!==\"object\"){return this;}\nfor(chan in options){if(!__hasProp.call(options,chan))continue;value=options[chan];if(value===0){delete options[chan];continue;}\noptions[chan]/=100;}\nif(options.length===0){return this;}\nreturn this.process(\"channels\",function(rgba){if(options.red!=null){if(options.red>0){rgba.r+=(255-rgba.r)*options.red;}else{rgba.r-=rgba.r*Math.abs(options.red);}}\nif(options.green!=null){if(options.green>0){rgba.g+=(255-rgba.g)*options.green;}else{rgba.g-=rgba.g*Math.abs(options.green);}}\nif(options.blue!=null){if(options.blue>0){rgba.b+=(255-rgba.b)*options.blue;}else{rgba.b-=rgba.b*Math.abs(options.blue);}}\nreturn rgba;});});Filter.register(\"curves\",function(){var bezier,chans,cps,ctrl1,ctrl2,end,i,start,_i,_j,_ref,_ref1;chans=arguments[0],cps=2<=arguments.length?__slice.call(arguments,1):[];if(typeof chans===\"string\"){chans=chans.split(\"\");}\nif(chans[0]===\"v\"){chans=['r','g','b'];}\nif(cps.length<3||cps.length>4){throw\"Invalid number of arguments to curves filter\";}\nstart=cps[0];ctrl1=cps[1];ctrl2=cps.length===4?cps[2]:cps[1];end=cps[cps.length-1];bezier=Calculate.bezier(start,ctrl1,ctrl2,end,0,255);if(start[0]>0){for(i=_i=0,_ref=start[0];0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){bezier[i]=start[1];}}\nif(end[0]<255){for(i=_j=_ref1=end[0];_ref1<=255?_j<=255:_j>=255;i=_ref1<=255?++_j:--_j){bezier[i]=end[1];}}\nreturn this.process(\"curves\",function(rgba){var _k,_ref2;for(i=_k=0,_ref2=chans.length;0<=_ref2?_k<_ref2:_k>_ref2;i=0<=_ref2?++_k:--_k){rgba[chans[i]]=bezier[rgba[chans[i]]];}\nreturn rgba;});});Filter.register(\"exposure\",function(adjust){var ctrl1,ctrl2,p;p=Math.abs(adjust)/100;ctrl1=[0,255*p];ctrl2=[255-(255*p),255];if(adjust<0){ctrl1=ctrl1.reverse();ctrl2=ctrl2.reverse();}\nreturn this.curves('rgb',[0,0],ctrl1,ctrl2,[255,255]);});Caman.Plugin.register(\"crop\",function(width,height,x,y){var canvas,ctx;if(x==null){x=0;}\nif(y==null){y=0;}\nif(typeof exports!==\"undefined\"&&exports!==null){canvas=new Canvas(width,height);}else{canvas=document.createElement('canvas');Util.copyAttributes(this.canvas,canvas);canvas.width=width;canvas.height=height;}\nctx=canvas.getContext('2d');ctx.drawImage(this.canvas,x,y,width,height,0,0,width,height);this.cropCoordinates={x:x,y:y};this.cropped=true;return this.replaceCanvas(canvas);});Caman.Plugin.register(\"resize\",function(newDims){var canvas,ctx;if(newDims==null){newDims=null;}\nif(newDims===null||((newDims.width==null)&&(newDims.height==null))){Log.error(\"Invalid or missing dimensions given for resize\");return;}\nif(newDims.width==null){newDims.width=this.canvas.width*newDims.height/this.canvas.height;}else if(newDims.height==null){newDims.height=this.canvas.height*newDims.width/this.canvas.width;}\nif(typeof exports!==\"undefined\"&&exports!==null){canvas=new Canvas(newDims.width,newDims.height);}else{canvas=document.createElement('canvas');Util.copyAttributes(this.canvas,canvas);canvas.width=newDims.width;canvas.height=newDims.height;}\nctx=canvas.getContext('2d');ctx.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,newDims.width,newDims.height);this.resized=true;return this.replaceCanvas(canvas);});Caman.Filter.register(\"crop\",function(){return this.processPlugin(\"crop\",Array.prototype.slice.call(arguments,0));});Caman.Filter.register(\"resize\",function(){return this.processPlugin(\"resize\",Array.prototype.slice.call(arguments,0));});Caman.Filter.register(\"boxBlur\",function(){return this.processKernel(\"Box Blur\",[1,1,1,1,1,1,1,1,1]);});Caman.Filter.register(\"heavyRadialBlur\",function(){return this.processKernel(\"Heavy Radial Blur\",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0]);});Caman.Filter.register(\"gaussianBlur\",function(){return this.processKernel(\"Gaussian Blur\",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1]);});Caman.Filter.register(\"motionBlur\",function(degrees){var kernel;if(degrees===0||degrees===180){kernel=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0];}else if((degrees>0&&degrees<90)||(degrees>180&&degrees<270)){kernel=[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0];}else if(degrees===90||degrees===270){kernel=[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0];}else{kernel=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1];}\nreturn this.processKernel(\"Motion Blur\",kernel);});Caman.Filter.register(\"sharpen\",function(amt){if(amt==null){amt=100;}\namt/=100;return this.processKernel(\"Sharpen\",[0,-amt,0,-amt,4*amt+1,-amt,0,-amt,0]);});vignetteFilters={brightness:function(rgba,amt,opts){rgba.r=rgba.r-(rgba.r*amt*opts.strength);rgba.g=rgba.g-(rgba.g*amt*opts.strength);rgba.b=rgba.b-(rgba.b*amt*opts.strength);return rgba;},gamma:function(rgba,amt,opts){rgba.r=Math.pow(rgba.r/255,Math.max(10*amt*opts.strength,1))*255;rgba.g=Math.pow(rgba.g/255,Math.max(10*amt*opts.strength,1))*255;rgba.b=Math.pow(rgba.b/255,Math.max(10*amt*opts.strength,1))*255;return rgba;},colorize:function(rgba,amt,opts){rgba.r-=(rgba.r-opts.color.r)*amt;rgba.g-=(rgba.g-opts.color.g)*amt;rgba.b-=(rgba.b-opts.color.b)*amt;return rgba;}};Filter.register(\"vignette\",function(size,strength){var bezier,center,end,start;if(strength==null){strength=60;}\nif(typeof size===\"string\"&&size.substr(-1)===\"%\"){if(this.dimensions.height>this.dimensions.width){size=this.dimensions.width*(parseInt(size.substr(0,size.length-1),10)/100);}else{size=this.dimensions.height*(parseInt(size.substr(0,size.length-1),10)/100);}}\nstrength/=100;center=[this.dimensions.width/2,this.dimensions.height/2];start=Math.sqrt(Math.pow(center[0],2)+Math.pow(center[1],2));end=start-size;bezier=Calculate.bezier([0,1],[30,30],[70,60],[100,80]);return this.process(\"vignette\",function(rgba){var dist,div,loc;loc=rgba.locationXY();dist=Calculate.distance(loc.x,loc.y,center[0],center[1]);if(dist>end){div=Math.max(1,(bezier[Math.round(((dist-end)/size)*100)]/10)*strength);rgba.r=Math.pow(rgba.r/255,div)*255;rgba.g=Math.pow(rgba.g/255,div)*255;rgba.b=Math.pow(rgba.b/255,div)*255;}\nreturn rgba;});});Filter.register(\"rectangularVignette\",function(opts){var defaults,dim,percent,size,_i,_len,_ref;defaults={strength:50,cornerRadius:0,method:'brightness',color:{r:0,g:0,b:0}};opts=Util.extend(defaults,opts);if(!opts.size){return this;}else if(typeof opts.size===\"string\"){percent=parseInt(opts.size,10)/100;opts.size={width:this.dimensions.width*percent,height:this.dimensions.height*percent};}else if(typeof opts.size===\"object\"){_ref=[\"width\",\"height\"];for(_i=0,_len=_ref.length;_i<_len;_i++){dim=_ref[_i];if(typeof opts.size[dim]===\"string\"){opts.size[dim]=this.dimensions[dim]*(parseInt(opts.size[dim],10)/100);}}}else if(opts.size===\"number\"){size=opts.size;opts.size={width:size,height:size};}\nif(typeof opts.cornerRadius===\"string\"){opts.cornerRadius=(opts.size.width/2)*(parseInt(opts.cornerRadius,10)/100);}\nopts.strength/=100;opts.size.width=Math.floor(opts.size.width);opts.size.height=Math.floor(opts.size.height);opts.image={width:this.dimensions.width,height:this.dimensions.height};if(opts.method===\"colorize\"&&typeof opts.color===\"string\"){opts.color=Convert.hexToRGB(opts.color);}\nopts.coords={left:(this.dimensions.width-opts.size.width)/2,right:this.dimensions.width-opts.coords.left,bottom:(this.dimensions.height-opts.size.height)/2,top:this.dimensions.height-opts.coords.bottom};opts.corners=[{x:opts.coords.left+opts.cornerRadius,y:opts.coords.top-opts.cornerRadius},{x:opts.coords.right-opts.cornerRadius,y:opts.coords.top-opts.cornerRadius},{x:opts.coords.right-opts.cornerRadius,y:opts.coords.bottom+opts.cornerRadius},{x:opts.coords.left+opts.cornerRadius,y:opts.coords.bottom+opts.cornerRadius}];opts.maxDist=Calculate.distance(0,0,opts.corners[3].x,opts.corners[3].y)-opts.cornerRadius;return this.process(\"rectangularVignette\",function(rgba){var amt,loc,radialDist;loc=rgba.locationXY();if((loc.x>opts.corners[0].x&&loc.x<opts.corners[1].x)&&(loc.y>opts.coords.bottom&&loc.y<opts.coords.top)){return rgba;}\nif((loc.x>opts.coords.left&&loc.x<opts.coords.right)&&(loc.y>opts.corners[3].y&&loc.y<opts.corners[2].y)){return rgba;}\nif(loc.x>opts.corners[0].x&&loc.x<opts.corners[1].x&&loc.y>opts.coords.top){amt=(loc.y-opts.coords.top)/opts.maxDist;}else if(loc.y>opts.corners[2].y&&loc.y<opts.corners[1].y&&loc.x>opts.coords.right){amt=(loc.x-opts.coords.right)/opts.maxDist;}else if(loc.x>opts.corners[0].x&&loc.x<opts.corners[1].x&&loc.y<opts.coords.bottom){amt=(opts.coords.bottom-loc.y)/opts.maxDist;}else if(loc.y>opts.corners[2].y&&loc.y<opts.corners[1].y&&loc.x<opts.coords.left){amt=(opts.coords.left-loc.x)/opts.maxDist;}else if(loc.x<=opts.corners[0].x&&loc.y>=opts.corners[0].y){radialDist=Caman.distance(loc.x,loc.y,opts.corners[0].x,opts.corners[0].y);amt=(radialDist-opts.cornerRadius)/opts.maxDist;}else if(loc.x>=opts.corners[1].x&&loc.y>=opts.corners[1].y){radialDist=Caman.distance(loc.x,loc.y,opts.corners[1].x,opts.corners[1].y);amt=(radialDist-opts.cornerRadius)/opts.maxDist;}else if(loc.x>=opts.corners[2].x&&loc.y<=opts.corners[2].y){radialDist=Caman.distance(loc.x,loc.y,opts.corners[2].x,opts.corners[2].y);amt=(radialDist-opts.cornerRadius)/opts.maxDist;}else if(loc.x<=opts.corners[3].x&&loc.y<=opts.corners[3].y){radialDist=Caman.distance(loc.x,loc.y,opts.corners[3].x,opts.corners[3].y);amt=(radialDist-opts.cornerRadius)/opts.maxDist;}\nif(amt<0){return rgba;}\nreturn vignetteFilters[opts.method](rgba,amt,opts);});});(function(){var BlurStack,getLinearGradientMap,getRadialGradientMap,mul_table,shg_table;mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];getLinearGradientMap=function(width,height,centerX,centerY,angle,length,mirrored){var cnv,context,gradient,x1,x2,y1,y2;cnv=typeof exports!==\"undefined\"&&exports!==null?new Canvas():document.createElement('canvas');cnv.width=width;cnv.height=height;x1=centerX+Math.cos(angle)*length*0.5;y1=centerY+Math.sin(angle)*length*0.5;x2=centerX-Math.cos(angle)*length*0.5;y2=centerY-Math.sin(angle)*length*0.5;context=cnv.getContext(\"2d\");gradient=context.createLinearGradient(x1,y1,x2,y2);if(!mirrored){gradient.addColorStop(0,\"white\");gradient.addColorStop(1,\"black\");}else{gradient.addColorStop(0,\"white\");gradient.addColorStop(0.5,\"black\");gradient.addColorStop(1,\"white\");}\ncontext.fillStyle=gradient;context.fillRect(0,0,width,height);return context.getImageData(0,0,width,height);};getRadialGradientMap=function(width,height,centerX,centerY,radius1,radius2){var cnv,context,gradient;cnv=typeof exports!==\"undefined\"&&exports!==null?new Canvas():document.createElement('canvas');cnv.width=width;cnv.height=height;context=cnv.getContext(\"2d\");gradient=context.createRadialGradient(centerX,centerY,radius1,centerX,centerY,radius2);gradient.addColorStop(1,\"white\");gradient.addColorStop(0,\"black\");context.fillStyle=gradient;context.fillRect(0,0,width,height);return context.getImageData(0,0,width,height);};BlurStack=function(){this.r=0;this.g=0;this.b=0;this.a=0;return this.next=null;};Caman.Plugin.register(\"compoundBlur\",function(radiusData,radius,increaseFactor,blurLevels){var b_in_sum,b_out_sum,b_sum,blend,currentIndex,div,g_in_sum,g_out_sum,g_sum,height,heightMinus1,i,iblend,idx,imagePixels,index,iradius,lookupValue,mul_sum,p,pb,pg,pixels,pr,r_in_sum,r_out_sum,r_sum,radiusPixels,radiusPlus1,rbs,shg_sum,stack,stackEnd,stackIn,stackOut,stackStart,steps,sumFactor,w4,wh,wh4,width,widthMinus1,x,y,yi,yp,yw,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r;width=this.dimensions.width;height=this.dimensions.height;imagePixels=this.pixelData;radiusPixels=radiusData.data;wh=width*height;wh4=wh<<2;pixels=[];for(i=_i=0;0<=wh4?_i<wh4:_i>wh4;i=0<=wh4?++_i:--_i){pixels[i]=imagePixels[i];}\ncurrentIndex=0;steps=blurLevels;blurLevels-=1;while(steps-->=0){iradius=(radius+0.5)|0;if(iradius===0){continue;}\nif(iradius>256){iradius=256;}\ndiv=iradius+iradius+1;w4=width<<2;widthMinus1=width-1;heightMinus1=height-1;radiusPlus1=iradius+1;sumFactor=radiusPlus1*(radiusPlus1+1)/2;stackStart=new BlurStack();stackEnd=void 0;stack=stackStart;for(i=_j=1;1<=div?_j<div:_j>div;i=1<=div?++_j:--_j){stack=stack.next=new BlurStack();if(i===radiusPlus1){stackEnd=stack;}}\nstack.next=stackStart;stackIn=null;stackOut=null;yw=yi=0;mul_sum=mul_table[iradius];shg_sum=shg_table[iradius];for(y=_k=0;0<=height?_k<height:_k>height;y=0<=height?++_k:--_k){r_in_sum=g_in_sum=b_in_sum=r_sum=g_sum=b_sum=0;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;stack=stackStart;for(i=_l=0;0<=radiusPlus1?_l<radiusPlus1:_l>radiusPlus1;i=0<=radiusPlus1?++_l:--_l){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}\nfor(i=_m=1;1<=radiusPlus1?_m<radiusPlus1:_m>radiusPlus1;i=1<=radiusPlus1?++_m:--_m){p=yi+((widthMinus1<i?widthMinus1:i)<<2);r_sum+=(stack.r=(pr=pixels[p]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[p+1]))*rbs;b_sum+=(stack.b=(pb=pixels[p+2]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;stack=stack.next;}\nstackIn=stackStart;stackOut=stackEnd;for(x=_n=0;0<=width?_n<width:_n>width;x=0<=width?++_n:--_n){pixels[yi]=(r_sum*mul_sum)>>shg_sum;pixels[yi+1]=(g_sum*mul_sum)>>shg_sum;pixels[yi+2]=(b_sum*mul_sum)>>shg_sum;r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;p=(yw+((p=x+radiusPlus1)<widthMinus1?p:widthMinus1))<<2;r_in_sum+=(stackIn.r=pixels[p]);g_in_sum+=(stackIn.g=pixels[p+1]);b_in_sum+=(stackIn.b=pixels[p+2]);r_sum+=r_in_sum;g_sum+=g_in_sum;b_sum+=b_in_sum;stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;stackOut=stackOut.next;yi+=4;}\nyw+=width;}\nfor(x=_o=0;0<=width?_o<width:_o>width;x=0<=width?++_o:--_o){g_in_sum=b_in_sum=r_in_sum=g_sum=b_sum=r_sum=0;yi=x<<2;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;stack=stackStart;for(i=_p=0;0<=radiusPlus1?_p<radiusPlus1:_p>radiusPlus1;i=0<=radiusPlus1?++_p:--_p){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}\nyp=width;for(i=_q=1;1<=radiusPlus1?_q<radiusPlus1:_q>radiusPlus1;i=1<=radiusPlus1?++_q:--_q){yi=(yp+x)<<2;r_sum+=(stack.r=(pr=pixels[yi]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[yi+1]))*rbs;b_sum+=(stack.b=(pb=pixels[yi+2]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;stack=stack.next;if(i<heightMinus1){yp+=width;}}\nyi=x;stackIn=stackStart;stackOut=stackEnd;for(y=_r=0;0<=height?_r<height:_r>height;y=0<=height?++_r:--_r){p=yi<<2;pixels[p]=(r_sum*mul_sum)>>shg_sum;pixels[p+1]=(g_sum*mul_sum)>>shg_sum;pixels[p+2]=(b_sum*mul_sum)>>shg_sum;r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;p=(x+(((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width))<<2;r_sum+=(r_in_sum+=(stackIn.r=pixels[p]));g_sum+=(g_in_sum+=(stackIn.g=pixels[p+1]));b_sum+=(b_in_sum+=(stackIn.b=pixels[p+2]));stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;stackOut=stackOut.next;yi+=width;}}\nradius*=increaseFactor;i=wh;while(--i>-1){idx=i<<2;lookupValue=(radiusPixels[idx+2]&0xff)/255.0*blurLevels;index=lookupValue|0;if(index===currentIndex){blend=256.0*(lookupValue-(lookupValue|0));iblend=256-blend;imagePixels[idx]=(imagePixels[idx]*iblend+pixels[idx]*blend)>>8;imagePixels[idx+1]=(imagePixels[idx+1]*iblend+pixels[idx+1]*blend)>>8;imagePixels[idx+2]=(imagePixels[idx+2]*iblend+pixels[idx+2]*blend)>>8;}else if(index===currentIndex+1){imagePixels[idx]=pixels[idx];imagePixels[idx+1]=pixels[idx+1];imagePixels[idx+2]=pixels[idx+2];}}\ncurrentIndex++;}\nreturn this;});Caman.Filter.register(\"tiltShift\",function(opts){var defaults,gradient;defaults={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3};opts=Util.extend(defaults,opts);opts.angle*=Math.PI/180;gradient=getLinearGradientMap(this.dimensions.width,this.dimensions.height,opts.center.x,opts.center.y,opts.angle,opts.focusWidth,true);return this.processPlugin(\"compoundBlur\",[gradient,opts.startRadius,opts.radiusFactor,opts.steps]);});return Caman.Filter.register(\"radialBlur\",function(opts){var defaults,gradient,radius1,radius2;defaults={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null};opts=Util.extend(defaults,opts);if(!opts.radius){opts.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width;}\nradius1=(opts.radius/2)-opts.size;radius2=opts.radius/2;gradient=getRadialGradientMap(this.dimensions.width,this.dimensions.height,opts.center.x,opts.center.y,radius1,radius2);return this.processPlugin(\"compoundBlur\",[gradient,opts.startRadius,opts.radiusFactor,opts.steps]);});})();Caman.Filter.register(\"edgeEnhance\",function(){return this.processKernel(\"Edge Enhance\",[0,0,0,-1,1,0,0,0,0]);});Caman.Filter.register(\"edgeDetect\",function(){return this.processKernel(\"Edge Detect\",[-1,-1,-1,-1,8,-1,-1,-1,-1]);});Caman.Filter.register(\"emboss\",function(){return this.processKernel(\"Emboss\",[-2,-1,0,-1,1,1,0,1,2]);});Caman.Filter.register(\"posterize\",function(adjust){var numOfAreas,numOfValues;numOfAreas=256/adjust;numOfValues=255/(adjust-1);return this.process(\"posterize\",function(rgba){rgba.r=Math.floor(Math.floor(rgba.r/numOfAreas)*numOfValues);rgba.g=Math.floor(Math.floor(rgba.g/numOfAreas)*numOfValues);rgba.b=Math.floor(Math.floor(rgba.b/numOfAreas)*numOfValues);return rgba;});});Caman.Filter.register(\"vintage\",function(vignette){if(vignette==null){vignette=true;}\nthis.greyscale();this.contrast(5);this.noise(3);this.sepia(100);this.channels({red:8,blue:2,green:4});this.gamma(0.87);if(vignette){return this.vignette(\"40%\",30);}});Caman.Filter.register(\"lomo\",function(vignette){if(vignette==null){vignette=true;}\nthis.brightness(15);this.exposure(15);this.curves('rgb',[0,0],[200,0],[155,255],[255,255]);this.saturation(-20);this.gamma(1.8);if(vignette){this.vignette(\"50%\",60);}\nreturn this.brightness(5);});Caman.Filter.register(\"clarity\",function(grey){if(grey==null){grey=false;}\nthis.vibrance(20);this.curves('rgb',[5,0],[130,150],[190,220],[250,255]);this.sharpen(15);this.vignette(\"45%\",20);if(grey){this.greyscale();this.contrast(4);}\nreturn this;});Caman.Filter.register(\"sinCity\",function(){this.contrast(100);this.brightness(15);this.exposure(10);this.posterize(80);this.clip(30);return this.greyscale();});Caman.Filter.register(\"sunrise\",function(){this.exposure(3.5);this.saturation(-5);this.vibrance(50);this.sepia(60);this.colorize(\"#e87b22\",10);this.channels({red:8,blue:8});this.contrast(5);this.gamma(1.2);return this.vignette(\"55%\",25);});Caman.Filter.register(\"crossProcess\",function(){this.exposure(5);this.colorize(\"#e87b22\",4);this.sepia(20);this.channels({blue:8,red:3});this.curves('b',[0,0],[100,150],[180,180],[255,255]);this.contrast(15);this.vibrance(75);return this.gamma(1.6);});Caman.Filter.register(\"orangePeel\",function(){this.curves('rgb',[0,0],[100,50],[140,200],[255,255]);this.vibrance(-30);this.saturation(-30);this.colorize('#ff9000',30);this.contrast(-5);return this.gamma(1.4);});Caman.Filter.register(\"love\",function(){this.brightness(5);this.exposure(8);this.contrast(4);this.colorize('#c42007',30);this.vibrance(50);return this.gamma(1.3);});Caman.Filter.register(\"grungy\",function(){this.gamma(1.5);this.clip(25);this.saturation(-60);this.contrast(5);this.noise(5);return this.vignette(\"50%\",30);});Caman.Filter.register(\"jarques\",function(){this.saturation(-35);this.curves('b',[20,0],[90,120],[186,144],[255,230]);this.curves('r',[0,0],[144,90],[138,120],[255,255]);this.curves('g',[10,0],[115,105],[148,100],[255,248]);this.curves('rgb',[0,0],[120,100],[128,140],[255,255]);return this.sharpen(20);});Caman.Filter.register(\"pinhole\",function(){this.greyscale();this.sepia(10);this.exposure(10);this.contrast(15);return this.vignette(\"60%\",35);});Caman.Filter.register(\"oldBoot\",function(){this.saturation(-20);this.vibrance(-50);this.gamma(1.1);this.sepia(30);this.channels({red:-10,blue:5});this.curves('rgb',[0,0],[80,50],[128,230],[255,255]);return this.vignette(\"60%\",30);});Caman.Filter.register(\"glowingSun\",function(vignette){if(vignette==null){vignette=true;}\nthis.brightness(10);this.newLayer(function(){this.setBlendingMode(\"multiply\");this.opacity(80);this.copyParent();this.filter.gamma(0.8);this.filter.contrast(50);return this.filter.exposure(10);});this.newLayer(function(){this.setBlendingMode(\"softLight\");this.opacity(80);return this.fillColor(\"#f49600\");});this.exposure(20);this.gamma(0.8);if(vignette){return this.vignette(\"45%\",20);}});Caman.Filter.register(\"hazyDays\",function(){this.gamma(1.2);this.newLayer(function(){this.setBlendingMode(\"overlay\");this.opacity(60);this.copyParent();this.filter.channels({red:5});return this.filter.stackBlur(15);});this.newLayer(function(){this.setBlendingMode(\"addition\");this.opacity(40);return this.fillColor(\"#6899ba\");});this.newLayer(function(){this.setBlendingMode(\"multiply\");this.opacity(35);this.copyParent();this.filter.brightness(40);this.filter.vibrance(40);this.filter.exposure(30);this.filter.contrast(15);this.filter.curves('r',[0,40],[128,128],[128,128],[255,215]);this.filter.curves('g',[0,40],[128,128],[128,128],[255,215]);this.filter.curves('b',[0,40],[128,128],[128,128],[255,215]);return this.filter.stackBlur(5);});this.curves('r',[20,0],[128,158],[128,128],[235,255]);this.curves('g',[20,0],[128,128],[128,128],[235,255]);this.curves('b',[20,0],[128,108],[128,128],[235,255]);return this.vignette(\"45%\",20);});Caman.Filter.register(\"herMajesty\",function(){this.brightness(40);this.colorize(\"#ea1c5d\",10);this.curves('b',[0,10],[128,180],[190,190],[255,255]);this.newLayer(function(){this.setBlendingMode('overlay');this.opacity(50);this.copyParent();this.filter.gamma(0.7);return this.newLayer(function(){this.setBlendingMode('normal');this.opacity(60);return this.fillColor('#ea1c5d');});});this.newLayer(function(){this.setBlendingMode('multiply');this.opacity(60);this.copyParent();this.filter.saturation(50);this.filter.hue(90);return this.filter.contrast(10);});this.gamma(1.4);this.vibrance(-30);this.newLayer(function(){this.opacity(10);return this.fillColor('#e5f0ff');});return this;});Caman.Filter.register(\"nostalgia\",function(){this.saturation(20);this.gamma(1.4);this.greyscale();this.contrast(5);this.sepia(100);this.channels({red:8,blue:2,green:4});this.gamma(0.8);this.contrast(5);this.exposure(10);this.newLayer(function(){this.setBlendingMode('overlay');this.copyParent();this.opacity(55);return this.filter.stackBlur(10);});return this.vignette(\"50%\",30);});Caman.Filter.register(\"hemingway\",function(){this.greyscale();this.contrast(10);this.gamma(0.9);this.newLayer(function(){this.setBlendingMode(\"multiply\");this.opacity(40);this.copyParent();this.filter.exposure(15);this.filter.contrast(15);return this.filter.channels({green:10,red:5});});this.sepia(30);this.curves('rgb',[0,10],[120,90],[180,200],[235,255]);this.channels({red:5,green:-2});return this.exposure(15);});Caman.Filter.register(\"concentrate\",function(){this.sharpen(40);this.saturation(-50);this.channels({red:3});this.newLayer(function(){this.setBlendingMode(\"multiply\");this.opacity(80);this.copyParent();this.filter.sharpen(5);this.filter.contrast(50);this.filter.exposure(10);return this.filter.channels({blue:5});});return this.brightness(10);});Caman.Plugin.register(\"rotate\",function(degrees){var angle,canvas,ctx,height,to_radians,width,x,y;angle=degrees%360;if(angle===0){return this.dimensions={width:this.canvas.width,height:this.canvas.height};}\nto_radians=Math.PI/180;if(typeof exports!==\"undefined\"&&exports!==null){canvas=new Canvas();}else{canvas=document.createElement('canvas');Util.copyAttributes(this.canvas,canvas);}\nif(angle===90||angle===-270||angle===270||angle===-90){width=this.canvas.height;height=this.canvas.width;x=width/2;y=height/2;}else if(angle===180){width=this.canvas.width;height=this.canvas.height;x=width/2;y=height/2;}else{width=Math.sqrt(Math.pow(this.originalWidth,2)+Math.pow(this.originalHeight,2));height=width;x=this.canvas.height/2;y=this.canvas.width/2;}\ncanvas.width=width;canvas.height=height;ctx=canvas.getContext('2d');ctx.save();ctx.translate(x,y);ctx.rotate(angle*to_radians);ctx.drawImage(this.canvas,-this.canvas.width/2,-this.canvas.height/2,this.canvas.width,this.canvas.height);ctx.restore();return this.replaceCanvas(canvas);});Caman.Filter.register(\"rotate\",function(){return this.processPlugin(\"rotate\",Array.prototype.slice.call(arguments,0));});(function(){var BlurStack,mul_table,shg_table;mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];BlurStack=function(){this.r=0;this.g=0;this.b=0;this.a=0;return this.next=null;};Caman.Plugin.register(\"stackBlur\",function(radius){var b_in_sum,b_out_sum,b_sum,div,g_in_sum,g_out_sum,g_sum,height,heightMinus1,i,mul_sum,p,pb,pg,pixels,pr,r_in_sum,r_out_sum,r_sum,radiusPlus1,rbs,shg_sum,stack,stackEnd,stackIn,stackOut,stackStart,sumFactor,w4,width,widthMinus1,x,y,yi,yp,yw,_i,_j,_k,_l,_m,_n,_o,_p,_q;if(isNaN(radius)||radius<1){return;}\nradius|=0;pixels=this.pixelData;width=this.dimensions.width;height=this.dimensions.height;div=radius+radius+1;w4=width<<2;widthMinus1=width-1;heightMinus1=height-1;radiusPlus1=radius+1;sumFactor=radiusPlus1*(radiusPlus1+1)/2;stackStart=new BlurStack();stack=stackStart;for(i=_i=1;1<=div?_i<div:_i>div;i=1<=div?++_i:--_i){stack=stack.next=new BlurStack();if(i===radiusPlus1){stackEnd=stack;}}\nstack.next=stackStart;stackIn=null;stackOut=null;yw=yi=0;mul_sum=mul_table[radius];shg_sum=shg_table[radius];for(y=_j=0;0<=height?_j<height:_j>height;y=0<=height?++_j:--_j){r_in_sum=g_in_sum=b_in_sum=r_sum=g_sum=b_sum=0;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;stack=stackStart;for(i=_k=0;0<=radiusPlus1?_k<radiusPlus1:_k>radiusPlus1;i=0<=radiusPlus1?++_k:--_k){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}\nfor(i=_l=1;1<=radiusPlus1?_l<radiusPlus1:_l>radiusPlus1;i=1<=radiusPlus1?++_l:--_l){p=yi+((widthMinus1<i?widthMinus1:i)<<2);r_sum+=(stack.r=(pr=pixels[p]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[p+1]))*rbs;b_sum+=(stack.b=(pb=pixels[p+2]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;stack=stack.next;}\nstackIn=stackStart;stackOut=stackEnd;for(x=_m=0;0<=width?_m<width:_m>width;x=0<=width?++_m:--_m){pixels[yi]=(r_sum*mul_sum)>>shg_sum;pixels[yi+1]=(g_sum*mul_sum)>>shg_sum;pixels[yi+2]=(b_sum*mul_sum)>>shg_sum;r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;p=(yw+((p=x+radius+1)<widthMinus1?p:widthMinus1))<<2;r_in_sum+=(stackIn.r=pixels[p]);g_in_sum+=(stackIn.g=pixels[p+1]);b_in_sum+=(stackIn.b=pixels[p+2]);r_sum+=r_in_sum;g_sum+=g_in_sum;b_sum+=b_in_sum;stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;stackOut=stackOut.next;yi+=4;}\nyw+=width;}\nfor(x=_n=0;0<=width?_n<width:_n>width;x=0<=width?++_n:--_n){g_in_sum=b_in_sum=r_in_sum=g_sum=b_sum=r_sum=0;yi=x<<2;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;stack=stackStart;for(i=_o=0;0<=radiusPlus1?_o<radiusPlus1:_o>radiusPlus1;i=0<=radiusPlus1?++_o:--_o){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}\nyp=width;for(i=_p=1;1<=radius?_p<=radius:_p>=radius;i=1<=radius?++_p:--_p){yi=(yp+x)<<2;r_sum+=(stack.r=(pr=pixels[yi]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[yi+1]))*rbs;b_sum+=(stack.b=(pb=pixels[yi+2]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;stack=stack.next;if(i<heightMinus1){yp+=width;}}\nyi=x;stackIn=stackStart;stackOut=stackEnd;for(y=_q=0;0<=height?_q<height:_q>height;y=0<=height?++_q:--_q){p=yi<<2;pixels[p]=(r_sum*mul_sum)>>shg_sum;pixels[p+1]=(g_sum*mul_sum)>>shg_sum;pixels[p+2]=(b_sum*mul_sum)>>shg_sum;r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;p=(x+(((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width))<<2;r_sum+=(r_in_sum+=(stackIn.r=pixels[p]));g_sum+=(g_in_sum+=(stackIn.g=pixels[p+1]));b_sum+=(b_in_sum+=(stackIn.b=pixels[p+2]));stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;stackOut=stackOut.next;yi+=width;}}\nreturn this;});return Caman.Filter.register(\"stackBlur\",function(radius){return this.processPlugin(\"stackBlur\",[radius]);});})();Caman.Filter.register(\"threshold\",function(adjust){return this.process(\"threshold\",function(rgba){var luminance;luminance=(0.2126*rgba.r)+(0.7152*rgba.g)+(0.0722*rgba.b);if(luminance<adjust){rgba.r=0;rgba.g=0;rgba.b=0;}else{rgba.r=255;rgba.g=255;rgba.b=255;}\nreturn rgba;});});}).call(this);"]},"metadata":{},"sourceType":"script"}